(self.webpackChunk=self.webpackChunk||[]).push([[615],{3545:(t,e,s)=>{"use strict";var a=s(5706),r=s(8262),n=s(2433),o=s(538),i=s(8345),l=s(3909),c=s(9665),u=s.n(c),d=s(7757),p=s.n(d),v=s(9669),m=s.n(v)().create({baseURL:"/api/v1/",withCredentials:!0});m.interceptors.request.use((function(t){return t.headers.common.Accept="application/json",t.headers.common["Content-Type"]="application/json",t})),m.interceptors.response.use((function(t){return t}),(function(t){return t.response.status,Promise.reject(t)}));const f=m;function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,a.qj)(t);function s(){Object.keys(t).forEach((function(t){(0,a.t8)(e,t,"")}))}function r(t){var e;return 422===(null==t||null===(e=t.response)||void 0===e?void 0:e.status)}function n(t){var s=t.response.data.errors;Object.keys(s).forEach((function(t){(0,a.t8)(e,t,s[t][0])}))}return{isValidationError:r,errors:e,reset:s,adaptErr:n}}function _(t,e,s,a,r,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(a,r)}var h=(0,r.Q_)("user",{state:function(){return{user:null}},getters:{isAuthenticated:function(t){return!!t.user}},actions:{logout:function(){return(t=p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("logging out...."),t.next=3,f.post("logout");case 3:window.location.reload();case 4:case"end":return t.stop()}}),t)})),function(){var e=this,s=arguments;return new Promise((function(a,r){var n=t.apply(e,s);function o(t){_(n,a,r,o,i,"next",t)}function i(t){_(n,a,r,o,i,"throw",t)}o(void 0)}))})();var t}}});function b(t,e,s,a,r,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function y(t){return function(){var e=this,s=arguments;return new Promise((function(a,r){var n=t.apply(e,s);function o(t){b(n,a,r,o,i,"next",t)}function i(t){b(n,a,r,o,i,"throw",t)}o(void 0)}))}}function x(){var t=(0,a.iH)(!1),e=h(),s=g({});function r(){return(r=y(p().mark((function t(){var s;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.get("/sanctum/csrf-cookie",{baseURL:window.laravel.appUrl});case 2:return t.prev=2,t.next=5,f.get("/backend/me");case 5:s=t.sent,e.user=s.data.data.user,t.next=11;break;case 9:t.prev=9,t.t0=t.catch(2);case 11:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}return{errors:s.errors,isLoading:t,login:function(a){var r=a.email,n=a.password;return s.reset(),t.value=!0,f.post("login",{email:r,password:n}).then((function(t){e.user=t.data.data.user})).catch((function(t){var e;throw s.isValidationError(t)&&s.adaptErr(t),403===(null==t||null===(e=t.response)||void 0===e?void 0:e.status)&&o.default.set(s.errors,"email",t.response.data.message),t})).finally((function(){t.value=!1}))},getUser:function(){return r.apply(this,arguments)},resetPassword:function(e){return t.value=!0,s.reset(),f.post("reset",e).then((function(t){return t.data})).catch((function(t){throw s.isValidationError(t)&&s.adaptErr(t),t})).finally((function(){return t.value=!1}))},forgetPassword:function(e){return s.reset(),f.post("/forget/password",e).then((function(t){return t.data})).catch((function(t){throw s.isValidationError(t)&&s.adaptErr(t),t})).finally((function(){return t.value=!1}))}}}const w=(0,a.aZ)({name:"LoginPage",setup:function(){var t=x(),e=t.login,s=t.errors,r=t.isLoading,n=(0,a.qj)({email:"",password:""});return{form:n,errors:s,isLoading:r,submit:function(){e(n)}}}}),C=w;var k=s(1900);const j=(0,k.Z)(C,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"px-2 mx-auto max-w-sm shadow-md"},[s("div",{staticClass:"text-center font-bold text-3xl py-4 bg-secondary text-white rounded-t-md"},[t._v("R-Kare")]),t._v(" "),s("main",{staticClass:"px-6 py-7 bg-white rounded-b-md"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[s("p",{staticStyle:{color:"#303233"}},[t._v("Benvenuto, effettua il login.")]),t._v(" "),s("div",{staticClass:"mt-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"input w-full focus:outline-none",attrs:{type:"email",placeholder:"Email",required:""},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),t._v(" "),t.errors.email?s("small",{staticClass:"block text-red-600"},[t._v(t._s(t.errors.email))]):t._e()]),t._v(" "),s("div",{staticClass:"mt-6"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"input w-full focus:outline-none",attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),t._v(" "),t.errors.password?s("small",{staticClass:"block text-red-600"},[t._v(t._s(t.errors.password))]):t._e()]),t._v(" "),s("div",{staticClass:"mt-7 flex items-center"},[s("input",{staticClass:"h-4 w-4",attrs:{id:"remember-me",type:"checkbox"},domProps:{value:!0}}),t._v(" "),s("label",{staticClass:"ml-3 text-sm",staticStyle:{color:"#5C6F82"},attrs:{for:"remember-me"}},[t._v("Recordati di me")])]),t._v(" "),s("div",{staticClass:"mt-6"},[s("button",{staticClass:"w-full py-3 bg-primary text-white font-bold font-sm rounded-md",attrs:{type:"submit",disabled:t.isLoading}},[t._v("Accedi")])])]),t._v(" "),t._m(0)])])}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center mt-5"},[s("a",{staticClass:"text-primary font-semibold",attrs:{href:"/forget/password"}},[t._v("Password dimenticata?")])])}],!1,null,null,null).exports;function P(){var t=(0,a.qj)({documents:{total:0,read:0},infoDocuments:{total:0,read:0},surveys:{total:0,alertable:0,partially:0}}),e=(0,a.qj)([{label:"Total",backgroundColor:"#2c445c",data:[0]},{label:"unread",backgroundColor:"#ff6666",data:[0]},{label:"read",backgroundColor:"#b3d9ff",data:[0]}]),s=(0,a.qj)([{label:"Total",backgroundColor:"#2c445c",data:[0]},{label:"unread",backgroundColor:"#ff6666",data:[0]},{label:"read",backgroundColor:"#b3d9ff",data:[0]}]),r=(0,a.qj)([{label:"Not filled",backgroundColor:"#2c445c",data:[0]},{label:"Alertable",backgroundColor:"#ff6666",data:[0]},{label:"Partially",backgroundColor:"#b3d9ff",data:[0]}]);return{report:t,fetchReport:function(){return f.get("/backend/dashboard").then((function(a){console.log(a.data.data);var n,o,i,l=a.data.data;t.documents.total=l.documents.total,t.documents.read=l.documents.read,t.infoDocuments.total=l.infoDocuments.total,t.infoDocuments.read=l.infoDocuments.read,t.surveys.total=l.surveys.total,t.surveys.alertable=l.surveys.alertable,t.surveys.partially=l.surveys.partially,n=l.documents,o=n.total,i=n.read,e[0].data.unshift(o),e[1].data.unshift(o-i),e[2].data.unshift(i),function(t){var e=t.total,a=t.read;s[0].data.unshift(e),s[1].data.unshift(e-a),s[2].data.unshift(a)}(l.infoDocuments),function(t){var e=t.total,s=t.alertable,a=t.partially;r[0].data.unshift(e),r[1].data.unshift(s),r[2].data.unshift(a)}(l.surveys)}))},documentsStat:e,infoDocStats:s,surveyStat:r}}const S={extends:s(6663).$Q,props:{labels:String,datas:Array},data:function(){return{options:{responsive:!0,maintainAspectRatio:!0}}},mounted:function(){var t,e={labels:Array(null!==(t=this.labels)&&void 0!==t?t:""),datasets:this.datas};this.renderChart(e,this.options)}};const O=(0,k.Z)(S,undefined,undefined,!1,null,null,null).exports,q=(0,a.aZ)({components:{BarChart:O},name:"DashboardPage",setup:function(){var t=(0,a.iH)(!0),e=(0,a.iH)(window.innerWidth),s=P(),r=s.report,n=s.fetchReport,i=s.documentsStat,l=s.infoDocStats,c=s.surveyStat;return n().catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)})).finally((function(){t.value=!1})),console.log(e.value),(0,a.bv)((function(){window.addEventListener("resize",(function(){e.value=window.innerWidth,console.log("on rezise",e.value)}))})),{report:r,documentsStat:i,loading:t,infoDocStats:l,surveyStat:c,windowwidth:e}}});const D=(0,k.Z)(q,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-page-header",{attrs:{title:"Dashboard"}}),t._v(" "),s("div",[s("div",{staticClass:"mt-4 grid grid-cols-3 gap-x-4"},[s("div",{staticClass:"text-center py-10 bg-white rounded-lg"},[!t.loading&&t.windowwidth>1279?s("bar-chart",{attrs:{datas:t.documentsStat}}):t._e(),t._v(" "),s("p",{staticClass:"text-xl font-semibold"},[s("span",{staticClass:"text-red-500 hover:text-red-900 cursor-pointer"},[t._v("\n            "+t._s(t.report.documents.total-t.report.documents.read)+"\n          ")]),t._v("\n          /\n          "+t._s(t.report.documents.total)+"\n        ")]),t._v(" "),s("p",{staticClass:"mt-2 text-xl"},[t._v("Patient documents")])],1),t._v(" "),s("div",{staticClass:"text-center py-10 bg-white rounded-lg"},[!t.loading&&t.windowwidth>1279?s("bar-chart",{attrs:{datas:t.infoDocStats}}):t._e(),t._v(" "),s("p",{staticClass:"text-xl font-semibold"},[s("router-link",{attrs:{to:{path:"/patients",query:{infodocument:"unread"}}}},[s("span",{staticClass:"text-red-500 hover:text-red-900 cursor-pointer"},[t._v("\n              "+t._s(t.report.infoDocuments.total-t.report.infoDocuments.read)+"\n            ")])]),t._v("/\n          "+t._s(t.report.infoDocuments.total)+"\n        ")],1),t._v(" "),s("p",{staticClass:"mt-2 text-xl"},[t._v("Info Documents")])],1),t._v(" "),s("div",{staticClass:"text-center py-10 bg-white rounded-lg"},[!t.loading&&t.windowwidth>1279?s("bar-chart",{attrs:{datas:t.surveyStat}}):t._e(),t._v(" "),s("p",{staticClass:"text-xl font-semibold"},[s("span",{staticClass:"text-red-500 hover:text-red-900 cursor-pointer"},[t._v("\n            "+t._s(t.report.surveys.alertable)+"\n          ")]),t._v("\n          / "+t._s(t.report.surveys.total)+"\n        ")]),t._v(" "),s("p",{staticClass:"mt-2 text-xl"},[t._v("Questionari")])],1)])])],1)}),[],!1,null,null,null).exports;const M=(0,a.aZ)({name:"Logout",setup:function(t,e){var s=e.root,r=h();(0,a.bv)((function(){f.post("logout").finally((function(){r.logout(),La.push({name:"login",query:{redirect:s.$route.query.redirect}})}))}))}});const E=(0,k.Z)(M,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",[t._v("Logging out...")])}),[],!1,null,null,null).exports;const $=(0,a.aZ)({name:"PasswordResetPage",setup:function(t,e){var s=e.root,r=x(),n=r.errors,i=r.isLoading,l=r.resetPassword,c=(0,a.qj)({email:s.$route.query.email,token:s.$route.query.token,password:null,password_confirmation:null});return{form:c,isLoading:i,errors:n,submit:function(){l(c).then((function(t){o.default.toasted.success(t.message),La.push({name:"login"})})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))}}}}),L=$;const z=(0,k.Z)(L,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"px-2 mx-auto max-w-sm shadow-md"},[s("div",{staticClass:"text-center font-bold text-3xl py-4 bg-secondary text-white rounded-t-md"},[t._v("R-Kare")]),t._v(" "),s("main",{staticClass:"px-6 py-7 bg-white rounded-b-md"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[s("p",{staticStyle:{color:"#303233"}},[t._v("Reset password")]),t._v(" "),s("div",{staticClass:"mt-3"},[s("input",{staticClass:"input w-full focus:outline-none",attrs:{type:"email",placeholder:"Email",readonly:""},domProps:{value:t.form.email}}),t._v(" "),t.errors.email?s("small",{staticClass:"block text-red-600"},[t._v(t._s(t.errors.email))]):t._e()]),t._v(" "),s("div",{staticClass:"mt-6"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"input w-full focus:outline-none",attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),t._v(" "),t.errors.password?s("small",{staticClass:"block text-red-600"},[t._v(t._s(t.errors.password))]):t._e()]),t._v(" "),s("div",{staticClass:"mt-6"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password_confirmation,expression:"form.password_confirmation"}],staticClass:"input w-full focus:outline-none",attrs:{type:"password",placeholder:"Password Confirmation",required:""},domProps:{value:t.form.password_confirmation},on:{input:function(e){e.target.composing||t.$set(t.form,"password_confirmation",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"mt-6"},[s("button",{staticClass:"w-full py-3 bg-primary text-white font-bold font-sm rounded-md",attrs:{type:"submit",disabled:t.isLoading}},[t._v("Submit")])])])])])}),[],!1,null,null,null).exports;function A(){var t=g({}),e=(0,a.qj)({doctor:!1,doctors:!1,users:!1,user:!1,userForm:!1}),s=(0,a.iH)([]),r=(0,a.qj)({data:[],meta:null}),n=(0,a.qj)({name:null,email:null,role:null,password:null,password_confirmation:null,email_report:!1}),o=(0,a.qj)({data:[],meta:null});return{errors:t.errors,loading:e,doctors:o,roles:s,user:n,users:r,getRoles:function(){return f.get("/backend/roles").then((function(t){s.value=t.data.data}))},getUsers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=t.search,a=void 0===s?null:s,n=t.page,o=void 0===n?1:n,i=t.roles,l=void 0===i?[]:i;return e.users=!0,f.get("/backend/users",{params:{search:a,page:o,roles:l}}).then((function(t){r.data=t.data.data,r.meta=t.data.meta})).finally((function(){return e.users=!1}))},getDoctors:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=t.search,a=void 0===s?"":s,r=t.page,n=void 0===r?1:r;return e.doctors=!0,f.get("/backend/doctors",{params:{search:a,page:n}}).then((function(t){var e=t.data;o.data=e.data})).finally((function(){return e.doctors=!1}))},saveUser:function(s){return t.reset(),e.userForm=!0,f.post("/backend/users",s).then((function(t){return t.data.data})).catch((function(e){throw t.isValidationError(e)&&t.adaptErr(e),e})).finally((function(){return e.userForm=!1}))},getUser:function(t){return e.userForm=!0,f.get("/backend/users/".concat(t)).then((function(t){var e=t.data;e=e.data,n.name=e.name,n.email=e.email,n.role=e.role,n.email_report=e.email_report})).finally((function(){return e.userForm=!1}))},updateUser:function(s,a){return t.reset(),e.userForm=!0,f.put("/backend/users/".concat(s),a).then((function(t){return t.data.data})).catch((function(e){throw t.isValidationError(e)&&t.adaptErr(e),e})).finally((function(){return e.userForm=!1}))},updateProfile:function(e){return f.post("/update/profile",e).then((function(t){return t.data})).catch((function(e){throw t.isValidationError(e)&&t.adaptErr(e),e}))}}}var I=s(3279),Z=s.n(I);function F(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function B(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?F(Object(s),!0).forEach((function(e){N(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):F(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function N(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function H(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var s=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==s)return;var a,r,n=[],o=!0,i=!1;try{for(s=s.call(t);!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){i=!0,r=t}finally{try{o||null==s.return||s.return()}finally{if(i)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return T(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);"Object"===s&&t.constructor&&(s=t.constructor.name);if("Map"===s||"Set"===s)return Array.from(t);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return T(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}const R=(0,a.aZ)({name:"UserIndexPage",setup:function(){var t=A(),e=t.roles,s=t.loading,r=t.users,n=t.getUsers,i=t.getRoles,l=(0,a.Fl)((function(){return Object.entries(e.value).map((function(t){var e=H(t,2),s=e[0];return{label:e[1],value:s}}))})),c=(0,a.qj)({search:null,roles:[]});function u(){n(arguments[0]).catch((function(t){var e,s;o.default.toasted.error((null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))}return console.log(r),u(),i(),(0,a.YP)(c,Z()((function(){u(B({page:1},c))}),500)),{rawRoles:e,roles:l,loading:s,filters:c,users:r,onPageChange:function(t){u(B({page:t.page},c))}}}}),V=R;const Q=(0,k.Z)(V,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-page-header",{attrs:{title:"User management"}}),t._v(" "),s("div",{staticClass:"flex items-start space-x-7"},[s("div",{staticClass:"w-2/5 space-y-2"},[s("p",{staticClass:"text-sm"},[t._v("Ricerca per nome")]),t._v(" "),s("div",{staticClass:"border border-primary py-1 px-2 bg-white flex items-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.search,expression:"filters.search"}],staticClass:"w-full bg-transparent",attrs:{type:"search"},domProps:{value:t.filters.search},on:{input:function(e){e.target.composing||t.$set(t.filters,"search",e.target.value)}}}),t._v(" "),s("svg",{staticClass:"h-5 w-5 text-primary mx-1",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}})])])]),t._v(" "),s("div",{staticClass:"w-3/5 space-y-2"},[s("p",{staticClass:"text-sm"},[t._v("Filtra per")]),t._v(" "),s("div",{staticClass:"flex items-start space-x-3"},[s("div",{staticClass:"w-1/3"},[s("b-select",{attrs:{placeholder:"Role",options:t.roles,label:"label",reduce:function(t){return t.value},multiple:!0},model:{value:t.filters.roles,callback:function(e){t.$set(t.filters,"roles",e)},expression:"filters.roles"}})],1)])])]),t._v(" "),s("div",{staticClass:"mt-5 flex flex-row-reverse"},[s("router-link",{attrs:{to:"/users/create"}},[s("b-button",{staticClass:"py-2"},[t._v("Crea un nuovo user")])],1)],1),t._v(" "),s("b-block",{staticClass:"mt-5"},[s("table",{staticClass:"table-auto w-full text-sm"},[s("thead",{staticClass:"uppercase text-white bg-ternary"},[s("tr",{staticClass:"font-semibold text-left"},[s("td",{staticClass:"p-2"},[t._v("name")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("email")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("Last updated")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("role")]),t._v(" "),s("td")])]),t._v(" "),s("tbody",[t.loading.users?s("tr",[s("td",{attrs:{colspan:"10"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("Loading users...")])])]):t.users.data.length?t._l(t.users.data,(function(e,a){return s("tr",{key:e.id,class:{"bg-white":0!==Number(a%2),"bg-gray-100":0===Number(a%2)}},[s("td",{staticClass:"px-2 py-3"},[s("div",{staticClass:"text-primary font-semibold"},[t._v(t._s(e.name))])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",[t._v(t._s(e.email))])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",[t._v(t._s(e.updated_at.human))])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",[t._v(t._s(e.role||"---"))])]),t._v(" "),s("td",[s("router-link",{staticClass:"inline-block bg-primary rounded-sm p-1 text-center",attrs:{to:{name:"users.edit",params:{id:e.id}}}},[s("svg",{staticClass:"h-5 w-5 text-white",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"}})])])],1)])})):s("tr",[s("td",{attrs:{colspan:"10"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("\n              No users available\n            ")])])])],2)])]),t._v(" "),s("div",{staticClass:"mt-7"},[s("div",{staticClass:"flex items-center justify-between gap-x-10"},[s("div",[s("b-button",[t._v("Exporta CSV")])],1),t._v(" "),s("div",[t.users.meta?s("b-paginator",{attrs:{data:t.users.meta},on:{change:t.onPageChange}}):t._e()],1)])])],1)}),[],!1,null,null,null).exports;function U(t,e,s,a,r,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function Y(t){return function(){var e=this,s=arguments;return new Promise((function(a,r){var n=t.apply(e,s);function o(t){U(n,a,r,o,i,"next",t)}function i(t){U(n,a,r,o,i,"throw",t)}o(void 0)}))}}function G(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var s=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==s)return;var a,r,n=[],o=!0,i=!1;try{for(s=s.call(t);!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){i=!0,r=t}finally{try{o||null==s.return||s.return()}finally{if(i)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return W(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);"Object"===s&&t.constructor&&(s=t.constructor.name);if("Map"===s||"Set"===s)return Array.from(t);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return W(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}const K=(0,a.aZ)({name:"UserFormPage",setup:function(t,e){var s=e.root,r=A(),n=r.errors,i=r.loading,l=r.roles,c=r.user,u=r.saveUser,d=r.getRoles,v=r.getUser,m=r.updateUser,f=(0,a.Fl)((function(){return"users.create"===s.$route.name})),g=(0,a.Fl)((function(){return Object.entries(l.value).map((function(t){var e=G(t,2),s=e[0];return{label:e[1],value:s}}))}));function _(){return(_=Y(p().mark((function t(){var e,a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!f.value){t.next=7;break}return t.next=4,u(c);case 4:o.default.toasted.success("saved successfully"),t.next=10;break;case 7:return t.next=9,m(s.$route.params.id,c);case 9:o.default.toasted.success("updated successfully");case 10:La.push({name:"users.index"}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),o.default.toasted.error((null===t.t0||void 0===t.t0||null===(e=t.t0.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||t.t0.message);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}return d(),f.value||v(s.$route.params.id).catch((function(t){var e,s,a;404===(null===(e=t.response)||void 0===e?void 0:e.status)&&La.back(),o.default.toasted.error((null==t||null===(s=t.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||t.message)})),{roles:g,errors:n,loading:i,form:c,isCreating:f,save:function(){return _.apply(this,arguments)}}}}),J=K;const X=(0,k.Z)(J,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-page-header",{attrs:{title:"Crea un nuovo user"}}),t._v(" "),s("b-block",{staticClass:"mt-3"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[s("div",[s("label",{staticClass:"font-semibold",attrs:{for:"name"}},[t._v("Name")]),t._v(" "),s("div",{staticClass:"mt-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"\n              w-full\n              border border-primary\n              px-2\n              py-1\n              focus-within:outline-none\n            ",attrs:{id:"name",type:"text"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.name}})],1)]),t._v(" "),s("div",{staticClass:"mt-3"},[s("label",{staticClass:"font-semibold",attrs:{for:"email"}},[t._v("Email")]),t._v(" "),s("div",{staticClass:"mt-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"\n              w-full\n              border border-primary\n              px-2\n              py-1\n              focus-within:outline-none\n            ",attrs:{id:"email",type:"text"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.email}})],1)]),t._v(" "),s("div",{staticClass:"mt-3"},[s("label",{staticClass:"font-semibold",attrs:{for:"role"}},[t._v("Role")]),t._v(" "),s("div",{staticClass:"mt-1"},[s("b-select",{staticClass:"mt-1",attrs:{placeholder:"select a role",options:t.roles,label:"label",reduce:function(t){return t.value}},model:{value:t.form.role,callback:function(e){t.$set(t.form,"role",e)},expression:"form.role"}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.role}})],1)]),t._v(" "),t.isCreating?t._e():[s("div",{staticClass:"mt-3"},[s("label",{staticClass:"font-semibold",attrs:{for:"password"}},[t._v("Password")]),t._v(" "),s("div",{staticClass:"mt-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"\n                w-full\n                border border-primary\n                px-2\n                py-1\n                focus-within:outline-none\n              ",attrs:{id:"password",type:"password"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),t._v(" "),s("small",{staticClass:"block text-gray-500"},[t._v("(Leave empty if you dont want to change)")]),t._v(" "),s("err-msg",{attrs:{message:t.errors.password}})],1)]),t._v(" "),s("div",{staticClass:"mt-3"},[s("label",{staticClass:"font-semibold",attrs:{for:"password_confirmation"}},[t._v("Password Confirmation")]),t._v(" "),s("div",{staticClass:"mt-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password_confirmation,expression:"form.password_confirmation"}],staticClass:"\n                w-full\n                border border-primary\n                px-2\n                py-1\n                focus-within:outline-none\n              ",attrs:{id:"password_confirmation",type:"password"},domProps:{value:t.form.password_confirmation},on:{input:function(e){e.target.composing||t.$set(t.form,"password_confirmation",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"mt-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email_report,expression:"form.email_report"}],staticClass:"border border-primary px-2 py-1 focus-within:outline-none",attrs:{id:"email_report",type:"checkbox"},domProps:{checked:Array.isArray(t.form.email_report)?t._i(t.form.email_report,null)>-1:t.form.email_report},on:{change:function(e){var s=t.form.email_report,a=e.target,r=!!a.checked;if(Array.isArray(s)){var n=t._i(s,null);a.checked?n<0&&t.$set(t.form,"email_report",s.concat([null])):n>-1&&t.$set(t.form,"email_report",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.form,"email_report",r)}}}),t._v(" "),s("label",{staticClass:"font-semibold",attrs:{for:"password_confirmation"}},[t._v("Send daily email report")])])],t._v(" "),s("b-button",{staticClass:"mt-5",attrs:{type:"submit",disabled:t.loading.userForm}},[t._v("Save")])],2)])],1)}),[],!1,null,null,null).exports;function tt(){var t=(0,a.qj)({pathologies:[]});return{filters:t,getFilters:function(){return f.get("/backend/documents-filter").then((function(e){var s=e.data;t.pathologies=s.data.pathologies}))}}}function et(t,e,s,a,r,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function st(t){return function(){var e=this,s=arguments;return new Promise((function(a,r){var n=t.apply(e,s);function o(t){et(n,a,r,o,i,"next",t)}function i(t){et(n,a,r,o,i,"throw",t)}o(void 0)}))}}function at(){var t=(0,a.qj)({data:[],meta:null}),e=(0,a.qj)({data:[],meta:null}),s=(0,a.qj)({title:"",body:"",youtube_url:"",cover_image:null,file:null,images:[],pathologies:[],creator:null,created_at:null,last_updator:null,updated_at:null}),r=(0,a.iH)(!1),n=g({});function o(){return(o=st(p().mark((function t(){var s;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.value=!0,t.next=3,f.get("/backend/documents").finally((function(){r.value=!1}));case 3:s=t.sent,e.data=s.data.data;case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(){return i=st(p().mark((function e(){var s,a,n,o,i,l,c,u,d=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>0&&void 0!==d[0]?d[0]:{},a=s.page,n=void 0===a?1:a,o=s.search,i=void 0===o?"":o,l=s.pathologies,c=void 0===l?[]:l,r.value=!0,e.next=4,f.get("/backend/documents",{params:{page:n,search:i,pathologies:c}}).finally((function(){return r.value=!1}));case 4:u=e.sent,t.meta=u.data.meta,t.data=u.data.data||[],console.log(t.data);case 8:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function l(){return(l=st(p().mark((function t(e){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.reset(),r.value=!0,t.abrupt("return",f.post("/backend/documents",e).then((function(t){return t.data})).catch((function(t){throw n.isValidationError(t)&&n.adaptErr(t),t})).finally((function(){r.value=!1})));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function c(){return(c=st(p().mark((function t(e){var a,n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.value=!0,t.next=3,f.get("/backend/documents/".concat(e)).finally((function(){return r.value=!1}));case 3:a=t.sent,n=a.data.data,s.title=n.title,s.body=n.body,s.youtube_url=n.youtube_url,s.cover_image=n.cover_image,s.file=n.file,s.images=n.images||[],s.pathologies=(n.pathologies||[]).map((function(t){return t.id})),s.creator=n.creator,s.created_at=n.created_at,s.last_updator=n.last_updator,s.updated_at=n.updated_at;case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function u(){return(u=st(p().mark((function t(e){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f.delete("/backend/documents/".concat(e)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return(d=st(p().mark((function t(e){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.reset(),r.value=!0,t.next=4,f.post("/backend/patient/info-document",e).then((function(t){return t.data})).catch((function(t){throw n.isValidationError(t)&&n.adaptErr(t),t})).finally((function(){r.value=!1}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{errors:n.errors,loading:r,document:s,documents:t,infoDocuments:e,getDocuments:function(){return i.apply(this,arguments)},getAllInfoDocuments:function(){return o.apply(this,arguments)},saveDocument:function(t){return l.apply(this,arguments)},getDocument:function(t){return c.apply(this,arguments)},updateDocument:function(t,e){return n.reset(),r.value=!0,f.put("/backend/documents/".concat(t),e).catch((function(t){var e;throw 422===(null==t||null===(e=t.response)||void 0===e?void 0:e.status)&&n.adaptErr(t),t})).finally((function(){r.value=!1}))},deleteDocument:function(t){return u.apply(this,arguments)},assignDocumentToPatient:function(t){return d.apply(this,arguments)}}}var rt=s(1629),nt=s(6095),ot=s.n(nt),it={modules:{toolbar:{container:[[{size:["small","","large","huge"]},"bold","italic","underline"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],[{indent:"-1"},{indent:"+1"}],["link","image"]],handlers:{image:function(){var t=this,e=this.container.querySelector("input.ql-image[type=file]");null==e&&((e=document.createElement("input")).setAttribute("type","file"),e.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),e.classList.add("ql-image"),e.addEventListener("change",(function(){var s=e.files,a=t.quill.getSelection(!0);if(s&&s.length){var r=new FormData;r.append("file",s[0]),t.quill.enable(!1),f.post("uploads",r).then((function(s){t.quill.enable(!0),t.quill.editor.insertEmbed(a.index,"image",s.data),t.quill.setSelection(a.index+1,ot().sources.SILENT),e.value=""})).catch((function(e){console.log("quill image upload failed"),console.log(e),t.quill.enable(!0)}))}else console.log("No files selected")})),this.container.appendChild(e));e.click()}}}},placeholder:"Write here...",theme:"snow"};const lt=(0,a.aZ)({name:"DocumentFormPage",components:{quillEditor:rt.quillEditor},setup:function(t,e){var s=e.root,r=at(),n=r.document,i=r.saveDocument,l=r.getDocument,c=r.updateDocument,u=r.errors,d=r.loading,p=tt(),v=p.getFilters,m=p.filters,f=(0,a.iH)(!1),g=(0,a.Fl)((function(){return"documents.create"===s.$route.name}));return function(){if(v(),n.title="Untitled document",g.value)return;l(s.$route.params.id).catch((function(t){var e,s,a;404===(null===(e=t.response)||void 0===e?void 0:e.status)&&La.back(),o.default.toasted.error((null==t||null===(s=t.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||t.message)}))}(),{isCreating:g,editTitle:f,form:n,editorOptions:it,save:function(){var t={title:n.title,body:n.body,youtube_url:n.youtube_url,cover_image:n.cover_image,file:n.file,images:n.images||[],pathologies:n.pathologies||[]};g.value?i(t).then((function(t){var e=t.data;o.default.toasted.success("saved successfully"),La.push({name:"documents.edit",params:{id:e.id}})})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)})):c(s.$route.params.id,t).then((function(){o.default.toasted.success("updated successfully")})).catch((function(t){var e,s,a;404===(null===(e=t.response)||void 0===e?void 0:e.status)&&La.back(),o.default.toasted.error((null==t||null===(s=t.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||t.message)}))},errors:u,filters:m,loading:d,onTitleInputBlur:function(){n.title=n.title.trim()?n.title:"Untitled document",f.value=!1}}}}),ct=lt;const ut=(0,k.Z)(ct,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-5 grid grid-cols-12 gap-5 items-start"},[s("b-page-header",{attrs:{title:"Crea nuovo documento"}}),t._v(" "),s("div",{staticClass:"col-span-12 md:col-span-9 bg-white p-4 rounded-md"},[s("h2",{staticClass:"text-primary font-bold flex items-center text-xl"},[t.editTitle?s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"bg-transparent border-primary font-bold",class:{"px-2 py-1 border w-full":t.editTitle},domProps:{value:t.form.title},on:{blur:t.onTitleInputBlur,input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}}):t._e(),t._v(" "),s("err-msg",{attrs:{message:t.errors.title}}),t._v(" "),t.editTitle?t._e():[s("span",[t._v(t._s(t.form.title))]),t._v(" "),s("button",{staticClass:"ml-3",on:{click:function(e){t.editTitle=!0}}},[s("svg",{staticClass:"h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"}})])])]],2),t._v(" "),t.form.creator||t.form.created_at?s("div",{staticClass:"mt-2 space-x-4 text-sm"},[s("span",[t._v("Creato da: "+t._s(t.form.creator?t.form.creator.name:""))]),t._v(" "),s("span",[t._v("Creato il: "+t._s(t._f("datetime")(t.form.created_at)))])]):t._e(),t._v(" "),s("div",{staticClass:"mt-4"},[s("quill-editor",{attrs:{options:t.editorOptions},model:{value:t.form.body,callback:function(e){t.$set(t.form,"body",e)},expression:"form.body"}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.body}})],1),t._v(" "),s("b-button",{staticClass:"mt-5 w-full py-2",attrs:{disabled:t.loading},on:{click:t.save}},[t._v("Pubblica il documento")])],1),t._v(" "),s("div",{staticClass:"col-span-12 md:col-span-3 space-y-5"},[s("div",{staticClass:"bg-white p-4 rounded-md"},[s("p",{staticClass:"text-lg font-bold"},[t._v("Patologie")]),t._v(" "),s("p",{staticClass:"mt-2 text-xs"},[t._v("Associa le patologie al tuo documento")]),t._v(" "),s("div",{staticClass:"mt-4"},[s("b-select",{attrs:{placeholder:"Associa",options:t.filters.pathologies,reduce:function(t){return t.id},multiple:!0,label:"title"},model:{value:t.form.pathologies,callback:function(e){t.$set(t.form,"pathologies",e)},expression:"form.pathologies"}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.pathologies}})],1)]),t._v(" "),s("div",{staticClass:"bg-white p-4 rounded-md"},[s("p",{staticClass:"text-lg font-bold"},[t._v("Copertina articolo")]),t._v(" "),s("div",{staticClass:"mt-2 text-xs"},[s("b-file-uploader",{attrs:{accept:"image/*"},model:{value:t.form.cover_image,callback:function(e){t.$set(t.form,"cover_image",e)},expression:"form.cover_image"}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.cover_image}})],1)]),t._v(" "),s("div",{staticClass:"bg-white p-4 rounded-md"},[s("p",{staticClass:"text-lg font-bold"},[t._v("Video")]),t._v(" "),s("p",{staticClass:"mt-2 text-xs"},[t._v("Inserisci il link del video")]),t._v(" "),s("div",{staticClass:"mt-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.youtube_url,expression:"form.youtube_url"}],staticClass:"w-full border border-primary px-2 py-1 focus-within:outline-none",attrs:{type:"url"},domProps:{value:t.form.youtube_url},on:{input:function(e){e.target.composing||t.$set(t.form,"youtube_url",e.target.value)}}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.youtube_url}})],1),t._v(" "),s("div",{staticClass:"mt-4"},[s("p",{staticClass:"mt-2 text-xs"},[t._v("Allega un file pdf")]),t._v(" "),s("div",{staticClass:"mt-2 text-xs"},[s("b-file-uploader",{attrs:{accept:"application/pdf"},model:{value:t.form.file,callback:function(e){t.$set(t.form,"file",e)},expression:"form.file"}}),t._v(" "),s("span",{staticClass:"text-xs text-red-500"},[t._v(t._s(t.errors.file))])],1)])]),t._v(" "),s("div",{staticClass:"bg-white p-4 rounded-md"},[s("p",{staticClass:"text-lg font-bold"},[t._v("Immagini")]),t._v(" "),s("div",{staticClass:"mt-2 text-xs"},[s("b-file-uploader",{attrs:{multiple:!0,accept:"image/*"},model:{value:t.form.images,callback:function(e){t.$set(t.form,"images",e)},expression:"form.images"}}),t._v(" "),s("span",{staticClass:"text-xs text-red-500"},[t._v(t._s(t.errors.images))])],1)]),t._v(" "),t.form.last_updator||t.form.updated_at?s("div",{staticClass:"text-gray-600 text-sm px-4"},[s("p",[t._v("Ultimo aggiornamento: "+t._s(t._f("datetime")(t.form.updated_at)))]),t._v(" "),s("p",[t._v("Aggiornato da: "+t._s(t.form.last_updator?t.form.last_updator.name:""))])]):t._e()])],1)}),[],!1,null,null,null).exports;function dt(t,e,s,a,r,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function pt(t){return function(){var e=this,s=arguments;return new Promise((function(a,r){var n=t.apply(e,s);function o(t){dt(n,a,r,o,i,"next",t)}function i(t){dt(n,a,r,o,i,"throw",t)}o(void 0)}))}}const vt=(0,a.aZ)({name:"PatientIndexPage",setup:function(t,e){var s,r,n=e.root,i=(0,a.iH)(""),l=(0,a.qj)({pathologies:null!==(s=n.$route.query)&&void 0!==s&&s.pathology?[Number(null===(r=n.$route.query)||void 0===r?void 0:r.pathology)]:null}),c=(0,a.qj)({remind:{show:!1,document:null}}),u=at(),d=u.getDocuments,v=u.documents,m=u.loading,f=u.deleteDocument,g=tt(),_=g.getFilters,h=g.filters;function b(){return(b=pt(p().mark((function t(e,s){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c.remind.document=s,c.remind.show=!0;case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(){return(y=pt(p().mark((function t(e,s){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(s);case 2:o.default.toasted.success("Success"),d(),c.remind.document=null,c.remind.show=!1;case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(0,a.bv)((function(){d({pathologies:l.pathologies}),_()}));var x=Z()((function(){d({search:i.value,pathologies:l.pathologies})}),800);return(0,a.YP)(i,x),(0,a.YP)(l,(function(){d({search:i.value,pathologies:l.pathologies})})),{filters:l,search:i,onPageChange:function(t){var e=t.page;d({page:e,search:i.value,pathologies:l.pathologies})},filterData:h,documents:v,loading:m,deleteDoc:function(t,e){return y.apply(this,arguments)},deleteDocumentModal:c,confirmDeleteModal:function(t,e){return b.apply(this,arguments)}}}}),mt=vt;const ft=(0,k.Z)(mt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-page-header",{attrs:{title:"Gestione Documenti"}}),t._v(" "),s("div",{staticClass:"flex items-start space-x-7"},[s("div",{staticClass:"w-2/5 space-y-2"},[s("p",{staticClass:"text-sm"},[t._v("Ricerca per nome")]),t._v(" "),s("div",{staticClass:"border border-primary py-1 px-2 bg-white flex items-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"w-full bg-transparent",attrs:{type:"text"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),s("svg",{staticClass:"h-5 w-5 text-primary mx-1",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}})])])]),t._v(" "),s("div",{staticClass:"w-3/5 space-y-2"},[s("p",{staticClass:"text-sm"},[t._v("Filtra per")]),t._v(" "),s("div",{staticClass:"flex items-start space-x-3"},[s("div",{staticClass:"w-1/3"},[s("b-select",{attrs:{placeholder:"Patologia",label:"title",options:t.filterData.pathologies,reduce:function(t){return t.id},multiple:!0},model:{value:t.filters.pathologies,callback:function(e){t.$set(t.filters,"pathologies",e)},expression:"filters.pathologies"}})],1)])])]),t._v(" "),s("div",{staticClass:"mt-5 flex flex-row-reverse"},[s("router-link",{attrs:{to:"/documents/create"}},[s("b-button",{staticClass:"py-2"},[t._v("Crea un nuovo documento")])],1)],1),t._v(" "),s("b-block",{staticClass:"mt-5"},[s("table",{staticClass:"table-auto w-full text-sm"},[s("thead",{staticClass:"uppercase text-white bg-ternary"},[s("tr",{staticClass:"font-semibold text-left"},[s("td",{staticClass:"p-2"},[t._v("nomee documento")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("creato il")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("creato da")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("patologia associata")]),t._v(" "),s("td")])]),t._v(" "),s("tbody",[t.loading?t.loading?[s("tr",[s("td",{attrs:{colspan:"5"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("\n                Loading documents...\n              ")])])])]:t._e():[t.documents.data.length?t._e():s("tr",[s("td",{attrs:{colspan:"5"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("\n                No documents available\n              ")])])]),t._v(" "),t._l(t.documents.data,(function(e,a){return s("tr",{key:e.id,class:a%2==0?"bg-gray-100":""},[s("td",{staticClass:"px-2 py-3"},[s("div",{staticClass:"text-primary font-semibold"},[t._v("\n                "+t._s(e.title)+"\n              ")])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",{staticClass:"font-medium"},[t._v(t._s(t._f("date")(e.created_at)))])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",{staticClass:"font-medium"},[t._v("\n                "+t._s(e.creator?e.creator.name:"")+"\n              ")])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",{staticClass:"font-medium",staticStyle:{"max-width":"150px"}},[t._v("\n                "+t._s((e.pathologies||[]).map((function(t){return t.title})).join(", "))+"\n              ")])]),t._v(" "),s("td",{staticClass:"px-2 py-3 flex justify-center"},[s("div",{staticClass:"flex items-center space-x-2"},[s("div",{staticClass:"\n                    flex\n                    space-x-3\n                    text-white\n                    bg-primary\n                    rounded\n                    p-1\n                    border-2 border-primary\n                  "},[s("router-link",{staticClass:"text-center",attrs:{to:{name:"documents.edit",params:{id:e.id}}}},[s("svg",{staticClass:"h-5 w-5 text-white",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}}),t._v(" "),s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}})])]),t._v(" "),s("router-link",{staticClass:"text-center",attrs:{to:{name:"documents.edit",params:{id:e.id}}}},[s("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"}})])])],1),t._v(" "),s("button",{staticClass:"\n                    p-1\n                    text-primary\n                    hover:text-white\n                    border-2 border-primary\n                    rounded\n                    hover:bg-primary\n                  ",on:{click:function(s){return t.confirmDeleteModal(s,e)}}},[s("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}})])]),t._v(" "),s("router-link",{attrs:{to:{path:"/patients",query:{document:e.id}}}},[s("span",{staticClass:"cursor-pointer underline text-green-700",class:e.patients_count>0?"hover:text-green-900 hover:font-extrabold":"cursor-not-allowed"},[t._v("("+t._s(e.patients_count)+")")])])],1)])])}))]],2)])]),t._v(" "),s("div",{staticClass:"mt-7"},[s("div",{staticClass:"flex flex-row-reverse"},[t.documents.meta?s("b-paginator",{attrs:{data:t.documents.meta},on:{change:t.onPageChange}}):t._e()],1)]),t._v(" "),t.deleteDocumentModal.remind.show?s("b-modal",{attrs:{title:"conferma eliminare"},on:{close:function(e){t.deleteDocumentModal.remind.show=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[s("div",{staticClass:"flex gap-x-4 flex-row-reverse"},[s("b-button",{on:{click:function(e){return t.deleteDoc(e,t.deleteDocumentModal.remind.document.id)}}},[t._v("Confirm")]),t._v(" "),s("b-button",{attrs:{variant:"primary-alt"},on:{click:function(e){t.deleteDocumentModal.remind.show=!1}}},[t._v("Indietro")])],1)]},proxy:!0}],null,!1,1592304415)},[s("h3",[t._v("\n      Questo documento è\n\n      "),s("span",{staticClass:"font-bold"},[t._v(t._s(t.deleteDocumentModal.remind.document.title))]),t._v("\n      già stato inviato. sei sicuro?\n    ")])]):t._e()],1)}),[],!1,null,null,null).exports;function gt(t,e,s,a,r,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function _t(t){return function(){var e=this,s=arguments;return new Promise((function(a,r){var n=t.apply(e,s);function o(t){gt(n,a,r,o,i,"next",t)}function i(t){gt(n,a,r,o,i,"throw",t)}o(void 0)}))}}function ht(){var t=(0,a.iH)([]),e=(0,a.qj)({title:""}),s=(0,a.iH)(!1),r=g({}),n=(0,a.qj)({loading:!1,documents:[],surveys:[]});function o(){return o=_t(p().mark((function e(){var a,r,n,o,i=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>0&&void 0!==i[0]?i[0]:{},r=a.search,n=void 0===r?null:r,s.value=!0,e.next=4,f.get("/backend/pathologies",{params:{search:n}}).finally((function(){return s.value=!1}));case 4:o=e.sent,t.value=o.data.data;case 6:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function i(){return(i=_t(p().mark((function t(a){var r;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.value=!0,t.next=3,f.get("/backend/pathologies/"+a).finally((function(){return s.value=!1}));case 3:r=t.sent,e.title=r.data.data.title;case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{loading:s,errors:r.errors,pathologies:t,pathology:e,realtionItems:n,getPathologies:function(){return o.apply(this,arguments)},getPathology:function(t){return i.apply(this,arguments)},savePathology:function(t){return r.reset(),s.value=!0,f.post("/backend/pathologies/",t).then((function(t){return t.data})).catch((function(t){throw r.isValidationError(t)&&r.adaptErr(t),t})).finally((function(){return s.value=!1}))},updatePathology:function(t,e){return r.reset(),s.value=!0,f.put("/backend/pathologies/"+t,e).catch((function(t){throw r.isValidationError(t)&&r.adaptErr(t),t})).finally((function(){return s.value=!1}))},deletePathology:function(t){return f.delete("/backend/pathologies/".concat(t))},getRelationItems:function(t){return n.loading=!0,f.get("/backend/pathologies/".concat(t,"/relation-items")).then((function(t){n.documents=t.data.data.documents,n.surveys=t.data.data.surveys})).finally((function(){n.loading=!1}))}}}const bt=(0,a.aZ)({name:"PathologyFormPage",setup:function(t,e){var s=e.root,r=ht(),n=r.loading,i=r.pathology,l=r.getPathology,c=r.errors,u=r.savePathology,d=r.updatePathology,p=(0,a.Fl)((function(){return"pathologies.create"===s.$route.name}));return function(){if(p.value)return;l(s.$route.params.id).catch((function(t){var e,s,a;404===(null===(e=t.response)||void 0===e?void 0:e.status)&&La.back(),o.default.toasted.error((null==t||null===(s=t.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||t.message)}))}(),{isCreating:p,form:i,save:function(){var t={title:i.title};p.value?u(t).then((function(){o.default.toasted.success("saved successfully"),La.push({name:"pathologies.index"})})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)})):d(s.$route.params.id,t).then((function(){o.default.toasted.success("updated successfully"),La.push({name:"pathologies.index"})})).catch((function(t){var e,s,a;404===(null===(e=t.response)||void 0===e?void 0:e.status)&&La.back(),o.default.toasted.error((null==t||null===(s=t.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||t.message)}))},errors:c,loading:n}}}),yt=bt;const xt=(0,k.Z)(yt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-5"},[s("b-page-header",{attrs:{title:"Crea nuovo documento"}}),t._v(" "),s("form",{staticClass:"bg-white p-4 rounded-md w-full",on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[s("div",[s("label",{staticClass:"font-semibold",attrs:{for:"title"}},[t._v("Title")]),t._v(" "),s("div",{staticClass:"mt-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"w-full border border-primary px-2 py-1 focus-within:outline-none",attrs:{id:"title",type:"text"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.title}})],1)]),t._v(" "),s("b-button",{staticClass:"mt-3"},[t._v("Save")])],1)],1)}),[],!1,null,null,null).exports;function wt(t,e,s,a,r,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function Ct(t){return function(){var e=this,s=arguments;return new Promise((function(a,r){var n=t.apply(e,s);function o(t){wt(n,a,r,o,i,"next",t)}function i(t){wt(n,a,r,o,i,"throw",t)}o(void 0)}))}}const kt=(0,a.aZ)({name:"PathologyIndexPage",setup:function(){var t=(0,a.qj)({delete:{show:!1,id:null}}),e=ht(),s=e.pathologies,r=e.loading,n=e.realtionItems,i=e.deletePathology,l=e.getPathologies,c=e.getRelationItems,u=(0,a.iH)("");function d(){return(d=Ct(p().mark((function e(s,a){var r,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.target,n=document.querySelector('[data-row="'.concat(a,'"]')),r.disabled=!0,n.style.opacity=".6",n.style.pointerEvents="none",e.next=7,i(a);case 7:o.default.toasted.success("Success"),l(),r.disabled=!1,t.delete.show=!1,t.delete.id=null;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,a.bv)((function(){l()}));var v=Z()((function(){l({search:u.value})}),500);return(0,a.YP)(u,v),{modals:t,realtionItems:n,pathologies:s,loading:r,search:u,deleteItem:function(t,e){return d.apply(this,arguments)},showDeleteModal:function(e){c(e),t.delete.id=e,t.delete.show=!0}}}}),jt=kt;const Pt=(0,k.Z)(jt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-page-header",{attrs:{title:"Patologie"}}),t._v(" "),s("div",{staticClass:"flex items-start space-x-7"},[s("div",{staticClass:"w-2/5 space-y-2"},[s("p",{staticClass:"text-sm"},[t._v("Ricerca per nome")]),t._v(" "),s("div",{staticClass:"border border-primary py-1 px-2 bg-white flex items-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"w-full bg-transparent",attrs:{type:"text"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),s("svg",{staticClass:"h-5 w-5 text-primary mx-1",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}})])])])]),t._v(" "),s("div",{staticClass:"flex flex-row-reverse"},[s("router-link",{attrs:{to:"/pathologies/create"}},[s("b-button",{staticClass:"py-2"},[t._v("Aggiungi")])],1)],1),t._v(" "),s("b-block",{staticClass:"mt-5"},[s("table",{staticClass:"table-auto w-full text-sm"},[s("thead",{staticClass:"uppercase text-white bg-ternary"},[s("tr",{staticClass:"font-semibold text-left"},[s("td",{staticClass:"p-2"},[t._v("Title")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("\n                        Surveys\n                        "),s("small",[t._v("(count)")])]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("\n                        Documents\n                        "),s("small",[t._v("(count)")])]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("\n                        Patients\n                        "),s("small",[t._v("(count)")])]),t._v(" "),s("td")])]),t._v(" "),s("tbody",[t.loading?s("tr",[s("td",{attrs:{colspan:"5"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("Loading pathologies....")])])]):(t.pathologies||[]).length?t._l(t.pathologies,(function(e,a){return s("tr",{key:e.id,class:a%2==0?"bg-gray-100":"",attrs:{"data-row":e.id}},[s("td",{staticClass:"px-2 py-3"},[s("div",{staticClass:"text-primary font-semibold"},[t._v(t._s(e.title))])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("router-link",{staticClass:"text-primary font-semibold",attrs:{to:{name:"surveys.index",query:{pathology:e.id}}}},[t._v(t._s(e.surveys_count))])],1),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("router-link",{staticClass:"text-primary font-semibold",attrs:{to:{name:"documents.index",query:{pathology:e.id}}}},[t._v(t._s(e.documents_count))])],1),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",{staticClass:"text-primary font-semibold"},[t._v(t._s(0))])]),t._v(" "),s("td",{staticClass:"px-2 py-3 flex justify-center"},[s("div",{staticClass:"flex items-center space-x-2"},[s("div",{staticClass:"flex space-x-3 text-white bg-primary rounded p-1 border-2 border-primary"},[s("router-link",{staticClass:"text-center",attrs:{to:{name:"pathologies.edit",params:{id:e.id}}}},[s("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"}})])])],1),t._v(" "),s("button",{staticClass:"p-1 text-primary hover:text-white border-2 border-primary rounded hover:bg-primary",on:{click:function(s){return t.showDeleteModal(e.id)}}},[s("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}})])])])])])})):s("tr",[s("td",{attrs:{colspan:"5"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("No pathologies available")])])])],2)])]),t._v(" "),t.modals.delete.show?s("b-modal",{attrs:{title:"Confirm Delete"},on:{close:function(e){t.modals.delete.show=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[s("div",{staticClass:"flex gap-x-4 flex-row-reverse"},[s("b-button",{attrs:{disabled:t.realtionItems.loading},on:{click:function(e){return t.deleteItem(e,t.modals.delete.id)}}},[t._v("Confirm")]),t._v(" "),s("b-button",{attrs:{variant:"primary-alt"},on:{click:function(e){t.modals.delete.show=!1}}},[t._v("Indietro")])],1)]},proxy:!0}],null,!1,2943881905)},[s("h3",[t._v("Are you sure? Following documents/surveys refer to this pathology.")]),t._v(" "),s("div",{staticClass:"mt-3"},[s("p",{staticClass:"font-semibold"},[t._v("Documents:")]),t._v(" "),t.realtionItems.loading?s("p",{staticClass:"text-sm text-gray-500"},[t._v("Loading...")]):t.realtionItems.documents.length<1?s("p",{staticClass:"text-sm text-gray-500"},[t._v("No documents")]):s("ol",{staticClass:"list-decimal ml-6"},t._l(t.realtionItems.documents,(function(e,a){return s("li",{key:a},[s("router-link",{staticClass:"text-primary",attrs:{to:{name:"documents.edit",params:{id:a}}}},[t._v(t._s(e))])],1)})),0)]),t._v(" "),s("div",{staticClass:"mt-3"},[s("p",{staticClass:"font-semibold"},[t._v("Surveys:")]),t._v(" "),t.realtionItems.loading?s("p",{staticClass:"text-sm text-gray-500"},[t._v("Loading...")]):t.realtionItems.documents.length<1?s("p",{staticClass:"text-sm text-gray-500"},[t._v("No surveys")]):s("ol",{staticClass:"list-decimal ml-6"},t._l(t.realtionItems.surveys,(function(e,a){return s("li",{key:a},[s("router-link",{staticClass:"text-primary",attrs:{to:{name:"surveys.edit",params:{id:a}}}},[t._v(t._s(e))])],1)})),0)])]):t._e()],1)}),[],!1,null,null,null).exports;function St(t,e,s,a,r,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function Ot(t){return function(){var e=this,s=arguments;return new Promise((function(a,r){var n=t.apply(e,s);function o(t){St(n,a,r,o,i,"next",t)}function i(t){St(n,a,r,o,i,"throw",t)}o(void 0)}))}}function qt(){var t=(0,a.iH)([]),e=(0,a.qj)({title:""}),s=(0,a.iH)(!1),r=g({}),n=(0,a.qj)({loading:!1,value:0});function o(){return o=Ot(p().mark((function e(){var a,r,n,o,i=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>0&&void 0!==i[0]?i[0]:{},r=a.search,n=void 0===r?null:r,s.value=!0,e.next=4,f.get("/backend/message-topics",{params:{search:n}}).finally((function(){return s.value=!1}));case 4:o=e.sent,t.value=o.data.data;case 6:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function i(){return(i=Ot(p().mark((function t(a){var r;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.value=!0,t.next=3,f.get("/backend/message-topics/"+a).finally((function(){return s.value=!1}));case 3:r=t.sent,e.title=r.data.data.title;case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{loading:s,errors:r.errors,topics:t,topic:e,messagesCount:n,getTopics:function(){return o.apply(this,arguments)},getTopic:function(t){return i.apply(this,arguments)},saveTopic:function(t){return r.reset(),s.value=!0,f.post("/backend/message-topics/",t).then((function(t){return t.data})).catch((function(t){throw r.isValidationError(t)&&r.adaptErr(t),t})).finally((function(){return s.value=!1}))},updateTopic:function(t,e){return r.reset(),s.value=!0,f.put("/backend/message-topics/"+t,e).catch((function(t){throw r.isValidationError(t)&&r.adaptErr(t),t})).finally((function(){return s.value=!1}))},deleteTopic:function(t){return f.delete("/backend/message-topics/".concat(t))},getRelatedMessagesCount:function(t){return n.loading=!0,f.get("/backend/message-topics/".concat(t,"/messages-count")).then((function(t){n.value=t.data.data.count})).finally((function(){n.loading=!1}))}}}const Dt=(0,a.aZ)({name:"MessageTopicFormPage",setup:function(t,e){var s=e.root,r=qt(),n=r.loading,i=r.topic,l=r.getTopic,c=r.errors,u=r.saveTopic,d=r.updateTopic,p=(0,a.Fl)((function(){return"messageTopics.create"===s.$route.name}));return function(){if(p.value)return;l(s.$route.params.id).catch((function(t){var e,s,a;404===(null===(e=t.response)||void 0===e?void 0:e.status)&&La.back(),o.default.toasted.error((null==t||null===(s=t.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||t.message)}))}(),{isCreating:p,form:i,save:function(){var t={title:i.title};p.value?u(t).then((function(){o.default.toasted.success("saved successfully"),La.push({name:"messageTopics.index"})})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)})):d(s.$route.params.id,t).then((function(){o.default.toasted.success("updated successfully"),La.push({name:"messageTopics.index"})})).catch((function(t){var e,s,a;404===(null===(e=t.response)||void 0===e?void 0:e.status)&&La.back(),o.default.toasted.error((null==t||null===(s=t.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||t.message)}))},errors:c,loading:n}}}),Mt=Dt;const Et=(0,k.Z)(Mt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-5"},[s("b-page-header",{attrs:{title:"Crea nuovo documento"}}),t._v(" "),s("form",{staticClass:"bg-white p-4 rounded-md w-full",on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[s("div",[s("label",{staticClass:"font-semibold",attrs:{for:"title"}},[t._v("Title")]),t._v(" "),s("div",{staticClass:"mt-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"w-full border border-primary px-2 py-1 focus-within:outline-none",attrs:{id:"title",type:"text"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.title}})],1)]),t._v(" "),s("b-button",{staticClass:"mt-3"},[t._v("Save")])],1)],1)}),[],!1,null,null,null).exports;function $t(t,e,s,a,r,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function Lt(t){return function(){var e=this,s=arguments;return new Promise((function(a,r){var n=t.apply(e,s);function o(t){$t(n,a,r,o,i,"next",t)}function i(t){$t(n,a,r,o,i,"throw",t)}o(void 0)}))}}const zt=(0,a.aZ)({name:"MessageTopicIndexPage",setup:function(){var t=(0,a.qj)({delete:{show:!1,id:null}}),e=qt(),s=e.topics,r=e.loading,n=e.messagesCount,i=e.deleteTopic,l=e.getTopics,c=e.getRelatedMessagesCount,u=(0,a.iH)("");function d(){return(d=Lt(p().mark((function e(s,a){var r,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.target,n=document.querySelector('[data-row="'.concat(a,'"]')),r.disabled=!0,n.style.opacity=".6",n.style.pointerEvents="none",e.next=7,i(a);case 7:o.default.toasted.success("Success"),l(),r.disabled=!1,t.delete.show=!1,t.delete.id=null;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,a.bv)((function(){l()}));var v=Z()((function(){l({search:u.value})}),500);return(0,a.YP)(u,v),{modals:t,messagesCount:n,topics:s,loading:r,search:u,deleteItem:function(t,e){return d.apply(this,arguments)},showDeleteModal:function(e){c(e),t.delete.id=e,t.delete.show=!0}}}});const At=(0,k.Z)(zt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-page-header",{attrs:{title:"Message Topic"}}),t._v(" "),s("div",{staticClass:"flex items-start space-x-7"},[s("div",{staticClass:"w-2/5 space-y-2"},[s("p",{staticClass:"text-sm"},[t._v("Ricerca per nome")]),t._v(" "),s("div",{staticClass:"border border-primary py-1 px-2 bg-white flex items-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"w-full bg-transparent",attrs:{type:"text"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),s("svg",{staticClass:"h-5 w-5 text-primary mx-1",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}})])])])]),t._v(" "),s("div",{staticClass:"flex flex-row-reverse"},[s("router-link",{attrs:{to:"/message-topics/create"}},[s("b-button",{staticClass:"py-2"},[t._v("Aggiungi")])],1)],1),t._v(" "),s("b-block",{staticClass:"mt-5"},[s("table",{staticClass:"table-auto w-full text-sm"},[s("thead",{staticClass:"uppercase text-white bg-ternary"},[s("tr",{staticClass:"font-semibold text-left"},[s("td",{staticClass:"p-2"},[t._v("Title")]),t._v(" "),s("td")])]),t._v(" "),s("tbody",[t.loading?s("tr",[s("td",{attrs:{colspan:"5"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("\n              Loading topics....\n            ")])])]):(t.topics||[]).length?t._l(t.topics,(function(e,a){return s("tr",{key:e.id,class:a%2==0?"bg-gray-100":"",attrs:{"data-row":e.id}},[s("td",{staticClass:"px-2 py-3"},[s("div",{staticClass:"text-primary font-semibold"},[t._v(t._s(e.title))])]),t._v(" "),s("td",{staticClass:"px-2 py-3 flex justify-center"},[s("div",{staticClass:"flex items-center space-x-2"},[s("div",{staticClass:"\n                    flex\n                    space-x-3\n                    text-white\n                    bg-primary\n                    rounded\n                    p-1\n                    border-2 border-primary\n                  "},[s("router-link",{staticClass:"text-center",attrs:{to:{name:"messageTopics.edit",params:{id:e.id}}}},[s("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"}})])])],1),t._v(" "),s("button",{staticClass:"\n                    p-1\n                    text-primary\n                    hover:text-white\n                    border-2 border-primary\n                    rounded\n                    hover:bg-primary\n                  ",on:{click:function(s){return t.showDeleteModal(e.id)}}},[s("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}})])])])])])})):s("tr",[s("td",{attrs:{colspan:"5"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("\n              No topics available\n            ")])])])],2)])]),t._v(" "),t.modals.delete.show?s("b-modal",{attrs:{title:"Confirm Delete"},on:{close:function(e){t.modals.delete.show=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[s("div",{staticClass:"flex gap-x-4 flex-row-reverse"},[s("b-button",{attrs:{disabled:t.messagesCount.loading},on:{click:function(e){return t.deleteItem(e,t.modals.delete.id)}}},[t._v("Confirm")]),t._v(" "),s("b-button",{attrs:{variant:"primary-alt"},on:{click:function(e){t.modals.delete.show=!1}}},[t._v("Indietro")])],1)]},proxy:!0}],null,!1,2902878154)},[s("h3",[t._v("\n      Are you sure? (\n      "+t._s(t.messagesCount.loading?"(loading...)":t.messagesCount.value)+"\n      messages are related to this topic.)\n    ")])]):t._e()],1)}),[],!1,null,null,null).exports;function It(t,e,s,a,r,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function Zt(t){return function(){var e=this,s=arguments;return new Promise((function(a,r){var n=t.apply(e,s);function o(t){It(n,a,r,o,i,"next",t)}function i(t){It(n,a,r,o,i,"throw",t)}o(void 0)}))}}function Ft(){var t=(0,a.qj)({data:[],meta:null}),e=(0,a.iH)(!1),s=g({}),r=(0,a.qj)({questions:[],protocols:[]});function n(){return n=Zt(p().mark((function s(){var a,r,n,o,i,l,c,u,d,v,m,g,_,h,b=arguments;return p().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a=b.length>0&&void 0!==b[0]?b[0]:{},r=a.search,n=void 0===r?null:r,o=a.paginated,i=void 0===o?null:o,l=a.withAnswers,c=void 0!==l&&l,u=a.protocols,d=void 0===u?[]:u,v=a.questions,m=void 0===v?[]:v,g=a.page,_=void 0===g?1:g,e.value=!0,s.next=4,f.get("/backend/questions",{params:{page:_,search:n,paginated:i,withAnswers:c,protocols:d,questions:m}}).finally((function(){return e.value=!1}));case 4:h=s.sent,t.data=h.data.data||[],t.meta=h.data.meta;case 7:case"end":return s.stop()}}),s)}))),n.apply(this,arguments)}return{errors:s.errors,questions:t,loading:e,filters:r,getQuestions:function(){return n.apply(this,arguments)},saveQuestion:function(t){return s.reset(),e.value=!0,f.post("/backend/questions/",t).then((function(t){return t.data})).catch((function(t){throw s.isValidationError(t)&&s.adaptErr(t),t})).finally((function(){return e.value=!1}))},deleteQuestion:function(t){return f.delete("/backend/questions/".concat(t))},getFilters:function(){return f.get("/backend/questions/filters").then((function(t){r.protocols=t.data.data.protocols,r.questions=t.data.data.questions}))}}}const Bt=(0,a.aZ)({name:"QuestionFormPage",setup:function(t,e){e.root;var s=(0,a.qj)({json:""}),r=Ft(),n=r.errors,i=r.loading,l=r.saveQuestion;return{errors:n,form:s,loading:i,save:function(){l(s).then((function(t){var e=t.message;o.default.toasted.success(e),La.replace("/questions")}))}}}}),Nt=Bt;const Ht=(0,k.Z)(Nt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-5"},[s("b-page-header",{attrs:{title:"Crea nuovo documento"}}),t._v(" "),s("form",{staticClass:"bg-white p-4 rounded-md w-full",on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[s("div",[s("label",{staticClass:"font-semibold",attrs:{for:"json"}},[t._v("JSON")]),t._v(" "),s("div",{staticClass:"mt-1"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.json,expression:"form.json"}],staticClass:"w-full border border-primary px-2 py-1 focus-within:outline-none",attrs:{id:"json",rows:"10",placeholder:"paste json here..."},domProps:{value:t.form.json},on:{input:function(e){e.target.composing||t.$set(t.form,"json",e.target.value)}}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.json}})],1)]),t._v(" "),s("b-button",{staticClass:"mt-3",attrs:{disabled:t.loading}},[t._v("Save")])],1)],1)}),[],!1,null,null,null).exports;function Tt(t,e,s,a,r,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function Rt(t){return function(){var e=this,s=arguments;return new Promise((function(a,r){var n=t.apply(e,s);function o(t){Tt(n,a,r,o,i,"next",t)}function i(t){Tt(n,a,r,o,i,"throw",t)}o(void 0)}))}}function Vt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function Qt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(s),!0).forEach((function(e){Ut(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Vt(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function Ut(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Yt=(0,a.aZ)({name:"QuestionIndexPage",setup:function(){var t=(0,a.qj)({answers:{show:!1,data:[]}}),e=(0,a.qj)({search:"",questions:"",protocols:""}),s=Ft(),r=s.getQuestions,n=s.questions,i=s.loading,l=s.deleteQuestion,c=s.getFilters,u=s.filters;c(),r();var d=Z()((function(){r(Qt(Qt({},e),{},{withAnswers:!0}))}),500);function v(){return(v=Rt(p().mark((function t(e,s){var a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.target.closest("tr"),confirm("Are you sure ?")){t.next=3;break}return t.abrupt("return");case 3:return a.style.opacity=".6",a.style.pointerEvents="none",t.next=7,l(s);case 7:o.default.toasted.success("Success"),r();case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,a.YP)(e,d),{filters:u,modals:t,filterParameters:e,questions:n,loading:i,deleteItem:function(t,e){return v.apply(this,arguments)},onPageChange:function(t){var s=t.page;r(Qt(Qt({},e),{},{page:s}))}}}}),Gt=Yt;const Wt=(0,k.Z)(Gt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-page-header",{attrs:{title:"Gestione domande dei questionari"}}),t._v(" "),s("div",{staticClass:"flex items-start space-x-7"},[s("div",{staticClass:"w-2/5 space-y-2"},[s("p",{staticClass:"text-sm"},[t._v("Ricerca per nome")]),t._v(" "),s("div",{staticClass:"border border-primary py-1 px-2 bg-white flex items-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filterParameters.search,expression:"filterParameters.search"}],staticClass:"w-full bg-transparent",attrs:{type:"text"},domProps:{value:t.filterParameters.search},on:{input:function(e){e.target.composing||t.$set(t.filterParameters,"search",e.target.value)}}}),t._v(" "),s("svg",{staticClass:"h-5 w-5 text-primary mx-1",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}})])])]),t._v(" "),s("div",{staticClass:"w-3/5 space-y-2"},[s("p",{staticClass:"text-sm"},[t._v("Filtra per")]),t._v(" "),s("div",{staticClass:"flex items-start space-x-3"},[s("div",{staticClass:"w-1/3"},[s("b-select",{attrs:{placeholder:"Question",options:t.filters.questions,searchable:!0,multiple:!0},model:{value:t.filterParameters.questions,callback:function(e){t.$set(t.filterParameters,"questions",e)},expression:"filterParameters.questions"}})],1),t._v(" "),s("div",{staticClass:"w-1/3"},[s("b-select",{attrs:{placeholder:"Protocol",options:t.filters.protocols,multiple:!0},model:{value:t.filterParameters.protocols,callback:function(e){t.$set(t.filterParameters,"protocols",e)},expression:"filterParameters.protocols"}})],1)])])]),t._v(" "),s("div",{staticClass:"mt-5 flex flex-row-reverse"},[s("router-link",{attrs:{to:"/questions/create"}},[s("b-button",{staticClass:"py-2"},[t._v("Crea nuova domanda")])],1)],1),t._v(" "),s("b-block",{staticClass:"mt-5"},[s("table",{staticClass:"table-auto w-full text-sm"},[s("thead",{staticClass:"uppercase text-white bg-ternary"},[s("tr",{staticClass:"font-semibold text-left"},[s("td",{staticClass:"p-2"},[t._v("key")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("title")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("description")]),t._v(" "),s("td")])]),t._v(" "),s("tbody",[t.loading?t.loading?[s("tr",[s("td",{attrs:{colspan:"4"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("Loading questions....")])])])]:t._e():[t.questions.data.length?t._e():s("tr",[s("td",{attrs:{colspan:"4"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("No questions available")])])]),t._v(" "),t._l(t.questions.data,(function(e,a){return s("tr",{key:e.id,class:a%2==0?"bg-gray-100":""},[s("td",{staticClass:"px-2 py-3"},[s("div",{staticClass:"text-primary font-semibold"},[t._v(t._s(e.key))])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",{staticClass:"text-primary font-semibold"},[t._v(t._s(e.title))])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",[t._v(t._s(e.description))])]),t._v(" "),s("td",{staticClass:"px-2 py-3 flex justify-center"},[s("div",{staticClass:"flex items-center space-x-2"},[s("button",{staticClass:"whitespace-nowrap px-5 font-semibold text-white bg-primary rounded p-1 border-2 border-primary",on:{click:function(s){t.modals.answers.data=e.answers,t.modals.answers.show=!0}}},[t._v("See Answers")]),t._v(" "),s("button",{staticClass:"p-1 text-primary hover:text-white border-2 border-primary rounded hover:bg-primary",on:{click:function(s){return t.deleteItem(s,e.id)}}},[s("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}})])])])])])}))]],2)])]),t._v(" "),s("div",{staticClass:"mt-7"},[s("div",{staticClass:"flex flex-row-reverse"},[t.questions.meta?s("b-paginator",{attrs:{data:t.questions.meta},on:{change:t.onPageChange}}):t._e()],1)]),t._v(" "),t.modals.answers.show?s("b-modal",{attrs:{size:"3xl",title:"Answers"},on:{close:function(e){t.modals.answers.show=!1}}},[t.modals.answers.data?s("ul",{staticClass:"list-disc ml-5"},t._l(t.modals.answers.data,(function(e){return s("li",{key:e.id},[t._v(t._s(e.body))])})),0):s("p",{staticClass:"text-sm text-center text-gray-600"},[t._v("No answers available for the selected question")])]):t._e()],1)}),[],!1,null,null,null).exports;function Kt(t,e,s,a,r,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function Jt(t){return function(){var e=this,s=arguments;return new Promise((function(a,r){var n=t.apply(e,s);function o(t){Kt(n,a,r,o,i,"next",t)}function i(t){Kt(n,a,r,o,i,"throw",t)}o(void 0)}))}}function Xt(){var t=(0,a.qj)({data:[],meta:null}),e=(0,a.qj)({title:"Untitled survey",description:"",pathologies:[],questions:[],warning_answers:[]}),s=(0,a.iH)(!1),r=g({});function n(){return n=Jt(p().mark((function e(){var a,r,n,o,i,l,c,u,d=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>0&&void 0!==d[0]?d[0]:{},r=a.page,n=void 0===r?1:r,o=a.search,i=void 0===o?"":o,l=a.pathologies,c=void 0===l?[]:l,s.value=!0,e.next=4,f.get("/backend/surveys",{params:{page:n,search:i,pathologies:c}}).finally((function(){return s.value=!1}));case 4:u=e.sent,t.meta=u.data.meta,t.data=u.data.data||[];case 7:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}function o(){return(o=Jt(p().mark((function t(a){var r;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.value=!0,t.next=3,f.get("/backend/surveys/"+a).finally((function(){return s.value=!1}));case 3:r=t.sent,e.title=r.data.data.title,e.description=r.data.data.description,e.pathologies=r.data.data.pathologies.map((function(t){return t.id})),e.questions=r.data.data.questions.map((function(t){return t.id})),e.warning_answers=r.data.data.warning_answers.map((function(t){return t.id}));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{errors:r.errors,surveys:t,survey:e,loading:s,getSurveys:function(){return n.apply(this,arguments)},getSurvey:function(t){return o.apply(this,arguments)},saveSurvey:function(t){return r.reset(),s.value=!0,f.post("/backend/surveys/",t).then((function(t){return t.data})).catch((function(t){throw r.isValidationError(t)&&r.adaptErr(t),t})).finally((function(){return s.value=!1}))},updateSurvey:function(t,e){return r.reset(),s.value=!0,f.put("/backend/surveys/"+t,e).catch((function(t){throw r.isValidationError(t)&&r.adaptErr(t),t})).finally((function(){return s.value=!1}))},deleteSurvey:function(t){return f.delete("/backend/surveys/".concat(t))}}}function te(t,e,s,a,r,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function ee(t){return function(){var e=this,s=arguments;return new Promise((function(a,r){var n=t.apply(e,s);function o(t){te(n,a,r,o,i,"next",t)}function i(t){te(n,a,r,o,i,"throw",t)}o(void 0)}))}}const se=(0,a.aZ)({name:"SurveyIndexPage",setup:function(t,e){var s,r,n=e.root,i=(0,a.qj)({scheduler:!1}),l=(0,a.iH)(""),c=(0,a.qj)({pathologies:null!==(s=n.$route.query)&&void 0!==s&&s.pathology?[Number(null===(r=n.$route.query)||void 0===r?void 0:r.pathology)]:null}),u=(0,a.qj)({remind:{show:!1,survey:null}}),d=Xt(),v=d.getSurveys,m=d.surveys,f=d.loading,g=d.deleteSurvey,_=tt(),h=_.getFilters,b=_.filters;function y(){return(y=ee(p().mark((function t(e,s){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u.remind.survey=s,u.remind.show=!0;case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}console.log("surveys ",m),(0,a.bv)((function(){h(),v({pathologies:c.pathologies})}));var x=Z()((function(){v({search:l.value,pathologies:c.pathologies})}),800),w=Z()((function(){v({search:l.value,pathologies:c.pathologies})}));function C(){return(C=ee(p().mark((function t(e,s){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(s);case 2:o.default.toasted.success("Success"),v(),u.remind.survey=null,u.remind.show=!1;case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,a.YP)(l,x),(0,a.YP)(c,w),{modals:i,filters:c,search:l,filterData:b,surveys:m,loading:f,onPageChange:function(t){var e=t.page;getDocuments({page:e,search:l.value,pathologies:c.pathologies})},deleteItem:function(t,e){return C.apply(this,arguments)},deleteSurveyModal:u,confirmDeleteModal:function(t,e){return y.apply(this,arguments)},redirectToPatient:function(t){alert(t)}}}}),ae=se;const re=(0,k.Z)(ae,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-page-header",{attrs:{title:"Questionari da protocollo"}}),t._v(" "),s("div",{staticClass:"flex items-start space-x-7"},[s("div",{staticClass:"w-2/5 space-y-2"},[s("p",{staticClass:"text-sm"},[t._v("Ricerca per nome")]),t._v(" "),s("div",{staticClass:"border border-primary py-1 px-2 bg-white flex items-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"w-full bg-transparent",attrs:{type:"text"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),s("svg",{staticClass:"h-5 w-5 text-primary mx-1",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}})])])]),t._v(" "),s("div",{staticClass:"w-3/5 space-y-2"},[s("p",{staticClass:"text-sm"},[t._v("Filtra per")]),t._v(" "),s("div",{staticClass:"flex items-start space-x-3"},[s("div",{staticClass:"w-1/3"},[s("b-select",{attrs:{placeholder:"Patologia",label:"title",options:t.filterData.pathologies,reduce:function(t){return t.id},multiple:!0},model:{value:t.filters.pathologies,callback:function(e){t.$set(t.filters,"pathologies",e)},expression:"filters.pathologies"}})],1)])])]),t._v(" "),s("div",{staticClass:"mt-5 flex flex-row-reverse"},[s("router-link",{attrs:{to:"/surveys/create"}},[s("b-button",{staticClass:"py-2"},[t._v("Crea un nuovo questionario")])],1)],1),t._v(" "),s("b-block",{staticClass:"mt-5"},[s("table",{staticClass:"table-auto w-full text-sm"},[s("thead",{staticClass:"uppercase text-white bg-ternary"},[s("tr",{staticClass:"font-semibold text-left"},[s("td",{staticClass:"p-2"},[t._v("title")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("pathologies")]),t._v(" "),s("td")])]),t._v(" "),s("tbody",[t.loading?t.loading?[s("tr",[s("td",{attrs:{colspan:"5"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("\n                Loading surveys....\n              ")])])])]:t._e():[t.surveys.data.length?t._e():s("tr",[s("td",{attrs:{colspan:"3"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("\n                No surveys available\n              ")])])]),t._v(" "),t._l(t.surveys.data,(function(e,a){return s("tr",{key:e.id,class:a%2==0?"bg-gray-100":""},[s("td",{staticClass:"px-2 py-3"},[s("div",{staticClass:"text-primary font-semibold"},[t._v(t._s(e.title))])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",{staticClass:"font-medium",staticStyle:{"max-width":"150px"}},[t._v("\n                "+t._s((e.pathologies||[]).map((function(t){return t.title})).join(", "))+"\n              ")])]),t._v(" "),s("td",{staticClass:"px-2 py-3 flex justify-center"},[s("div",{staticClass:"flex items-center space-x-2"},[s("button",{staticClass:"\n                    px-5\n                    font-semibold\n                    text-white\n                    bg-primary\n                    rounded\n                    p-1\n                    border-2 border-primary\n                  ",on:{click:function(e){t.modals.scheduler=!0}}},[t._v("\n                  Schedule\n                ")]),t._v(" "),s(e.can_be_edited?"router-link":"span",{tag:"router-link",staticClass:"p-1 border-2",class:e.can_be_edited?"border-primary rounded bg-primary":"border-gray-300 rounded bg-gray-400",attrs:{to:{name:"surveys.edit",params:{id:e.id}}}},[s("svg",{staticClass:"h-5 w-5 text-white",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"}})])]),t._v(" "),s("button",{staticClass:"\n                    p-1\n                    text-primary\n                    hover:text-white\n                    border-2 border-primary\n                    rounded\n                    hover:bg-primary\n                  ",on:{click:function(s){return t.confirmDeleteModal(s,e)}}},[s("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}})])]),t._v(" "),s(e.patients_count>0?"router-link":"span",{tag:"router-link",attrs:{to:{path:"/patients",query:{survey:e.id}}}},[s("span",{staticClass:"cursor-pointer underline text-green-700",class:e.patients_count>0?"hover:text-green-900 hover:font-extrabold":"cursor-not-allowed"},[t._v("("+t._s(e.patients_count)+")")])])],1)])])}))]],2)])]),t._v(" "),s("div",{staticClass:"mt-7"},[s("div",{staticClass:"flex flex-row-reverse"},[t.surveys.meta?s("b-paginator",{attrs:{data:t.surveys.meta},on:{change:t.onPageChange}}):t._e()],1)]),t._v(" "),t.modals.scheduler?s("b-modal",{attrs:{size:"3xl",title:"schedula il questionario"},on:{close:function(e){t.modals.scheduler=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[s("div",{staticClass:"flex gap-x-4 flex-row-reverse"},[s("b-button",[t._v("Schedula")]),t._v(" "),s("b-button",{attrs:{variant:"primary-alt"},on:{click:function(e){t.modals.scheduler=!1}}},[t._v("Indietro")])],1)]},proxy:!0}],null,!1,2509407410)},[s("p",{staticClass:"font-bold text-gray-600"},[t._v("Nome Questionario")]),t._v(" "),s("p",{staticClass:"mt-1 text-lg"},[t._v("Questionario post visita di centratura")]),t._v(" "),s("div",{staticClass:"mt-8"},[s("label",{staticClass:"block font-semibold text-gray-600"},[t._v("Quando vuoi schedularlo?")]),t._v(" "),s("div",{staticClass:"mt-1 flex justify-between"},[s("label",{staticClass:"flex items-center space-x-3"},[s("input",{staticClass:"h-5 w-5",attrs:{name:"when",type:"radio"}}),t._v(" "),s("span",[t._v("Prima")])]),t._v(" "),s("label",{staticClass:"flex items-center space-x-3"},[s("input",{staticClass:"h-5 w-5",attrs:{name:"when",type:"radio"}}),t._v(" "),s("span",[t._v("Dopo")])]),t._v(" "),s("select",{staticClass:"p-1 border border-primary"},[s("option",{attrs:{value:"1"}},[t._v("First Appointment")]),t._v(" "),s("option",{attrs:{value:"2"}},[t._v("Second Appointment")]),t._v(" "),s("option",{attrs:{value:"3"}},[t._v("Third Appointment")])]),t._v(" "),s("label",{staticClass:"flex items-center space-x-3"},[s("input",{staticClass:"h-5 w-14 border border-primary py-3",attrs:{type:"number",min:"0"}}),t._v(" "),s("span",[t._v("Numero giorni")])])])]),t._v(" "),s("div",{staticClass:"mt-8"},[s("label",{staticClass:"block font-semibold text-gray-600"},[t._v("Scegli quando ripetere")]),t._v(" "),s("div",{staticClass:"mt-1 flex justify-between"},[s("label",{staticClass:"flex items-center space-x-3"},[s("span",[t._v("Ripeti")]),t._v(" "),s("select",{staticClass:"p-1 border border-primary"},[s("option",{attrs:{value:"1"}},[t._v("First Appointment")]),t._v(" "),s("option",{attrs:{value:"2"}},[t._v("Second Appointment")]),t._v(" "),s("option",{attrs:{value:"3"}},[t._v("Third Appointment")])])]),t._v(" "),s("label",{staticClass:"flex items-center space-x-3"},[s("span",[t._v("ogni")]),t._v(" "),s("input",{staticClass:"h-5 w-14 border border-primary py-3",attrs:{type:"number",min:"0"}}),t._v(" "),s("span",[t._v("giorni, per un massimo di")]),t._v(" "),s("input",{staticClass:"h-5 w-14 border border-primary py-3",attrs:{type:"number",min:"0"}}),t._v(" "),s("span",[t._v("volte")])])])])]):t._e(),t._v(" "),t.deleteSurveyModal.remind.show?s("b-modal",{attrs:{title:"conferma eliminare"},on:{close:function(e){t.deleteSurveyModal.remind.show=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[s("div",{staticClass:"flex gap-x-4 flex-row-reverse"},[s("b-button",{on:{click:function(e){return t.deleteItem(e,t.deleteSurveyModal.remind.survey.id)}}},[t._v("Confirm")]),t._v(" "),s("b-button",{attrs:{variant:"primary-alt"},on:{click:function(e){t.deleteSurveyModal.remind.show=!1}}},[t._v("Indietro")])],1)]},proxy:!0}],null,!1,3400194451)},[s("h3",[t._v("\n      Stai per eliminare questo sondaggio\n\n      "),s("span",{staticClass:"font-bold"},[t._v(t._s(t.deleteSurveyModal.remind.survey.title))]),t._v(".\n      "),s("p",[t._v("Conferma di voler procedere.")])])]):t._e()],1)}),[],!1,null,"5b6fa772",null).exports;function ne(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function oe(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function ie(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var s=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==s)return;var a,r,n=[],o=!0,i=!1;try{for(s=s.call(t);!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){i=!0,r=t}finally{try{o||null==s.return||s.return()}finally{if(i)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return le(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);"Object"===s&&t.constructor&&(s=t.constructor.name);if("Map"===s||"Set"===s)return Array.from(t);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return le(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}var ce={modules:{toolbar:[["bold","italic","underline"],[{align:[]},{indent:"-1"},{indent:"+1"}],["link"]]},placeholder:"Write here...",theme:"snow"};const ue=(0,a.aZ)({name:"SurveyFormPage",components:{quillEditor:rt.quillEditor},setup:function(t,e){var s=e.root,r=(0,a.iH)(!1),n=(0,a.iH)("all"),i=Xt(),l=i.survey,c=i.saveSurvey,u=i.errors,d=i.getSurvey,p=i.updateSurvey,v=i.loading,m=(0,a.iH)(1),f=Ft(),g=f.loading,_=f.getQuestions,h=f.questions,b=f.filters,y=f.getFilters,x=tt(),w=x.filters,C=x.getFilters,k=(0,a.qj)({search:"",questions:null,protocols:null}),j=(0,a.Fl)((function(){return"surveys.create"===s.$route.name})),P=(0,a.Fl)((function(){return h.data.filter((function(t){return l.questions.includes(t.id)}))})),S=(0,a.Fl)((function(){return Object.entries(u||{}).map((function(t){var e=ie(t,2);e[0];return e[1]}))||[]}));!function(){if(y(),_({paginated:!1,withAnswers:!0}),C(),j.value)return;d(s.$route.params.id).catch((function(t){var e,s,a;404===(null===(e=t.response)||void 0===e?void 0:e.status)&&La.back(),o.default.toasted.error((null==t||null===(s=t.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||t.message)}))}();var O=Z()((function(){_(function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?ne(Object(s),!0).forEach((function(e){oe(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ne(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},k))}),500);return(0,a.YP)(k,O),{loading:v,questionListType:n,listableQuestions:(0,a.Fl)((function(){return"all"===n.value?h.data:h.data.filter((function(t){return l.questions.includes(t.id)}))})),questionsFilter:b,isCreating:j,flatErrors:S,formQuestionFilters:k,filters:w,loadingQuestions:g,questions:h,fullSelectedQuestions:P,activeStep:m,editorOptions:ce,form:l,editTitle:r,save:function(){j.value?c(l).then((function(t){o.default.toasted.success("saved successfully"),La.push({name:"surveys.index"})})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)})):p(s.$route.params.id,l).then((function(t){o.default.toasted.success("updated successfully"),La.push({name:"surveys.index"})})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))},onTitleInputBlur:function(){l.title=l.title.trim()?l.title:"Untitled survey",r.value=!1},selectAllPathologies:function(){l.pathologies=w.pathologies.map((function(t){return t.id}))}}}}),de=ue;const pe=(0,k.Z)(de,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-page-header",{attrs:{title:"Crea un nuovo questionario"}}),t._v(" "),s("div",{staticClass:"grid grid-flow-col bg-gray-200 uppercase text-gray-500 text-sm rounded-md multistep"},[s("div",{staticClass:"flex items-center space-x-3 px-4 border-r border-gray-300 py-5",class:{active:1==t.activeStep}},[s("span",{staticClass:"border border-gray-500 rounded-full w-8 h-8 flex justify-center items-center"},[t._v("1")]),t._v(" "),s("p",[t._v("scegli le domande")])]),t._v(" "),s("div",{staticClass:"flex items-center space-x-3 px-4 border-r border-gray-300 py-5",class:{active:2==t.activeStep}},[s("span",{staticClass:"border border-gray-500 rounded-full w-8 h-8 flex justify-center items-center"},[t._v("2")]),t._v(" "),s("p",[t._v("imposta gli alert")])]),t._v(" "),s("div",{staticClass:"flex items-center space-x-3 px-4 py-5",class:{active:3==t.activeStep}},[s("span",{staticClass:"border border-gray-500 rounded-full w-8 h-8 flex justify-center items-center"},[t._v("3")]),t._v(" "),s("p",[t._v("salva il questionario")])])]),t._v(" "),t.flatErrors.length?s("b-block",{staticClass:"mt-2 py-5",attrs:{title:"Errors:"}},[s("ul",{staticClass:"list-disc text-red-500"},t._l(t.flatErrors,(function(e,a){return s("li",{key:a,staticClass:"ml-8"},[t._v(t._s(e))])})),0)]):t._e(),t._v(" "),s("div",{staticClass:"mt-5"},[1==t.activeStep?s("div",[s("div",{staticClass:"mt-5 flex items-center space-x-4"},[s("label",{attrs:{for:"search"}},[t._v("Cerca tra le domande:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formQuestionFilters.search,expression:"formQuestionFilters.search"}],staticClass:"w-80 border border-primary px-2 py-1 focus-within:outline-none",attrs:{type:"search"},domProps:{value:t.formQuestionFilters.search},on:{input:function(e){e.target.composing||t.$set(t.formQuestionFilters,"search",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"mt-5 flex items-center gap-x-10"},[s("span",[t._v("Filtra Per")]),t._v(" "),s("div",{staticClass:"flex items-center space-x-4"},[s("b-select",{staticClass:"inline-block w-80",attrs:{placeholder:"Question",options:t.questionsFilter.questions,multiple:!0},model:{value:t.formQuestionFilters.questions,callback:function(e){t.$set(t.formQuestionFilters,"questions",e)},expression:"formQuestionFilters.questions"}})],1),t._v(" "),s("div",{staticClass:"flex items-center space-x-4"},[s("b-select",{staticClass:"inline-block w-80",attrs:{placeholder:"Protocol",options:t.questionsFilter.protocols,multiple:!0},model:{value:t.formQuestionFilters.protocols,callback:function(e){t.$set(t.formQuestionFilters,"protocols",e)},expression:"formQuestionFilters.protocols"}})],1)]),t._v(" "),s("div",{staticClass:"mt-8 flex items-center space-x-10 text-sm font-semibold"},[s("label",{staticClass:"flex items-center space-x-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.questionListType,expression:"questionListType"}],staticClass:"h-5 w-5",attrs:{name:"question-list",value:"all",type:"radio"},domProps:{checked:t._q(t.questionListType,"all")},on:{change:function(e){t.questionListType="all"}}}),t._v(" "),s("span",[t._v("Scorri tra domande")])]),t._v(" "),s("label",{staticClass:"flex items-center space-x-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.questionListType,expression:"questionListType"}],staticClass:"h-5 w-5",attrs:{name:"question-list",value:"selected",type:"radio"},domProps:{checked:t._q(t.questionListType,"selected")},on:{change:function(e){t.questionListType="selected"}}}),t._v(" "),s("span",[t._v("Domande selezionate")])])]),t._v(" "),s("b-block",{staticClass:"mt-4 py-5"},[t.loadingQuestions?s("p",{staticClass:"text-gray-500 text-center text-sm"},[t._v("Loading questions....")]):t.listableQuestions.length?s("ul",{staticStyle:{"max-height":"500px"}},t._l(t.listableQuestions,(function(e){return s("li",{key:e.id,staticClass:"border-t py-5 flex space-x-5 items-start"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.questions,expression:"form.questions"}],attrs:{id:"question-"+e.id,type:"checkbox"},domProps:{value:e.id,checked:Array.isArray(t.form.questions)?t._i(t.form.questions,e.id)>-1:t.form.questions},on:{change:function(s){var a=t.form.questions,r=s.target,n=!!r.checked;if(Array.isArray(a)){var o=e.id,i=t._i(a,o);r.checked?i<0&&t.$set(t.form,"questions",a.concat([o])):i>-1&&t.$set(t.form,"questions",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.form,"questions",n)}}})]),t._v(" "),s("label",{attrs:{for:"question-"+e.id}},[s("p",{staticClass:"font-semibold text-primary"},[t._v(t._s(e.title))]),t._v(" "),s("p",{staticClass:"text-sm mt-2"},[t._v(t._s(e.description))])])])})),0):s("p",{staticClass:"text-gray-500 text-center text-sm"},["all"===t.questionListType?[t._v("No questions available")]:[t._v("No questions selected")]],2)]),t._v(" "),s("div",{staticClass:"mt-4 text-right"},[s("b-button",{attrs:{disabled:t.form.questions.length<1},on:{click:function(e){t.activeStep++}}},[t._v("Conferma")])],1)],1):t._e(),t._v(" "),2==t.activeStep?s("div",[s("b-block",[s("ul",{staticClass:"space-y-3",staticStyle:{"max-height":"600px"}},t._l(t.fullSelectedQuestions,(function(e,a){return s("li",{key:e.id,staticClass:"border-t py-5 flex space-x-5 items-start"},[s("p",{staticClass:"text-primary"},[t._v(t._s(a+1))]),t._v(" "),s("div",[s("p",{staticClass:"text-primary"},[t._v(t._s(e.title))]),t._v(" "),s("p",{staticClass:"mt-1 text-sm"},[t._v(t._s(e.description))]),t._v(" "),s("ul",{staticClass:"mt-2 text-sm space-y-3"},t._l(e.answers,(function(e){return s("li",{staticClass:"flex items-center space-x-6"},[s("div",{staticClass:"border border-primary rounded-sm p-2 w-80"},[t._v(t._s(e.body))]),t._v(" "),s("div",{staticClass:"flex items-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.warning_answers,expression:"form.warning_answers"}],staticClass:"h-4 w-4",attrs:{type:"checkbox"},domProps:{value:e.id,checked:Array.isArray(t.form.warning_answers)?t._i(t.form.warning_answers,e.id)>-1:t.form.warning_answers},on:{change:function(s){var a=t.form.warning_answers,r=s.target,n=!!r.checked;if(Array.isArray(a)){var o=e.id,i=t._i(a,o);r.checked?i<0&&t.$set(t.form,"warning_answers",a.concat([o])):i>-1&&t.$set(t.form,"warning_answers",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.form,"warning_answers",n)}}}),t._v(" "),s("p",{staticClass:"ml-2 text-xs"},[t._v("Imposta un`alert per questa risposta")])])])})),0)])])})),0)]),t._v(" "),s("div",{staticClass:"mt-4 text-right"},[s("b-button",{attrs:{variant:"primary-alt"},on:{click:function(e){t.activeStep--}}},[t._v("Indietro")]),t._v(" "),s("b-button",{on:{click:function(e){t.activeStep++}}},[t._v("Conferma")])],1)],1):t._e(),t._v(" "),3==t.activeStep?s("div",[s("b-block",[s("h2",{staticClass:"text-primary font-bold flex items-center text-xl"},[t.editTitle?s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"bg-transparent border-primary font-bold",class:{"px-2 py-1 border w-full":t.editTitle},domProps:{value:t.form.title},on:{blur:t.onTitleInputBlur,input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}}):t._e(),t._v(" "),t.editTitle?t._e():[s("span",[t._v(t._s(t.form.title))]),t._v(" "),s("button",{staticClass:"ml-3",on:{click:function(e){t.editTitle=!0}}},[s("svg",{staticClass:"h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"}})])])]],2),t._v(" "),s("div",{staticClass:"mt-8"},[s("p",{staticClass:"text-sm font-semibold"},[t._v("Associa le patologie al questionario")]),t._v(" "),s("div",{staticClass:"mt-4 space-x-5"},[s("label",[t._v("Cerca tra le patalogie:")]),t._v(" "),s("b-select",{staticClass:"inline-block w-80",attrs:{placeholder:"Patologia",label:"title",options:t.filters.pathologies,reduce:function(t){return t.id},multiple:!0},model:{value:t.form.pathologies,callback:function(e){t.$set(t.form,"pathologies",e)},expression:"form.pathologies"}}),t._v(" "),s("b-button",{on:{click:t.selectAllPathologies}},[t._v("select all")])],1)]),t._v(" "),s("div",{staticClass:"mt-8"},[s("p",{staticClass:"text-sm font-semibold"},[t._v("Description")]),t._v(" "),s("quill-editor",{staticClass:"mt-2",attrs:{options:t.editorOptions},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)]),t._v(" "),s("div",{staticClass:"mt-4 text-right"},[s("b-button",{attrs:{variant:"primary-alt"},on:{click:function(e){t.activeStep--}}},[t._v("Indietro")]),t._v(" "),s("b-button",{attrs:{disabled:t.loading},on:{click:t.save}},[t._v("Salva questionario")])],1)],1):t._e()])],1)}),[],!1,null,null,null).exports;function ve(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function me(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?ve(Object(s),!0).forEach((function(e){fe(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ve(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function fe(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function ge(){var t,e=(0,a.qj)({id:null,topic:null,body:null,attachments:[],voice_message:null,read_at:null,require_call:!1,called_at:null,created_at:null,reply:null,sender:null,is_archived:!1,from_bo:!0}),s=(0,a.qj)({data:[],meta:null}),r=(0,a.qj)({inbound:0,read:0,require_call:0,archived:0,outbound:0}),n=(0,a.iH)([]),o=(0,a.iH)(!1),i=g({});return fe(t={errors:i.errors,loading:o,topics:n,counts:r,message:e,messages:s},"errors",i.errors),fe(t,"getParameters",(function(){return f.get("/backend/messages/configs").then((function(t){n.value=t.data.topics||[];var e=t.data.counts;r.inbound=e.inbound,r.read=e.read,r.require_call=e.require_call,r.archived=e.archived,r.outbound=e.outbound}))})),fe(t,"getMessages",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.listType,a=void 0===e?"inbound":e,r=t.page,n=void 0===r?1:r,i=t.search,l=void 0===i?null:i,c=t.topics,u=void 0===c?[]:c;return o.value=!0,f.get("/backend/messages/".concat(a,"/list"),{params:{page:n,search:l,topics:u}}).then((function(t){s.meta=t.data.meta,s.data=t.data.data||[]})).finally((function(){return o.value=!1}))})),fe(t,"saveMessage",(function(t){return i.reset(),o.value=!0,f.post("/backend/messages/",t).then((function(t){return t.data.data})).catch((function(t){var e;throw 422===(null==t||null===(e=t.response)||void 0===e?void 0:e.status)&&i.adaptErr(t),t})).finally((function(){return o.value=!1}))})),fe(t,"getMessage",(function(t,s){return o.value=!0,f.get("/backend/messages/".concat(t),{params:{markAsSeen:s}}).then((function(t){var s=t.data;s=s.data,e.id=s.id,e.topic=s.topic,e.body=s.body,e.attachments=s.attachments,e.voice_message=s.voice_message,e.created_at=s.created_at,e.read_at=s.read_at,e.require_call=s.require_call,e.called_at=s.called_at,e.reply=s.reply,e.sender=s.sender,e.is_archived=s.is_archived,e.from_bo=s.from_bo})).finally((function(){return o.value=!1}))})),fe(t,"sendReply",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,s=t.data;return o.value=!0,i.reset(),f.post("/backend/messages/".concat(e,"/reply"),me({},s)).catch((function(t){var e;throw 422===(null==t||null===(e=t.response)||void 0===e?void 0:e.status)&&i.adaptErr(t),t})).finally((function(){return o.value=!1}))})),fe(t,"markAsRequireCall",(function(t){return o.value=!0,f.post("/backend/messages/".concat(t,"/mark-as-require-call")).finally((function(){return o.value=!1}))})),fe(t,"markAsCalled",(function(t){return o.value=!0,f.post("/backend/messages/".concat(t,"/mark-as-called")).finally((function(){return o.value=!1}))})),t}const _e=(0,a.aZ)({name:"MessageIndexPage",setup:function(t,e){var s=e.root,r=ge(),n=r.topics,o=r.counts,i=r.getParameters,l=(0,a.qj)({search:"",topics:[]});return(0,a.bv)((function(){i()})),(0,a.m0)((function(){localStorage.setItem("last-active-message-list",s.$route.name)})),{topics:n,counts:o,filterParameters:l}}});const he=(0,k.Z)(_e,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-page-header",{attrs:{title:"Messaggi"}}),t._v(" "),s("div",{staticClass:"flex items-start space-x-7"},[s("div",{staticClass:"w-2/5 space-y-2"},[s("p",{staticClass:"text-sm"},[t._v("Ricerca per nome")]),t._v(" "),s("div",{staticClass:"border border-primary py-1 px-2 bg-white flex items-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filterParameters.search,expression:"filterParameters.search"}],staticClass:"w-full bg-transparent",attrs:{type:"text"},domProps:{value:t.filterParameters.search},on:{input:function(e){e.target.composing||t.$set(t.filterParameters,"search",e.target.value)}}}),t._v(" "),s("svg",{staticClass:"h-5 w-5 text-primary mx-1",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}})])])]),t._v(" "),s("div",{staticClass:"w-1/5 space-y-2"},[s("p",{staticClass:"text-sm"},[t._v("Filtra per oggetto")]),t._v(" "),s("b-select",{attrs:{placeholder:"Scegli l’oggetto",searchable:!0,options:t.topics,reduce:function(t){return t.id},label:"label",multiple:!0},model:{value:t.filterParameters.topics,callback:function(e){t.$set(t.filterParameters,"topics",e)},expression:"filterParameters.topics"}})],1),t._v(" "),s("div",{staticClass:"flex-grow flex flex-row-reverse"},[s("b-button",{staticClass:"mt-6"},[s("router-link",{attrs:{to:{name:"messages.create"}}},[t._v("Send Message")])],1)],1)]),t._v(" "),s("div",{staticClass:"mt-5"},[s("div",{staticClass:"grid grid-cols-9 gap-x-10"},[s("div",{staticClass:"col-span-2"},[s("div",{staticClass:"bg-white text-sm rounded-md"},[s("router-link",{staticClass:"flex justify-between py-3 px-2",attrs:{to:"inbound"}},[s("p",{staticClass:"flex items-center"},[s("svg",{staticClass:"w-6 h-6 mr-2",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"}})]),t._v(" "),s("span",[t._v("In Arrivo")])]),t._v(" "),s("span",[t._v("("+t._s(t.counts.inbound)+")")])]),t._v(" "),s("router-link",{staticClass:"flex justify-between py-3 px-2",attrs:{to:"read"}},[s("p",{staticClass:"flex items-center"},[s("svg",{staticClass:"w-6 h-6 mr-2",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}}),t._v(" "),s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}})]),t._v(" "),s("span",[t._v("Letti")])]),t._v(" "),s("span",[t._v("("+t._s(t.counts.read)+")")])]),t._v(" "),s("router-link",{staticClass:"flex justify-between py-3 px-2",attrs:{to:"require-call"}},[s("p",{staticClass:"flex items-center"},[s("svg",{staticClass:"w-6 h-6 mr-2",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"}})]),t._v(" "),s("span",[t._v("Contatto Telefonico")])]),t._v(" "),s("span",[t._v("("+t._s(t.counts.require_call)+")")])]),t._v(" "),s("router-link",{staticClass:"flex justify-between py-3 px-2",attrs:{to:"archived"}},[s("p",{staticClass:"flex items-center"},[s("svg",{staticClass:"h-6 w-6 mr-2",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}})]),t._v(" "),s("span",[t._v("Archivio Risposte")])]),t._v(" "),s("span",[t._v("("+t._s(t.counts.archived)+")")])]),t._v(" "),s("router-link",{staticClass:"flex justify-between py-3 px-2",attrs:{to:"outbound"}},[s("p",{staticClass:"flex items-center"},[s("svg",{staticClass:"w-6 h-6 mr-2",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"}})]),t._v(" "),s("span",[t._v("Outbound")])]),t._v(" "),s("span",[t._v("("+t._s(t.counts.outbound)+")")])])],1)]),t._v(" "),s("div",{staticClass:"col-span-7"},[s("router-view",{attrs:{filters:t.filterParameters}}),t._v(" "),s("div",{staticClass:"mt-7"},[s("portal-target",{attrs:{name:"message-pagination"}})],1)],1)])])],1)}),[],!1,null,"39f4c61f",null).exports;const be=(0,a.aZ)({name:"MessageShowPage",setup:function(t,e){var s=e.root,r=ge(),n=r.loading,i=r.errors,l=r.message,c=r.getMessage,u=r.sendReply,d=r.markAsRequireCall,p=r.markAsCalled,v=(0,a.qj)({reply:!1}),m=(0,a.qj)({body:null});function f(){return c(s.$route.params.id,!0).catch((function(t){var e,s,a;404===(null===(e=t.response)||void 0===e?void 0:e.status)&&La.back(),o.default.toasted.error((null==t||null===(s=t.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||t.message)}))}return f(),{errors:i,modals:v,loading:n,message:l,reply:m,onMarkAsRequireCallClick:function(){d(s.$route.params.id).then((function(){f(),o.default.toasted.success("Message status is set to 'require call' successfully")})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))},onMarkAsCalledClick:function(){p(s.$route.params.id).then((function(){f(),o.default.toasted.success("Message status is set to 'called' successfully")})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))},goBack:function(){La.replace({name:localStorage.getItem("last-active-message-list")||"messages.index"})},sendMessageReply:function(){u({id:s.$route.params.id,data:{body:m.body}}).then((function(t){f(),v.reply=!1,o.default.toasted.success("Reply sent successfully")})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))}}}}),ye=be;const xe=(0,k.Z)(ye,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-3 mx-10"},[s("b-page-header",{attrs:{title:"Message Detail"}}),t._v(" "),s("div",{staticClass:"bg-white"},[s("div",{staticClass:"p-5 py-3 border-b flex items-center justify-between"},[s("div",{staticClass:"flex items-center"},[s("div",{staticClass:"cursor-pointer",on:{click:t.goBack}},[s("svg",{staticClass:"w-6 h-6 text-primary",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"}})])]),t._v(" "),!t.message.require_call||t.message.from_bo||t.loading?t._e():s("div",{staticClass:"ml-4"},[s("b-button",{staticClass:"py-1",attrs:{disabled:t.message.called_at},on:{click:t.onMarkAsCalledClick}},[t._v("Segna come contattato")])],1)]),t._v(" "),t.loading?t._e():s("div",{staticClass:"text-gray-500"},[t._v("Ricevuto il: "+t._s(t._f("datetime")(t.message.created_at)))])]),t._v(" "),s("div",{staticClass:"p-5"},[s("div",{staticClass:"ml-10"},[t.loading?s("p",{staticClass:"text-gray-500"},[t._v("Loading...")]):[s("div",[t.message.sender?s("h2",{staticClass:"font-semibold text-lg"},[t._v(t._s(t.message.sender.name))]):s("h2",{staticClass:"font-semibold text-lg text-red-500"},[t._v("User unavailable")]),t._v(" "),s("p",{staticClass:"mt-2"},[s("span",[t._v("Tipologia:")]),t._v(" "),s("span",{staticClass:"ml-3 font-semibold"},[t._v(t._s(t.message.topic?t.message.topic.title:""))])]),t._v(" "),s("p",{staticClass:"mt-4"},[t._v(t._s(t.message.body))]),t._v(" "),(t.message.attachments||[]).length||t.message.voice_message?s("div",{staticClass:"mt-4"},[(t.message.attachments||[]).length?s("div",[s("p",{staticClass:"font-semibold"},[t._v("Attachments:")]),t._v(" "),s("ul",{staticClass:"list-disc"},t._l(t.message.attachments,(function(e,a){return s("li",{key:a,staticClass:"flex items-center space-x-3"},[s("a",{staticClass:"text-primary",attrs:{href:e,target:"_blank"}},[t._v(t._s(e))]),t._v(" "),s("a",{attrs:{href:e,download:""}},[s("svg",{staticClass:"w-6 h-6 text-primary",attrs:{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z","clip-rule":"evenodd"}})])])])})),0),t._v(" "),t.message.voice_message?s("div",{staticClass:"mt-4"},[s("p",{staticClass:"font-semibold flex items-center space-x-5"},[s("span",[t._v("Voice Message:")]),t._v(" "),s("a",{attrs:{href:t.message.voice_message,download:""}},[s("svg",{staticClass:"w-6 h-6 text-primary",attrs:{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z","clip-rule":"evenodd"}})])])]),t._v(" "),s("audio",{staticClass:"mt-2",attrs:{controls:""}},[s("source",{attrs:{src:t.message.voice_message,type:"audio/mpeg"}}),t._v("Your browser does not support the audio tag.\n                                    ")])]):t._e()]):t._e()]):t._e()]),t._v(" "),t.message.reply&&!t.message.from_bo?s("div",{staticClass:"mt-5 bg-gray-100 rounded-md px-4 py-5"},[s("div",{staticClass:"flex items-center justify-between"},[t.message.reply.author?s("h2",{staticClass:"font-semibold text-lg"},[t._v(t._s(t.message.reply.author.name))]):s("h2",{staticClass:"font-semibold text-lg text-red-500"},[t._v("User unavailable")]),t._v(" "),s("p",[t._v("Risposto: "+t._s(t._f("datetime")(t.message.reply.created_at)))])]),t._v(" "),s("p",{staticClass:"mt-4"},[t._v(t._s(t.message.reply.body))])]):t._e()]],2)])]),t._v(" "),t.message.from_bo?t._e():s("div",{staticClass:"mt-5 flex flex-row-reverse"},[s("div",{staticClass:"flex items-center space-x-5"},[s("b-button",{attrs:{variant:"primary-alt",disabled:t.message.is_archived||t.message.require_call||t.loading},on:{click:t.onMarkAsRequireCallClick}},[t._v("Da contattare telefonicamente")]),t._v(" "),s("b-button",{attrs:{disabled:t.message.reply||t.loading},on:{click:function(e){t.modals.reply=!0}}},[t._v("Rispondi")])],1)]),t._v(" "),t.modals.reply?s("b-modal",{attrs:{title:"Rispondi al messaggio"},on:{close:function(e){t.modals.reply=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[s("div",{staticClass:"-mt-8 flex flex-row-reverse"},[s("div",{staticClass:"flex items-center space-x-5"},[s("b-button",{attrs:{variant:"primary-alt"},on:{click:function(e){t.modals.reply=!1}}},[t._v("Indietro")]),t._v(" "),s("b-button",{attrs:{disabled:t.loading},on:{click:t.sendMessageReply}},[t._v("Invia")])],1)])]},proxy:!0}],null,!1,457059578)},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reply.body,expression:"reply.body"}],staticClass:"p-3 w-full text-sm resize-none border rounded-sm",attrs:{placeholder:"write your message here...",rows:"10"},domProps:{value:t.reply.body},on:{input:function(e){e.target.composing||t.$set(t.reply,"body",e.target.value)}}}),t._v(" "),t.errors.body?s("small",{staticClass:"block text-red-600"},[t._v(t._s(t.errors.body))]):t._e()]):t._e()],1)}),[],!1,null,null,null).exports;function we(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function Ce(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function ke(){var t=(0,a.iH)(!1),e=(0,a.iH)(!1),s=(0,a.iH)(!1),r=(0,a.iH)(!1),n=(0,a.qj)({pathologies:[],doctors:[],filterBySurvey:null}),o=(0,a.qj)({data:[],meta:null}),i=(0,a.qj)({pathology:null,initial_date:null,doctor:null}),l=(0,a.iH)([]);return{loading:t,patients:o,medicalData:i,savingMedicalData:r,loadingMedicalData:e,filters:n,loadingMessages:s,messages:l,getPatients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=e.page,a=void 0===s?1:s,r=e.search,n=void 0===r?null:r,i=e.forListing,l=void 0===i?null:i,c=e.pathologies,u=void 0===c?[]:c,d=e.doctors,p=void 0===d?[]:d,v=e.filterBySurvey,m=e.filterByDocument,g=e.infoDocument,_=e.filterSurvey;return t.value=!0,f.get("/backend/patients",{params:{search:n,page:a,forListing:l,pathologies:u,doctors:p,filterBySurvey:v,filterByDocument:m,infoDocument:g,filterSurvey:_}}).then((function(t){var e=t.data;o.data=e.data,o.meta=e.meta})).finally((function(){return t.value=!1}))},getFilters:function(){var t=A(),e=t.doctors,s=t.getDoctors,a=tt(),r=a.filters;(0,a.getFilters)().then((function(){return n.pathologies=r.pathologies})),s().then((function(){return n.doctors=e.data.map((function(t){return function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?we(Object(s),!0).forEach((function(e){Ce(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):we(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({label:"".concat(t.name)},t)}))}))},getMedicalData:function(t){return e.value=!0,f.get("/backend/patients/".concat(t,"/medical-data")).then((function(t){var e=t.data;(e=e.data)&&(i.pathology=e.pathology,i.initial_date=e.initial_date,i.doctor=e.doctor)})).finally((function(){return e.value=!1}))},saveMedicalData:function(t,e){return r.value=!0,f.post("/backend/patients/".concat(t,"/medical-data"),e).finally((function(){return r.value=!1}))},getMessages:function(t){return s.value=!0,f.get("/backend/patients/".concat(t,"/messages")).then((function(t){l.value=t.data.data})).finally((function(){return s.value=!1}))}}}function je(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function Pe(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Se=(0,a.aZ)({name:"MessageFormPage",setup:function(t,e){var s=e.root,r=ke(),n=r.patients,i=r.getPatients,l=qt(),c=l.topics,u=l.getTopics,d=ge(),p=d.loading,v=d.errors,m=d.saveMessage,f=(0,a.qj)({topic:null,patient:s.$route.query.patient||null,body:null}),g=!!s.$route.query.patient,_=(0,a.Fl)((function(){return(n.data||[]).map((function(t){return function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?je(Object(s),!0).forEach((function(e){Pe(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):je(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({label:"".concat(t.name," (").concat(t.email,")")},t)}))}));u();var h=Z()((function(t,e){i({search:t}).then(e(!1))}),500);return{errors:v,loading:p,topics:c,computedPatients:_,form:f,patientFromUrl:g,onPatientSearch:function(t,e){t&&(e(!0),h(t.trim(),e))},save:function(){m(f).then((function(){o.default.toasted.success("Message created successfully"),La.push({name:"messages.index.outbound"})})).catch((function(t){var e,s;if(v.patient&&g)return o.default.toasted.error(v.patient),La.back();o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))}}}}),Oe=Se;const qe=(0,k.Z)(Oe,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-3"},[s("b-page-header",{attrs:{title:"Send Message"}}),t._v(" "),s("b-block",[s("form",{on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[s("div",[s("label",{staticClass:"font-semibold",attrs:{for:"topic"}},[t._v("Topic")]),t._v(" "),s("b-select",{staticClass:"mt-1",attrs:{options:t.topics,label:"title",placeholder:"select topic",reduce:function(t){return t.id}},model:{value:t.form.topic,callback:function(e){t.$set(t.form,"topic",e)},expression:"form.topic"}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.topic}})],1),t._v(" "),t.patientFromUrl?t._e():s("div",{staticClass:"mt-3"},[s("label",{staticClass:"font-semibold",attrs:{for:"topic"}},[t._v("Patient")]),t._v(" "),s("b-select",{staticClass:"mt-1",attrs:{options:t.computedPatients,placeholder:"search and select a patient",label:"label",filterable:!1,"server-message":"type to search patients...",reduce:function(t){return t.id}},on:{search:t.onPatientSearch},scopedSlots:t._u([{key:"option",fn:function(e){var a=e.option,r=e.isSelected;return[s("div",{staticClass:"-mx-3 flex items-center space-x-2"},[s("input",{staticStyle:{"pointer-events":"none"},attrs:{type:"checkbox"},domProps:{checked:r}}),t._v(" "),s("p",{staticClass:"font-semibold"},[t._v(t._s(a.name))])]),t._v(" "),s("p",{staticClass:"ml-2"},[t._v(t._s(a.email))])]}}],null,!1,4162275957),model:{value:t.form.patient,callback:function(e){t.$set(t.form,"patient",e)},expression:"form.patient"}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.patient}})],1),t._v(" "),s("div",{staticClass:"mt-3"},[s("label",{staticClass:"font-semibold",attrs:{for:"message"}},[t._v("Message Body")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.body,expression:"form.body"}],staticClass:"mt-1 w-full border border-primary px-2 py-1 focus-within:outline-none",attrs:{id:"message",rows:"10",placeholder:"write your message here"},domProps:{value:t.form.body},on:{input:function(e){e.target.composing||t.$set(t.form,"body",e.target.value)}}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.body}})],1),t._v(" "),s("b-button",{staticClass:"mt-3",attrs:{disabled:t.loading}},[t._v("Send")])],1)])],1)}),[],!1,null,null,null).exports;const De=(0,a.aZ)({name:"InboundList",setup:function(t,e){var s=ge(),r=s.loading,n=s.messages,o=s.getMessages,i=(0,a.Fl)((function(){return e.attrs.filters}));(0,a.bv)((function(){o({topics:i.value.topics,search:i.value.search})}));var l=Z()((function(){o({topics:i.value.topics,search:i.value.search})}),500);return(0,a.YP)(e.attrs.filters,l),{loading:r,messages:n,onPageChange:function(t){var e=t.page;o({page:e,topics:i.value.topics,search:i.value.search})}}}}),Me=De;const Ee=(0,k.Z)(Me,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-white p-3 rounded-md"},[s("table",{staticClass:"w-full"},[t.loading?s("tr",{staticClass:"border-t border-b"},[t._m(0)]):t.messages.data.length?t._l(t.messages.data,(function(e){return s("tr",{key:e.id,staticClass:"border-t border-b"},[s("td",{staticClass:"py-4 px-3"},[e.sender?s("p",{staticClass:"text-primary font-semibold"},[t._v(t._s(e.sender.name))]):s("p",{staticClass:"text-gray-700 font-semibold"},[t._v("User Deleted")])]),t._v(" "),s("td",{staticClass:"py-4 px-3"},[e.topic?s("p",{staticClass:"font-semibold"},[t._v(t._s(e.topic.title))]):t._e()]),t._v(" "),s("td",{staticClass:"py-4 px-3 text-sm",staticStyle:{"max-width":"200px"}},[t._v(t._s(t._f("strlimit")(e.body,30)))]),t._v(" "),s("td",{staticClass:"py-4 px-3 text-sm text-gray-500"},[t._v("Ricevuto il: "+t._s(t._f("date")(e.created_at)))]),t._v(" "),s("td",{staticClass:"py-4 px-3"},[s("router-link",{staticClass:"inline-block bg-primary rounded-sm p-1 text-center",attrs:{to:{name:"messages.show",params:{id:e.id}}}},[s("svg",{staticClass:"h-5 w-5 text-white",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}}),t._v(" "),s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}})])])],1)])})):s("tr",{staticClass:"border-t border-b"},[t._m(1)])],2),t._v(" "),s("portal",{attrs:{to:"message-pagination"}},[s("div",{staticClass:"flex flex-row-reverse"},[t.messages.meta?s("b-paginator",{attrs:{data:t.messages.meta},on:{change:t.onPageChange}}):t._e()],1)])],1)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"py-4 px-3"},[s("p",{staticClass:"text-gray-600 text-sm text-center"},[t._v("loading messages...")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"py-4 px-3"},[s("p",{staticClass:"text-gray-600 text-sm text-center"},[t._v("No messages available")])])}],!1,null,null,null).exports;function $e(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function Le(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const ze=(0,a.aZ)({name:"OutboundList",setup:function(t,e){var s=ge(),r=s.loading,n=s.messages,o=s.getMessages,i=(0,a.Fl)((function(){return e.attrs.filters}));function l(t){return o(function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?$e(Object(s),!0).forEach((function(e){Le(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):$e(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({listType:"outbound",topics:i.value.topics,search:i.value.search},t))}(0,a.bv)(l);var c=Z()(l,500);return(0,a.YP)(e.attrs.filters,c),{loading:r,messages:n,onPageChange:function(t){l({page:t.page})}}}}),Ae=ze;const Ie=(0,k.Z)(Ae,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-white p-3 rounded-md"},[s("table",{staticClass:"w-full"},[t.loading?s("tr",{staticClass:"border-t border-b"},[t._m(0)]):t.messages.data.length?t._l(t.messages.data,(function(e){return s("tr",{key:e.id,staticClass:"border-t border-b"},[s("td",{staticClass:"py-4 px-3"},[e.receiver?s("p",{staticClass:"text-primary font-semibold"},[t._v(t._s(e.receiver.name))]):s("p",{staticClass:"text-gray-700 font-semibold"},[t._v("User Deleted")])]),t._v(" "),s("td",{staticClass:"py-4 px-3"},[e.topic?s("p",{staticClass:"font-semibold"},[t._v(t._s(e.topic.title))]):t._e()]),t._v(" "),s("td",{staticClass:"py-4 px-3 text-sm",staticStyle:{"max-width":"200px"}},[t._v(t._s(t._f("strlimit")(e.body,30)))]),t._v(" "),s("td",{staticClass:"py-4 px-3 text-sm text-gray-500"},[t._v("Letto il: "+t._s(t._f("date")(e.read_at)))]),t._v(" "),s("td",{staticClass:"py-4 px-3"},[s("router-link",{staticClass:"inline-block bg-primary rounded-sm p-1 text-center",attrs:{to:{name:"messages.show",params:{id:e.id}}}},[s("svg",{staticClass:"h-5 w-5 text-white",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}}),t._v(" "),s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}})])])],1)])})):s("tr",{staticClass:"border-t border-b"},[t._m(1)])],2),t._v(" "),s("portal",{attrs:{to:"message-pagination"}},[s("div",{staticClass:"flex flex-row-reverse"},[t.messages.meta?s("b-paginator",{attrs:{data:t.messages.meta},on:{change:t.onPageChange}}):t._e()],1)])],1)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"py-4 px-3"},[s("p",{staticClass:"text-gray-600 text-sm text-center"},[t._v("loading messages...")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"py-4 px-3"},[s("p",{staticClass:"text-gray-600 text-sm text-center"},[t._v("No messages available")])])}],!1,null,null,null).exports;function Ze(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function Fe(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Be=(0,a.aZ)({name:"ReadList",setup:function(t,e){var s=ge(),r=s.loading,n=s.messages,o=s.getMessages,i=(0,a.Fl)((function(){return e.attrs.filters}));function l(t){return o(function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Ze(Object(s),!0).forEach((function(e){Fe(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ze(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({listType:"read",topics:i.value.topics,search:i.value.search},t))}(0,a.bv)(l);var c=Z()(l,500);return(0,a.YP)(e.attrs.filters,c),{loading:r,messages:n,onPageChange:function(t){l({page:t.page})}}}}),Ne=Be;const He=(0,k.Z)(Ne,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-white p-3 rounded-md"},[s("table",{staticClass:"w-full"},[t.loading?s("tr",{staticClass:"border-t border-b"},[t._m(0)]):t.messages.data.length?t._l(t.messages.data,(function(e){return s("tr",{key:e.id,staticClass:"border-t border-b"},[s("td",{staticClass:"py-4 px-3"},[e.sender?s("p",{staticClass:"text-primary font-semibold"},[t._v(t._s(e.sender.name))]):s("p",{staticClass:"text-gray-700 font-semibold"},[t._v("User Deleted")])]),t._v(" "),s("td",{staticClass:"py-4 px-3"},[e.topic?s("p",{staticClass:"font-semibold"},[t._v(t._s(e.topic.title))]):t._e()]),t._v(" "),s("td",{staticClass:"py-4 px-3 text-sm",staticStyle:{"max-width":"200px"}},[t._v(t._s(t._f("strlimit")(e.body,30)))]),t._v(" "),s("td",{staticClass:"py-4 px-3 text-sm text-gray-500"},[t._v("Letto il: "+t._s(t._f("date")(e.read_at)))]),t._v(" "),s("td",{staticClass:"py-4 px-3"},[s("router-link",{staticClass:"inline-block bg-primary rounded-sm p-1 text-center",attrs:{to:{name:"messages.show",params:{id:e.id}}}},[s("svg",{staticClass:"h-5 w-5 text-white",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}}),t._v(" "),s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}})])])],1)])})):s("tr",{staticClass:"border-t border-b"},[t._m(1)])],2),t._v(" "),s("portal",{attrs:{to:"message-pagination"}},[s("div",{staticClass:"flex flex-row-reverse"},[t.messages.meta?s("b-paginator",{attrs:{data:t.messages.meta},on:{change:t.onPageChange}}):t._e()],1)])],1)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"py-4 px-3"},[s("p",{staticClass:"text-gray-600 text-sm text-center"},[t._v("loading messages...")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"py-4 px-3"},[s("p",{staticClass:"text-gray-600 text-sm text-center"},[t._v("No messages available")])])}],!1,null,null,null).exports;function Te(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function Re(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Ve=(0,a.aZ)({name:"RequireCallList",setup:function(t,e){var s=ge(),r=s.loading,n=s.messages,o=s.getMessages,i=(0,a.Fl)((function(){return e.attrs.filters}));function l(t){return o(function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Te(Object(s),!0).forEach((function(e){Re(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Te(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({listType:"require_call",topics:i.value.topics,search:i.value.search},t))}(0,a.bv)(l);var c=Z()(l,500);return(0,a.YP)(e.attrs.filters,c),{loading:r,messages:n,onPageChange:function(t){l({page:t.page})}}}}),Qe=Ve;const Ue=(0,k.Z)(Qe,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-white p-3 rounded-md"},[s("table",{staticClass:"w-full"},[t.loading?s("tr",{staticClass:"border-t border-b"},[t._m(0)]):t.messages.data.length?t._l(t.messages.data,(function(e){return s("tr",{key:e.id,staticClass:"border-t border-b"},[s("td",{staticClass:"py-4 px-3"},[e.sender?s("p",{staticClass:"text-primary font-semibold"},[t._v(t._s(e.sender.name))]):s("p",{staticClass:"text-gray-700 font-semibold"},[t._v("User Deleted")])]),t._v(" "),s("td",{staticClass:"py-4 px-3"},[e.topic?s("p",{staticClass:"font-semibold"},[t._v(t._s(e.topic.title))]):t._e()]),t._v(" "),s("td",{staticClass:"py-4 px-3 text-sm",staticStyle:{"max-width":"200px"}},[t._v(t._s(t._f("strlimit")(e.body,30)))]),t._v(" "),s("td",{staticClass:"py-4 px-3 text-sm text-gray-500"},[t._v("Letto il: "+t._s(t._f("date")(e.read_at)))]),t._v(" "),s("td",{staticClass:"py-4 px-3"},[s("router-link",{staticClass:"inline-block bg-primary rounded-sm p-1 text-center",attrs:{to:{name:"messages.show",params:{id:e.id}}}},[s("svg",{staticClass:"h-5 w-5 text-white",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}}),t._v(" "),s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}})])])],1)])})):s("tr",{staticClass:"border-t border-b"},[t._m(1)])],2),t._v(" "),s("portal",{attrs:{to:"message-pagination"}},[s("div",{staticClass:"flex flex-row-reverse"},[t.messages.meta?s("b-paginator",{attrs:{data:t.messages.meta},on:{change:t.onPageChange}}):t._e()],1)])],1)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"py-4 px-3"},[s("p",{staticClass:"text-gray-600 text-sm text-center"},[t._v("loading messages...")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"py-4 px-3"},[s("p",{staticClass:"text-gray-600 text-sm text-center"},[t._v("No messages available")])])}],!1,null,null,null).exports;function Ye(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function Ge(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const We=(0,a.aZ)({name:"ArchivedList",setup:function(t,e){var s=ge(),r=s.loading,n=s.messages,o=s.getMessages,i=(0,a.Fl)((function(){return e.attrs.filters}));function l(t){return o(function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Ye(Object(s),!0).forEach((function(e){Ge(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ye(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({listType:"archived",topics:i.value.topics,search:i.value.search},t))}(0,a.bv)(l);var c=Z()(l,500);return(0,a.YP)(e.attrs.filters,c),{loading:r,messages:n,onPageChange:function(t){l({page:t.page})}}}}),Ke=We;const Je=(0,k.Z)(Ke,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-white p-3 rounded-md"},[s("table",{staticClass:"w-full"},[t.loading?s("tr",{staticClass:"border-t border-b"},[t._m(0)]):t.messages.data.length?t._l(t.messages.data,(function(e){return s("tr",{key:e.id,staticClass:"border-t border-b"},[s("td",[s("svg",{staticClass:"w-5 h-5",class:{"text-green-500":e.called_at},attrs:{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"}})])]),t._v(" "),s("td",{staticClass:"py-4 px-3"},[e.sender?s("p",{staticClass:"text-primary font-semibold"},[t._v(t._s(e.sender.name))]):s("p",{staticClass:"text-gray-700 font-semibold"},[t._v("User Deleted")])]),t._v(" "),s("td",{staticClass:"py-4 px-3"},[e.topic?s("p",{staticClass:"font-semibold"},[t._v(t._s(e.topic.title))]):t._e()]),t._v(" "),s("td",{staticClass:"py-4 px-3 text-sm",staticStyle:{"max-width":"200px"}},[t._v(t._s(t._f("strlimit")(e.body,30)))]),t._v(" "),s("td",{staticClass:"py-4 px-3 text-sm text-gray-500"},[t._v("Letto il: "+t._s(t._f("date")(e.read_at)))]),t._v(" "),s("td",{staticClass:"py-4 px-3"},[s("router-link",{staticClass:"inline-block bg-primary rounded-sm p-1 text-center",attrs:{to:{name:"messages.show",params:{id:e.id}}}},[s("svg",{staticClass:"h-5 w-5 text-white",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}}),t._v(" "),s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}})])])],1)])})):s("tr",{staticClass:"border-t border-b"},[t._m(1)])],2),t._v(" "),s("portal",{attrs:{to:"message-pagination"}},[s("div",{staticClass:"flex flex-row-reverse"},[t.messages.meta?s("b-paginator",{attrs:{data:t.messages.meta},on:{change:t.onPageChange}}):t._e()],1)])],1)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"py-4 px-3"},[s("p",{staticClass:"text-gray-600 text-sm text-center"},[t._v("loading messages...")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"py-4 px-3"},[s("p",{staticClass:"text-gray-600 text-sm text-center"},[t._v("No messages available")])])}],!1,null,null,null).exports;const Xe=(0,a.aZ)({name:"NotFoundPage",setup:function(){return{goBack:function(){window.history.length>2?La.go(-1):La.push({name:"dashboard"})}}}});const ts=(0,k.Z)(Xe,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex items-center justify-center w-screen h-screen bg-gradient-to-r from-primary to-indigo-600"},[s("div",{staticClass:"px-40 py-20 bg-white rounded-md shadow-xl"},[s("div",{staticClass:"flex flex-col items-center"},[s("h1",{staticClass:"font-bold text-primary text-9xl"},[t._v("404")]),t._v(" "),t._m(0),t._v(" "),s("p",{staticClass:"mb-8 text-center text-gray-500 md:text-lg"},[t._v("The page you’re looking for doesn’t exist.")]),t._v(" "),s("button",{staticClass:"px-6 py-2 text-sm font-semibold text-blue-800 bg-blue-100",on:{click:t.goBack}},[t._v("Go Back")])])])])}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h6",{staticClass:"mb-2 text-2xl font-bold text-center text-gray-800 md:text-3xl"},[s("span",{staticClass:"text-red-500"},[t._v("Oops!")]),t._v(" Page not found\n            ")])}],!1,null,null,null).exports;var es=(0,r.Q_)("settings",{state:function(){return{loading:!1,message_count:0}},getters:{}});const ss=(0,a.aZ)({name:"NavItem",props:["to"],setup:function(){return{}}});const as=(0,k.Z)(ss,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("router-link",{staticClass:"px-4 py-3 flex items-center space-x-2 text-nav hover:bg-ternary-dark",attrs:{to:t.to}},[t._t("default")],2)],1)}),[],!1,null,null,null).exports,rs=(0,a.aZ)({name:"Navigation",props:["messageCount"],components:{NavItem:as},setup:function(){return{}}});const ns=(0,k.Z)(rs,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"text-white"},[s("nav-item",{attrs:{to:"/dashboard"}},[s("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"}})]),t._v(" "),s("span",[t._v("Dashboard")])]),t._v(" "),s("nav-item",{attrs:{to:"/users"}},[s("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"}})]),t._v(" "),s("span",[t._v("User Management")])]),t._v(" "),s("nav-item",{attrs:{to:"/patients"}},[s("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"}})]),t._v(" "),s("span",[t._v("Gestione Pazienti")])]),t._v(" "),s("nav-item",{attrs:{to:"/pathologies"}},[s("svg",{staticClass:"w-5 h-5",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"}})]),t._v(" "),s("span",[t._v("Lista Patologie")])]),t._v(" "),s("nav-item",{attrs:{to:"/documents"}},[s("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}})]),t._v(" "),s("span",[t._v("Gestione Documenti")])]),t._v(" "),s("nav-item",{attrs:{to:"/questions"}},[s("svg",{staticClass:"w-5 h-5",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}})]),t._v(" "),s("span",[t._v("Gestione Domande")])]),t._v(" "),s("nav-item",{attrs:{to:"/surveys"}},[s("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}})]),t._v(" "),s("span",[t._v("Questionari Protocolo")])]),t._v(" "),s("nav-item",{attrs:{to:"/message-topics"}},[s("svg",{staticClass:"w-5 h-5",attrs:{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"}})]),t._v(" "),s("span",[t._v("Message Topic")])]),t._v(" "),s("nav-item",{attrs:{to:"/messages"}},[s("svg",{staticClass:"w-5 h-5",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"}})]),t._v(" "),s("span",[t._v("Messaggi ("+t._s(t.messageCount||0)+")")])]),t._v(" "),s("nav-item",{attrs:{to:"/faq"}},[s("svg",{staticClass:"w-5 h-5",attrs:{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"}})]),t._v(" "),s("span",[t._v("FAQ")])]),t._v(" "),s("nav-item",{attrs:{to:"/credit"}},[s("svg",{staticClass:"w-5 h-5",attrs:{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"}})]),t._v(" "),s("span",[t._v("Credits")])])],1)}),[],!1,null,null,null).exports;const os={data:function(){return{open:!1}},props:{placement:{type:String,default:"right",validator:function(t){return-1!==["right","left"].indexOf(t)}}},mounted:function(){var t=this,e=function(e){"Esc"!==e.key&&"Escape"!==e.key||(t.open=!1)};document.addEventListener("keydown",e),this.$once("hook:beforeDestroy",(function(){document.removeEventListener("keydown",e)}))}};const is=(0,k.Z)(os,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"relative"},[s("button",{staticClass:"z-10 relative flex items-center focus:outline-none select-none",on:{click:function(e){t.open=!t.open}}},[t._t("button")],2),t._v(" "),t.open?s("button",{staticClass:"fixed inset-0 h-full w-full cursor-default focus:outline-none",attrs:{tabindex:"-1"},on:{click:function(e){t.open=!1}}}):t._e(),t._v(" "),s("transition",{attrs:{"enter-active-class":"transition-all duration-200 ease-out","leave-active-class":"transition-all duration-750 ease-in","enter-class":"opacity-0 scale-75","enter-to-class":"opacity-100 scale-100","leave-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-75"}},[t.open?s("div",{staticClass:"\n        absolute\n        shadow-lg\n        border\n        w-48\n        rounded\n        py-1\n        px-2\n        text-sm\n        mt-4\n        bg-white\n        z-10\n      ",class:"right"===t.placement?"right-0":"left-0"},[t._t("content")],2):t._e()])],1)}),[],!1,null,null,null).exports,ls=(0,a.aZ)({components:{"v-dropdown":is},name:"Header",setup:function(){var t=h();return{logout:function(){t.logout().then((function(t){Vue.toasted.success(t.message),router.push({name:"login"})}))}}}});const cs=(0,k.Z)(ls,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"md:pl-sidebar h-header flex items-center shadow-md w-full z-10"},[s("div",{staticClass:"w-full container mx-auto px-4"},[s("div",{staticClass:"w-full flex items-center justify-between"},[s("portal-target",{attrs:{name:"header"}}),t._v(" "),s("div",{staticClass:"flex items-center space-x-5 text-primary"},[s("div",{staticClass:"flex items-center"},[s("svg",{staticClass:"h-7 w-7 fill-current",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z","clip-rule":"evenodd"}})]),t._v(" "),s("div",[s("v-dropdown",{attrs:{placement:"right"},scopedSlots:t._u([{key:"button",fn:function(){return[s("svg",{staticClass:"h-5 w-5 fill-current",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"}})])]},proxy:!0},{key:"content",fn:function(){return[s("a",{staticClass:"\n                    flex\n                    w-full\n                    justify-between\n                    items-center\n                    rounded\n                    px-2\n                    py-1\n                    my-1\n                    hover:bg-indigo-600 hover:text-white\n                  ",attrs:{href:"/change/profile"}},[t._v("Change Password")]),t._v(" "),s("hr"),t._v(" "),s("span",{staticClass:"\n                    flex\n                    w-full\n                    justify-between\n                    items-center\n                    rounded\n                    px-2\n                    py-1\n                    my-1\n                    hover:bg-red-600 hover:text-white\n                    cursor-pointer\n                  ",on:{click:t.logout}},[t._v("Logout")])]},proxy:!0}])})],1)]),t._v(" "),s("div",{staticClass:"\n            border-2 border-primary\n            rounded\n            px-2\n            flex\n            items-center\n            space-x-2\n          ",staticStyle:{padding:"3px 0.5rem"}},[s("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}})]),t._v(" "),s("span",{staticClass:"text-sm font-bold"},[t._v("2")])])])],1)])])}),[],!1,null,null,null).exports;const us=(0,a.aZ)({name:"AppLayout",components:{Navigation:ns,Header:cs},setup:function(){var t=es();function e(){f.get("/backend/messages/inbound-count").then((function(t){return t.data.data||0})).then((function(e){t.message_count=e}))}return(0,a.bv)((function(){e(),setInterval(e,1e4),window.addEventListener("update:message-count",e)})),(0,a.Ah)((function(){window.removeEventListener("update:message-count",e)})),{settingsStore:t}}});const ds=(0,k.Z)(us,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:!t.settingsStore.loading,expression:"!settingsStore.loading"}],staticClass:"app-wrapper text-base-black"},[s("div",{staticClass:"flex flex-col w-full",staticStyle:{margin:"0 auto"}},[s("aside",{staticClass:"fixed hidden md:block md:w-sidebar h-full bg-ternary z-20"},[t._m(0),t._v(" "),s("Navigation",{attrs:{"message-count":t.settingsStore.message_count}})],1),t._v(" "),s("Header"),t._v(" "),s("div",{staticClass:"md:pl-sidebar",staticStyle:{background:"rgb(249 248 248)"}},[s("main",{staticClass:"container mx-auto px-4 pt-3 pb-10 text-gray-700",staticStyle:{"min-height":"calc(100vh - 3.4rem)"}},[s("router-view")],1),t._v(" "),t._m(1)])],1),t._v(" "),s("portal-target",{attrs:{name:"modals",multiple:""}})],1)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h-header px-4 flex items-center bg-secondary text-white"},[s("span",{staticClass:"font-bold text-4xl"},[t._v("R-kare")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("footer",{staticClass:"py-2 mx-auto bg-white z-10"},[s("div",{staticClass:"container mx-auto px-4 text-gray-500"},[t._v("R-Kare")])])}],!1,null,null,null).exports;const ps=(0,a.aZ)({name:"AuthLayout",setup:function(){return{settingsStore:es()}}});const vs=(0,k.Z)(ps,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:!t.settingsStore.loading,expression:"!settingsStore.loading"}],staticClass:"auth-wrapper font-sans"},[s("div",{staticClass:"pt-36"},[s("router-view")],1)])}),[],!1,null,null,null).exports;const ms=(0,a.aZ)({name:"ErrorLayout",setup:function(){return{settingsStore:es()}}});const fs=(0,k.Z)(ms,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:!t.settingsStore.loading,expression:"!settingsStore.loading"}]},[s("router-view")],1)}),[],!1,null,null,null).exports;function gs(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function _s(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?gs(Object(s),!0).forEach((function(e){hs(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):gs(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function hs(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const bs=(0,a.aZ)({name:"PatientIndexPage",setup:function(){var t=ke(),e=t.loading,s=t.patients,r=t.filters,n=t.getPatients,i=t.getFilters,l=(0,a.qj)({pathologies:[],doctors:[],search:""}),c=new URLSearchParams(document.location.search),u=c.get("survey"),d=c.get("document"),p=c.get("infodocument"),v=c.get("filtersurvey");function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.page,s=void 0===e?1:e,a=t.pathologies,r=void 0===a?[]:a,i=t.doctors,l=void 0===i?[]:i,c=t.search,m=void 0===c?"":c,f=t.filterBySurvey,g=void 0===f?u:f,_=t.filterByDocument,h=void 0===_?d:_,b=t.infoDocument,y=void 0===b?p:b,x=t.filterSurvey,w=void 0===x?v:x;n({page:s,forListing:"true",pathologies:r,doctors:l,search:m,filterBySurvey:g,filterByDocument:h,infoDocument:y,filterSurvey:w}).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))}return m(),i(),(0,a.YP)(l,Z()((function(){m(_s({page:1},l))}),500)),{filters:l,filterData:r,loading:e,patients:s,onPageChange:function(t){m(_s({page:t.page},l))}}}}),ys=bs;const xs=(0,k.Z)(ys,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-page-header",{attrs:{title:"Gestione Pazienti"}}),t._v(" "),s("div",{staticClass:"flex items-start space-x-7"},[s("div",{staticClass:"w-2/5 space-y-2"},[s("p",{staticClass:"text-sm"},[t._v("Ricerca per nome")]),t._v(" "),s("div",{staticClass:"border border-primary py-1 px-2 bg-white flex items-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.search,expression:"filters.search"}],staticClass:"w-full bg-transparent",attrs:{type:"search"},domProps:{value:t.filters.search},on:{input:function(e){e.target.composing||t.$set(t.filters,"search",e.target.value)}}}),t._v(" "),s("svg",{staticClass:"h-5 w-5 text-primary mx-1",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}})])])]),t._v(" "),s("div",{staticClass:"w-3/5 space-y-2"},[s("p",{staticClass:"text-sm"},[t._v("Filtra per")]),t._v(" "),s("div",{staticClass:"flex items-start space-x-3"},[s("div",{staticClass:"w-1/3"},[s("b-select",{attrs:{placeholder:"Medico",options:t.filterData.doctors,multiple:!0,reduce:function(t){return t.id},label:"label"},model:{value:t.filters.doctors,callback:function(e){t.$set(t.filters,"doctors",e)},expression:"filters.doctors"}})],1),t._v(" "),s("div",{staticClass:"w-1/3"},[s("b-select",{attrs:{placeholder:"Pathologia",options:t.filterData.pathologies,multiple:!0,label:"title",reduce:function(t){return t.id}},model:{value:t.filters.pathologies,callback:function(e){t.$set(t.filters,"pathologies",e)},expression:"filters.pathologies"}})],1)])])]),t._v(" "),s("b-block",{staticClass:"mt-5"},[s("table",{staticClass:"table-auto w-full text-sm"},[s("thead",{staticClass:"uppercase text-white bg-ternary"},[s("tr",{staticClass:"font-semibold text-left"},[s("td",{staticClass:"p-2"},[t._v("nome e cognome")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("patologia")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("Data inizio terapia")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("documenti inviati")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("questionari inviati")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("alert")]),t._v(" "),s("td")])]),t._v(" "),s("tbody",[t.loading?s("tr",[s("td",{attrs:{colspan:"10"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("\n              Loading patients...\n            ")])])]):t.patients.data.length?t._l(t.patients.data,(function(e,a){return s("tr",{key:e.id,class:{"bg-red-100":e.is_alertable,"bg-white":0!==Number(a%2),"bg-gray-100":0===Number(a%2)}},[s("td",{staticClass:"px-2 py-3"},[s("div",{staticClass:"text-primary font-semibold"},[t._v(t._s(e.name))]),t._v(" "),s("p",{staticClass:"mt-1 text-xs text-gray-500"},[t._v("F - 60 anni")])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",[t._v("---")]),t._v(" "),s("p",{staticClass:"mt-1 text-xs text-gray-500"},[t._v("---")])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",[t._v("---")]),t._v(" "),s("p",{staticClass:"mt-1 text-xs text-gray-500"},[t._v("---")])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",[t._v("\n              "+t._s(e.read_documents_count)+"/"+t._s(e.documents_count)+"\n            ")])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",[t._v("\n              "+t._s(e.read_surveys_count)+"/"+t._s(e.surveys_count)+"\n            ")])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[e.is_alertable?s("svg",{staticClass:"h-6 w-6 fill-current text-yellow-500",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"}})]):t._e()]),t._v(" "),s("td",[s("router-link",{staticClass:"inline-block bg-primary rounded-sm p-1 text-center",attrs:{to:"/patients/2"}},[s("svg",{staticClass:"h-5 w-5 text-white",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}}),t._v(" "),s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}})])])],1)])})):s("tr",[s("td",{attrs:{colspan:"10"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("\n              No patients available\n            ")])])])],2)])]),t._v(" "),s("div",{staticClass:"mt-7"},[s("div",{staticClass:"flex items-center justify-between gap-x-10"},[s("div",[s("b-button",[t._v("Exporta CSV")])],1),t._v(" "),s("div",[t.patients.meta?s("b-paginator",{attrs:{data:t.patients.meta},on:{change:t.onPageChange}}):t._e()],1)])])],1)}),[],!1,null,null,null).exports;function ws(t,e,s,a,r,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function Cs(t){return function(){var e=this,s=arguments;return new Promise((function(a,r){var n=t.apply(e,s);function o(t){ws(n,a,r,o,i,"next",t)}function i(t){ws(n,a,r,o,i,"throw",t)}o(void 0)}))}}function ks(){var t=(0,a.iH)(!1),e=(0,a.iH)([]);function s(){return(s=Cs(p().mark((function t(e){var s;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.get("/backend/patients/".concat(e,"/info"));case 2:return s=t.sent,t.abrupt("return",s.data.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{loading:t,documents:e,getDocuments:function(s){return t.value=!0,f.get("/backend/patients/".concat(s,"/info-documents")).then((function(t){var s=t.data;e.value=s.data})).finally((function(){return t.value=!1}))},remindDocument:function(t,e){return f.post("/backend/patients/".concat(t,"/info-documents/").concat(e,"/remind"))},getPatientInfo:function(t){return s.apply(this,arguments)}}}function js(t,e,s,a,r,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function Ps(t){return function(){var e=this,s=arguments;return new Promise((function(a,r){var n=t.apply(e,s);function o(t){js(n,a,r,o,i,"next",t)}function i(t){js(n,a,r,o,i,"throw",t)}o(void 0)}))}}const Ss=(0,a.aZ)({name:"InfoDocuments",props:["userId"],setup:function(t,e){var s=(0,a.qj)({remind:{show:!1,document:null,patient:null}}),r=(0,a.iH)(null),n=(0,a.qj)({show:!1}),i=ks(),l=i.loading,c=i.documents,u=i.getDocuments,d=i.remindDocument,v=i.getPatientInfo,m=at(),f=m.getAllInfoDocuments,g=m.infoDocuments,_=m.loading,h=m.assignDocumentToPatient,b=m.errors;function y(){return(y=Ps(p().mark((function t(e,a){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(a.pivot.patient_id);case 2:s.remind.patient=t.sent,s.remind.document=a,s.remind.show=!0;case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(){e.emit("update-alert",!1),u(t.userId).then((function(){c.value.forEach((function(t){0==t.pivot.is_read&&e.emit("update-alert",!0)}))})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))}function w(){return(w=Ps(p().mark((function e(a,r){var n,i,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=a.target).setAttribute("disabled",!0),e.prev=2,e.next=5,d(t.userId,r);case 5:o.default.toasted.success("Success"),x(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o.default.toasted.error((null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.message)||e.t0.message);case 12:return e.prev=12,n.removeAttribute("disabled"),s.remind.document=null,s.remind.show=!1,e.finish(12);case 17:case"end":return e.stop()}}),e,null,[[2,9,12,17]])})))).apply(this,arguments)}return f(),x(),{loading:l,documents:c,remind:function(t,e){return w.apply(this,arguments)},showRemindModal:function(t,e){return y.apply(this,arguments)},modals:s,sendDocument:function(){n.show=!0,r.value=null},sendDocumentModal:n,infoDocuments:g,infoDocloading:_,assingDocument:function(e){h({patient_id:t.userId,document_id:e}).then((function(t){var e;n.show=!1,o.default.toasted.success(null!==(e=t.message)&&void 0!==e?e:"Success"),r.value=null,x()})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))},infoDocId:r,errors:b}}}),Os=Ss;const qs=(0,k.Z)(Os,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"float-right col-auto hover:text-blue-900 bg-transparent"},[s("b-button",{on:{click:function(e){return t.sendDocument()}}},[t._v("Send Document")])],1),t._v(" "),s("table",{staticClass:"table-auto w-full text-sm"},[t._m(0),t._v(" "),s("tbody",[t.loading?s("tr",[t._m(1)]):(t.documents||[]).length?t._l(t.documents,(function(e,a){return s("tr",{key:e.id,class:a%2==0?"bg-gray-100":"",attrs:{"data-row":e.id}},[s("td",{staticClass:"px-2 py-3"},[s("div",{staticClass:"text-primary font-semibold"},[t._v(t._s(e.title))])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",[t._v(t._s(e.pivot.send_via))])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",[t._v(t._s(t._f("datetime")(e.pivot.created_at)))])]),t._v(" "),s("td",{staticClass:"px-2 py-3 text-white whitespace-nowrap"},[e.pivot.is_read?s("span",{staticClass:"px-2 text-xs bg-green-500 rounded-md",staticStyle:{"padding-top":"2px","padding-bottom":"2px"}},[t._v("Letto")]):s("span",{staticClass:"px-2 text-xs bg-red-500 rounded-md",staticStyle:{"padding-top":"2px","padding-bottom":"2px"}},[t._v("Non Letto")])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",[t._v(t._s(e.reminders_count||0))])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[e.reminders.length?s("div",[t._v("\n              "+t._s(t._f("datetime")(e.reminders[0].created_at))+"\n            ")]):s("div",[t._v("---")]),t._v(" "),s("p",{staticClass:"text-gray-600 text-sm space-x-1"},[s("span",[t._v("Precedente:")]),t._v(" "),e.reminders.length>1?s("span",[t._v(t._s(t._f("datetime")(e.reminders[1].created_at)))]):s("span",[t._v("---")])])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",[t._v("\n              "+t._s(e.reminders.length?e.reminders[0].user.name:"---")+"\n            ")])]),t._v(" "),s("td",{staticClass:"px-2 py-3 flex justify-center"},[s("div",{staticClass:"flex items-center space-x-2"},[e.pivot.is_read?t._e():s("b-button",{on:{click:function(s){return t.showRemindModal(s,e)}}},[t._v("Sollecita")])],1)])])})):s("tr",[t._m(2)])],2)]),t._v(" "),t.modals.remind.show?s("b-modal",{attrs:{title:"conferma sollecito"},on:{close:function(e){t.modals.remind.show=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[s("div",{staticClass:"flex gap-x-4 flex-row-reverse"},[s("b-button",{on:{click:function(e){return t.remind(e,t.modals.remind.document.id)}}},[t._v("Confirm")]),t._v(" "),s("b-button",{attrs:{variant:"primary-alt"},on:{click:function(e){t.modals.remind.show=!1}}},[t._v("Indietro")])],1)]},proxy:!0}],null,!1,3715678455)},[s("h3",[t._v("\n      Stai per inviare un sollecito di lettura al paziente\n      "),s("span",{staticClass:"font-bold"},[t._v(t._s(t.modals.remind.patient.name))]),t._v(" per il\n      documento\n      "),s("span",{staticClass:"font-bold"},[t._v(t._s(t.modals.remind.document.title))]),t._v(".\n      "),s("p",[t._v("Conferma di voler procedere.")])])]):t._e(),t._v(" "),t.sendDocumentModal.show?s("b-modal",{attrs:{size:"3xl",title:"inviare documento"},on:{close:function(e){t.sendDocumentModal.show=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[s("div",{staticClass:"flex gap-x-4 flex-row-reverse"},[s("b-button",{on:{click:function(e){return t.assingDocument(t.infoDocId)}}},[t._v("Inviare")]),t._v(" "),s("b-button",{attrs:{variant:"primary-alt"},on:{click:function(e){t.sendDocumentModal.show=!1}}},[t._v("Indietro")])],1)]},proxy:!0}],null,!1,4078914729)},[s("p",{staticClass:"font-bold text-gray-600"},[t._v("Nome Documenti")]),t._v(" "),s("p",{staticClass:"mt-1 text-lg"},[s("b-select",{attrs:{placeholder:"documento",close_on_select:"true",label:"title",options:t.infoDocuments.data,reduce:function(t){return t.id},multiple:!1},model:{value:t.infoDocId,callback:function(e){t.infoDocId=e},expression:"infoDocId"}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.document_id}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.patient_id}})],1)]):t._e()],1)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",{staticClass:"uppercase text-white bg-ternary"},[s("tr",{staticClass:"font-semibold text-left"},[s("td",{staticClass:"p-2"},[t._v("nome documento")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("inviare tramite")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("data invio")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("stato")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("N. solleciti")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("data sollecito")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("medico sollecitante")]),t._v(" "),s("td")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{colspan:"7"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("\n            Loading documents....\n          ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{colspan:"7"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("\n            No documents available\n          ")])])}],!1,null,null,null).exports;const Ds=(0,a.aZ)({name:"AccordionItem",props:{},setup:function(){var t=(0,a.iH)(null),e=(0,a.f3)("Accordion"),s=(0,a.Fl)((function(){return t.value==e.active}));return t.value=e.count++,{visible:s,open:function(){s.value?e.active=null:e.active=t.value},start:function(t){t.style.height=t.scrollHeight+"px"},end:function(t){t.style.height=""}}}}),Ms=Ds;const Es=(0,k.Z)(Ms,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"relative"},[s("div",{staticClass:"accordion__trigger",class:{accordion__trigger_active:t.visible},on:{click:t.open}},[s("div",{staticClass:"flex space-x-1 items-center font-semibold"},[s("div",[t.visible?s("svg",{staticClass:"w-6 h-6",attrs:{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"}})]):s("svg",{staticClass:"w-6 h-6 fill-current",attrs:{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"}})])]),t._v(" "),t._t("accordion-trigger")],2),t._v(" "),s("div",{staticClass:"text-sm font-medium",class:{"text-white":t.visible,"text-gray-500":!t.visible}},[t._t("accordion-trigger-end")],2)]),t._v(" "),s("transition",{attrs:{name:"accordion"},on:{enter:t.start,"after-enter":t.end,"before-leave":t.start,"after-leave":t.end}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"accordion__content py-3 px-6"},[t._t("accordion-content")],2)])],1)}),[],!1,null,"f45f8642",null).exports,$s=(0,a.aZ)({name:"Accordion",props:{},setup:function(){(0,a.JJ)("Accordion",(0,a.qj)({count:0,active:null}))}});const Ls=(0,k.Z)($s,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("ul",{staticClass:"accordion space-y-3"},[t._t("default")],2)}),[],!1,null,null,null).exports;const zs=(0,a.aZ)({name:"Documents",components:{Accordion:Ls,AccordionItem:Es},props:["userId"],setup:function(t){var e=function(){var t=(0,a.iH)(!1),e=(0,a.iH)([]);return{loading:t,folders:e,getDocuments:function(s){return t.value=!0,f.get("/backend/patients/".concat(s,"/documents")).then((function(t){var s=t.data;e.value=s.data})).finally((function(){return t.value=!1}))},markAsRead:function(t){return f.post("/backend/patients/documents/".concat(t,"/mark-as-read")).then((function(t){return t.data}))}}}(),s=e.loading,r=e.folders,n=e.getDocuments,i=e.markAsRead,l=(0,a.qj)({document:{open:!1,data:null}});return n(t.userId),{loading:s,modals:l,folders:r,showDocument:function(t){l.document.data=t,l.document.open=!0},readDocument:function(t,e,s,a){var n=e.id,l=t.target;l.setAttribute("disabled",!0),i(n).then((function(t){r.value[s].documents[a].read_at=t.data.read_at,o.default.toasted.success(t.message)})).catch((function(t){var e,s;o.default.toasted.error((null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)})).finally((function(){l.removeAttribute("disabled")}))}}}});const As=(0,k.Z)(zs,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.loading?s("p",{staticClass:"text-gray-500 text-center"},[t._v("Loading document...")]):t.folders.length?s("accordion",t._l(t.folders,(function(e,a){return s("accordion-item",{key:e.id},[s("template",{slot:"accordion-trigger"},[s("h3",[t._v(t._s(e.title))])]),t._v(" "),s("template",{slot:"accordion-trigger-end"},[t._v("Date creazione: "+t._s(t._f("datetime")(e.updated_at||e.created_at)))]),t._v(" "),s("template",{slot:"accordion-content"},[s("table",{staticClass:"w-full"},t._l(e.documents,(function(e,r){return s("tr",{key:e.id,staticClass:"border-b"},[s("td",{staticClass:"py-3"},[s("div",{staticClass:"flex item-center space-x-2 text-gray-500 font-semibold"},[s("svg",{staticClass:"w-5 h-5",attrs:{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"}})]),t._v(" "),s("p",[t._v(t._s(e.title))])])]),t._v(" "),s("td",{staticClass:"py-3"},[s("div",[e.read_at?s("p",[t._v(t._s(t._f("datetime")(e.read_at)))]):s("b-button",{attrs:{variant:"primary-alt"},on:{click:function(s){return t.readDocument(s,e,a,r)}}},[t._v("Mark as read")])],1)]),t._v(" "),s("td",{staticClass:"py-3 flex flex-row-reverse"},[s("div",{staticClass:"rounded-md bg-primary flex items-center text-white"},[s("button",{staticClass:"p-2",on:{click:function(s){return s.preventDefault(),t.showDocument(e)}}},[s("svg",{staticClass:"w-5 h-5",attrs:{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}}),t._v(" "),s("path",{attrs:{"fill-rule":"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"}})])]),t._v(" "),s("a",{staticClass:"p-2",attrs:{href:"/api/v1/backend/patients/documents/"+e.id+"/download",download:""}},[s("svg",{staticClass:"w-5 h-5",attrs:{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"}})])])])])])})),0)])],2)})),1):s("p",{staticClass:"text-gray-500 text-center"},[t._v("No document available")]),t._v(" "),t.modals.document.open?s("b-modal",{attrs:{size:"3xl",title:"Documents"},on:{close:function(e){t.modals.document.open=!1}}},[s("div",[s("p",{staticClass:"font-semibold"},[t._v("Attachments")]),t._v(" "),t.modals.document.data.attachments.length?s("ul",{staticClass:"list-disc"},t._l(t.modals.document.data.attachments,(function(e,a){return s("li",{key:a,staticClass:"flex items-center space-x-3"},[s("a",{staticClass:"text-primary",attrs:{href:e,target:"_blank"}},[t._v(t._s(e))]),t._v(" "),s("a",{attrs:{href:e,download:""}},[s("svg",{staticClass:"w-6 h-6 text-primary",attrs:{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z","clip-rule":"evenodd"}})])])])})),0):s("p",{staticClass:"text-sm text-gray-500"},[t._v("No attachments")])]),t._v(" "),t.modals.document.data.voice_message?s("div",{staticClass:"mt-4"},[s("p",{staticClass:"font-semibold flex items-center space-x-5"},[s("span",[t._v("Voice Message:")]),t._v(" "),s("a",{attrs:{href:t.modals.document.data.voice_message,download:""}},[s("svg",{staticClass:"w-6 h-6 text-primary",attrs:{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z","clip-rule":"evenodd"}})])])]),t._v(" "),s("audio",{staticClass:"mt-2",attrs:{controls:""}},[s("source",{attrs:{src:t.modals.document.data.voice_message,type:"audio/mpeg"}}),t._v("Your browser does not support the audio tag.\n            ")])]):t._e()]):t._e()],1)}),[],!1,null,null,null).exports;function Is(t,e,s,a,r,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function Zs(t){return function(){var e=this,s=arguments;return new Promise((function(a,r){var n=t.apply(e,s);function o(t){Is(n,a,r,o,i,"next",t)}function i(t){Is(n,a,r,o,i,"throw",t)}o(void 0)}))}}function Fs(){var t=(0,a.iH)(!1),e=(0,a.iH)([]),s=g({}),r=(0,a.qj)({title:"",description:"",answers:[],completed_at:null,reviewed_at:null,note:null,sent_at:null,warning_answers:[]});function n(){return(n=Zs(p().mark((function e(a){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.reset(),t.value=!0,e.next=4,f.post("/backend/patient/assign-survey",a).then((function(t){return t.data})).catch((function(t){throw s.isValidationError(t)&&s.adaptErr(t),t})).finally((function(){t.value=!1}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{errors:s.errors,loading:t,surveys:e,survey:r,getSurveys:function(s){return t.value=!0,f.get("/backend/patients/".concat(s,"/surveys")).then((function(t){var s=t.data;e.value=s.data})).finally((function(){return t.value=!1}))},getSurvey:function(e,s){return t.value=!0,f.get("/backend/patients/".concat(e,"/surveys/").concat(s)).then((function(t){var e=t.data;e=e.data,r.title=e.title,r.description=e.description,r.reviewed_at=e.pivot.reviewed_at,r.completed_at=e.pivot.completed_at,r.note=e.pivot.note,r.sent_at=e.pivot.created_at,r.warning_answers=(e.warning_answers||[]).map((function(t){return t.id})),r.answers=e.patient_answers})).finally((function(){return t.value=!1}))},remindSurvey:function(t,e){return f.post("/backend/patients/".concat(t,"/surveys/").concat(e,"/remind"))},saveNote:function(t,e,s){return f.post("/backend/patients/".concat(t,"/surveys/").concat(e,"/review"),s)},sendSurveyToPatient:function(t){return n.apply(this,arguments)}}}function Bs(t,e,s,a,r,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function Ns(t){return function(){var e=this,s=arguments;return new Promise((function(a,r){var n=t.apply(e,s);function o(t){Bs(n,a,r,o,i,"next",t)}function i(t){Bs(n,a,r,o,i,"throw",t)}o(void 0)}))}}const Hs=(0,a.aZ)({name:"Surveys",props:["userId"],emits:["update-alert","update-haswarning"],setup:function(t,e){var s=Fs(),r=s.loading,n=s.surveys,i=s.getSurveys,l=s.remindSurvey,c=s.errors,u=s.sendSurveyToPatient,d=ks().getPatientInfo,v=Xt(),m=v.getSurveys,f=v.surveys,g=(0,a.iH)(null),_=(0,a.qj)({remind:{show:!1,survey:null,patient:null}}),h=(0,a.qj)({show:!1});function b(){return(b=Ns(p().mark((function t(e,s){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stopPropagation(),t.next=3,d(s.pivot.patient_id);case 3:_.remind.patient=t.sent,_.remind.survey=s,_.remind.show=!0;case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(){e.emit("update-alert",!1),i(t.userId).then((function(){n.value.forEach((function(t){t.pivot.completed_at||e.emit("update-alert",!0),t.is_alertable&&e.emit("update-haswarning",!0)}))})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))}function x(){return(x=Ns(p().mark((function e(s,a){var r,n,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=s.target).setAttribute("disabled",!0),e.prev=2,e.next=5,l(t.userId,a);case 5:o.default.toasted.success("Success"),y(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o.default.toasted.error((null===e.t0||void 0===e.t0||null===(n=e.t0.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||e.t0.message);case 12:return e.prev=12,r.removeAttribute("disabled"),_.remind.survey=null,_.remind.show=!1,e.finish(12);case 17:case"end":return e.stop()}}),e,null,[[2,9,12,17]])})))).apply(this,arguments)}return y(),m(),{loading:r,errors:c,surveys:n,remind:function(t,e){return x.apply(this,arguments)},gotoDetail:function(e,s){var a=s.id;"BUTTON"!=e.target.tagName?La.push({name:"patients.surveys.show",params:{patientId:t.userId,surveyId:a}}):e.stopPropagation()},showRemindModal:function(t,e){return b.apply(this,arguments)},sendSurveyModal:h,modals:_,selectSurveyId:g,sendSurvey:function(e){u({patient_id:t.userId,survey_id:e}).then((function(t){var e;h.show=!1,o.default.toasted.success(null!==(e=t.message)&&void 0!==e?e:"Success"),g.value=null,y()})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))},sendQuestionario:function(){h.show=!0,g.value=null},allSurveys:f}}}),Ts=Hs;const Rs=(0,k.Z)(Ts,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"float-right col-auto hover:text-blue-900 bg-transparent"},[s("b-button",{on:{click:function(e){return t.sendQuestionario()}}},[t._v("Send Questionari")])],1),t._v(" "),s("table",{staticClass:"table-auto w-full text-sm"},[t._m(0),t._v(" "),s("tbody",[t.loading?s("tr",[t._m(1)]):(t.surveys||[]).length?t._l(t.surveys,(function(e,a){return s("tr",{key:e.id,staticClass:"cursor-pointer",class:e.is_alertable?"bg-red-100":a%2==0?"bg-gray-100":"",attrs:{"data-row":e.id},on:{click:function(s){return t.gotoDetail(s,e)}}},[s("td",{staticClass:"px-2 py-3"},[s("div",{staticClass:"text-primary font-semibold"},[t._v(t._s(e.title))])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",[t._v(t._s(e.pivot.send_via))])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",[t._v(t._s(t._f("datetime")(e.pivot.created_at)))])]),t._v(" "),s("td",{staticClass:"px-2 py-3 text-white"},[e.pivot.completed_at?s("span",{staticClass:"px-2 text-xs bg-green-500 rounded-md",staticStyle:{"padding-top":"2px","padding-bottom":"2px"}},[t._v("Compilato")]):s("span",{staticClass:"px-2 text-xs bg-red-500 rounded-md whitespace-nowrap",staticStyle:{"padding-top":"2px","padding-bottom":"2px"}},[t._v("Non compilato")])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[e.pivot.completed_at?s("div",[t._v("\n              "+t._s(t._f("datetime")(e.pivot.completed_at))+"\n            ")]):s("div",[t._v("---")])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",[t._v(t._s(e.reminders_count||0))])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[e.reminders.length?s("div",[t._v("\n              "+t._s(t._f("datetime")(e.reminders[0].created_at))+"\n            ")]):s("div",[t._v("---")]),t._v(" "),s("p",{staticClass:"text-gray-600 text-sm space-x-1"},[s("span",[t._v("Precedente:")]),t._v(" "),e.reminders.length>1?s("span",[t._v(t._s(t._f("datetime")(e.reminders[1].created_at)))]):s("span",[t._v("---")])])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",[t._v("\n              "+t._s(e.reminders.length?e.reminders[0].user.name:"---")+"\n            ")])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[e.is_alertable?s("svg",{staticClass:"h-6 w-6 fill-current text-yellow-500",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"}})]):t._e()]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",{staticClass:"flex items-center space-x-2"},[e.pivot.completed_at?t._e():s("b-button",{on:{click:function(s){return t.showRemindModal(s,e)}}},[t._v("Sollecita")])],1)])])})):s("tr",[t._m(2)])],2)]),t._v(" "),t.modals.remind.show?s("b-modal",{attrs:{title:"conferma sollecito"},on:{close:function(e){t.modals.remind.show=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[s("div",{staticClass:"flex gap-x-4 flex-row-reverse"},[s("b-button",{on:{click:function(e){return t.remind(e,t.modals.remind.survey.id)}}},[t._v("Confirm")]),t._v(" "),s("b-button",{attrs:{variant:"primary-alt"},on:{click:function(e){t.modals.remind.show=!1}}},[t._v("Indietro")])],1)]},proxy:!0}],null,!1,1443431750)},[s("h3",[t._v("\n      Stai per inviare un sollecito di lettura al paziente\n      "),s("span",{staticClass:"font-bold"},[t._v(t._s(t.modals.remind.patient.name))]),t._v(" per il\n      questionario\n      "),s("span",{staticClass:"font-bold"},[t._v(t._s(t.modals.remind.survey.title))]),t._v(" .\n      "),s("p",[t._v("Conferma di voler procedere.")])])]):t._e(),t._v(" "),t.sendSurveyModal.show?s("b-modal",{attrs:{size:"3xl",title:"inviare Questionari"},on:{close:function(e){t.sendSurveyModal.show=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[s("div",{staticClass:"flex gap-x-4 flex-row-reverse"},[s("b-button",{on:{click:function(e){return t.sendSurvey(t.selectSurveyId)}}},[t._v("Inviare")]),t._v(" "),s("b-button",{attrs:{variant:"primary-alt"},on:{click:function(e){t.sendSurveyModal.show=!1}}},[t._v("Indietro")])],1)]},proxy:!0}],null,!1,1648361892)},[s("p",{staticClass:"font-bold text-gray-600"},[t._v("Nome Questionario")]),t._v(" "),s("p",{staticClass:"mt-1 text-lg"},[s("b-select",{attrs:{placeholder:"Questionario",options:t.allSurveys.data,reduce:function(t){return t.id},close_on_select:"true",label:"title",multiple:!1},model:{value:t.selectSurveyId,callback:function(e){t.selectSurveyId=e},expression:"selectSurveyId"}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.survey_id}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.patient_id}})],1)]):t._e()],1)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",{staticClass:"uppercase text-white bg-ternary"},[s("tr",{staticClass:"font-semibold text-left"},[s("td",{staticClass:"p-2"},[t._v("nome questionario")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("INVIARE TRAMITE")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("data invio")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("stato")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("data compilaz")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("N. solleciti")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("data sollecito")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("medico sollecitante")]),t._v(" "),s("td",[t._v("Alert")]),t._v(" "),s("td")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{colspan:"7"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("\n            Loading surveys....\n          ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{colspan:"7"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("\n            No surveys available\n          ")])])}],!1,null,null,null).exports;function Vs(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function Qs(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Us=(0,a.aZ)({name:"MedicalData",props:["userId"],setup:function(t,e){e.root;var s=tt(),r=s.filters,n=s.getFilters,i=ke(),l=i.loadingMedicalData,c=i.savingMedicalData,u=i.medicalData,d=i.saveMedicalData,p=i.getMedicalData,v=A(),m=v.doctors,f=v.getDoctors,g=(0,a.Fl)((function(){return(m.data||[]).map((function(t){return function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Vs(Object(s),!0).forEach((function(e){Qs(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Vs(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({label:"".concat(t.name," (").concat(t.email,")")},t)}))})),_=(0,a.qj)({main:!1}),h=(0,a.qj)({pathology:null,doctor:null});function b(){p(t.userId).catch((function(t){var e,s;o.default.toasted.error((null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))}n(),b();var y=Z()((function(t,e){f({search:t}).then(e(!1))}),500);return{modals:_,loadingMedicalData:l,options:r,form:h,computedDoctors:g,medicalData:u,savingMedicalData:c,onDoctorSearch:function(t,e){t&&(e(!0),y(t.trim(),e))},save:function(){d(t.userId,h).then((function(){_.main=!1,b(),o.default.toasted.success("Successfully saved")})).catch((function(t){var e,s;o.default.toasted.error((null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))}}}});const Ys=(0,k.Z)(Us,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.loadingMedicalData?s("div",{staticClass:"text-gray-500 text-center text-sm"},[t._v("\n    Loading...\n  ")]):[s("div",{staticClass:"grid grid-cols-12 gap-5 tracking-wide"},[s("div",{staticClass:"col-span-4 space-y-2"},[s("p",{staticClass:"font-bold text-sm text-gray-500"},[t._v("Patologia")]),t._v(" "),t.medicalData.pathology?s("p",{staticClass:"text-black"},[t._v("\n          "+t._s(t.medicalData.pathology.title)+"\n        ")]):s("p",{staticClass:"text-gray-500"},[t._v("---")])]),t._v(" "),s("div",{staticClass:"col-span-4 space-y-2"},[s("p",{staticClass:"font-bold text-sm text-gray-500"},[t._v("Data inzio terapia")]),t._v(" "),t.medicalData.initial_date?s("p",{staticClass:"text-black"},[t._v("\n          "+t._s(t._f("date")(t.medicalData.initial_date))+"\n        ")]):s("p",{staticClass:"text-gray-500"},[t._v("---")])]),t._v(" "),s("div",{staticClass:"col-span-4 space-y-2"},[s("p",{staticClass:"font-bold text-sm text-gray-500"},[t._v("Medico referente")]),t._v(" "),t.medicalData.doctor?s("p",{staticClass:"text-black"},[t._v("\n          "+t._s(t.medicalData.doctor.name)+" ("+t._s(t.medicalData.doctor.email)+")\n        ")]):s("p",{staticClass:"text-gray-500"},[t._v("---")])])]),t._v(" "),s("div",{staticClass:"mt-10 flex flex-row-reverse"},[s("b-button",{attrs:{variant:"primary-alt",disabled:t.medicalData.initial_date},on:{click:function(e){t.modals.main=!0}}},[t._v("Notifica I'inizio del protocollo")])],1),t._v(" "),t.modals.main?s("b-modal",{attrs:{title:"Data Medici",size:"3xl"},on:{close:function(e){t.modals.main=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[s("div",{staticClass:"flex flex-row-reverse"},[s("div",[s("b-button",{staticClass:"mr-auto",attrs:{disabled:t.savingMedicalData},on:{click:t.save}},[t._v("Submit")])],1)])]},proxy:!0}],null,!1,554420873)},[s("div",[s("label",{staticClass:"font-semibold"},[t._v("Pathology")]),t._v(" "),s("b-select",{staticClass:"mt-1",attrs:{placeholder:"Patologia",label:"title",options:t.options.pathologies,reduce:function(t){return t.id},multiple:!1},model:{value:t.form.pathology,callback:function(e){t.$set(t.form,"pathology",e)},expression:"form.pathology"}})],1),t._v(" "),s("div",{staticClass:"mt-3"},[s("label",{staticClass:"font-semibold"},[t._v("Medico")]),t._v(" "),s("b-select",{staticClass:"mt-1",attrs:{placeholder:"search and select a doctor",label:"label",options:t.computedDoctors,reduce:function(t){return t.id},filterable:!1,"server-message":"type to search doctors..."},on:{search:t.onDoctorSearch},scopedSlots:t._u([{key:"option",fn:function(e){var a=e.option,r=e.isSelected;return[s("div",{staticClass:"-mx-3 flex items-center space-x-2"},[s("input",{staticStyle:{"pointer-events":"none"},attrs:{type:"checkbox"},domProps:{checked:r}}),t._v(" "),s("p",{staticClass:"font-semibold"},[t._v(t._s(a.name))])]),t._v(" "),s("p",{staticClass:"ml-2"},[t._v(t._s(a.email))])]}}],null,!1,4162275957),model:{value:t.form.doctor,callback:function(e){t.$set(t.form,"doctor",e)},expression:"form.doctor"}})],1)]):t._e()]],2)}),[],!1,null,null,null).exports;const Gs=(0,a.aZ)({name:"Messages",props:["userId"],setup:function(t){var e=ke(),s=e.loadingMessages,a=e.messages;return(0,e.getMessages)(t.userId).catch((function(t){var e,s;o.default.toasted.error((null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)})),{loading:s,messages:a}}}),Ws=Gs;const Ks=(0,k.Z)(Ws,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("table",{staticClass:"table-auto w-full text-sm"},[t._m(0),t._v(" "),s("tbody",[t.loading?s("tr",[t._m(1)]):(t.messages||[]).length?t._l(t.messages,(function(e,a){return s("tr",{key:e.id,class:a%2==0?"bg-gray-100":"",attrs:{"data-row":e.id}},[s("td",{staticClass:"px-2 py-3"},[s("div",[t._v(t._s(t._f("date")(e.created_at)))])]),t._v(" "),s("td",{staticClass:"px-2 py-3 text-white whitespace-nowrap"},[e.read_at?s("span",{staticClass:"px-2 text-xs bg-green-500 rounded-md",staticStyle:{"padding-top":"2px","padding-bottom":"2px"}},[t._v("Letto")]):s("span",{staticClass:"px-2 text-xs bg-red-500 rounded-md",staticStyle:{"padding-top":"2px","padding-bottom":"2px"}},[t._v("Non Letto")])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("div",{staticClass:"text-sm"},[t._v(t._s(t._f("strlimit")(e.body,100)))])]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[s("router-link",{staticClass:"inline-block bg-primary rounded-sm p-1 text-center",attrs:{to:{name:"messages.show",params:{id:e.id}}}},[s("svg",{staticClass:"h-5 w-5 text-white",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}}),t._v(" "),s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}})])])],1)])})):s("tr",[t._m(2)])],2)])])}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",{staticClass:"uppercase text-white bg-ternary"},[s("tr",{staticClass:"font-semibold text-left"},[s("td",{staticClass:"p-2"},[t._v("Data Invio")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("stato")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("testo della comunicazione")]),t._v(" "),s("td")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{colspan:"4"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("Loading messages....")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{colspan:"7"}},[s("div",{staticClass:"text-gray-600 text-center py-3"},[t._v("No messages available")])])}],!1,null,null,null).exports;var Js='<svg class="-mt-5 inline w-4 h-4 text-red-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>',Xs='<svg xmlns="http://www.w3.org/2000/svg" class="inline h-4 w-4 fill-current text-yellow-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/></svg>';const ta=(0,a.aZ)({name:"PatientShowPage",components:{PatientDocuments:As,InfoDocuments:qs,Surveys:Rs,MedicalData:Ys,Messages:Ks},setup:function(t,e){var s=e.root.$route.params.id,r=(0,a.iH)(!1),n=(0,a.iH)(!1),o=(0,a.iH)(!1);return{userId:s,documentAlerts:r,surveyAlerts:n,surveyWarning:o,dotIcon:Js,warningIcon:Xs,surveySuffix:(0,a.Fl)((function(){return(n.value?Js:"")+(o.value?Xs:"")}))}}});const ea=(0,k.Z)(ta,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-8"},[s("b-page-header",{attrs:{title:"Marco Rossi"}},[s("router-link",{attrs:{to:{name:"messages.create",query:{patient:t.userId}}}},[s("b-button",[t._v("Invia una comunicazione")])],1)],1),t._v(" "),s("div",[s("b-tabs",{staticClass:"bg-white",attrs:{options:{useUrlFragment:!0}}},[s("b-tab",{attrs:{name:"dati anagrafici"}},[s("div",{staticClass:"p-5"},[s("div",{staticClass:"grid grid-cols-12 gap-5 tracking-wide"},[s("div",{staticClass:"col-span-4 space-y-8"},[s("div",{staticClass:"space-y-2"},[s("p",{staticClass:"font-bold text-sm text-gray-500"},[t._v("Nome e Cognome")]),t._v(" "),s("p",{staticClass:"text-black"},[t._v("Alessia Lombardi")])]),t._v(" "),s("div",{staticClass:"space-y-2"},[s("p",{staticClass:"font-bold text-sm text-gray-500"},[t._v("Codice Fiscale")]),t._v(" "),s("p",{staticClass:"text-black"},[t._v("LMBLSS61P42F205E")])]),t._v(" "),s("div",{staticClass:"space-y-2"},[s("p",{staticClass:"font-bold text-sm text-gray-500"},[t._v("\n                  Comune di nascita e provincia\n                ")]),t._v(" "),s("p",{staticClass:"text-black"},[t._v("Milano (MI)")])])]),t._v(" "),s("div",{staticClass:"col-span-4 space-y-8"},[s("div",{staticClass:"space-y-2"},[s("p",{staticClass:"font-bold text-sm text-gray-500"},[t._v("Sesso")]),t._v(" "),s("p",{staticClass:"text-black"},[t._v("Femmina")])]),t._v(" "),s("div",{staticClass:"space-y-2"},[s("p",{staticClass:"font-bold text-sm text-gray-500"},[t._v("\n                  Numero di telefono\n                ")]),t._v(" "),s("p",{staticClass:"text-black"},[t._v("348 123 4567")])]),t._v(" "),s("div",{staticClass:"space-y-2"},[s("p",{staticClass:"font-bold text-sm text-gray-500"},[t._v("\n                  Indirizzo di residenza\n                ")]),t._v(" "),s("p",{staticClass:"text-black"},[t._v("\n                  Via Domenico Trentacoste, 9, 20134, Milano (MI), Italia\n                ")])])]),t._v(" "),s("div",{staticClass:"col-span-4 space-y-8"},[s("div",{staticClass:"grid grid-cols-12 gap-5"},[s("div",{staticClass:"col-span-6 space-y-2"},[s("p",{staticClass:"font-bold text-sm text-gray-500"},[t._v("\n                    Data di nascita\n                  ")]),t._v(" "),s("p",{staticClass:"text-black"},[t._v("01/08/1961")])]),t._v(" "),s("div",{staticClass:"col-span-6 space-y-2"},[s("p",{staticClass:"font-bold text-sm text-gray-500"},[t._v("Età")]),t._v(" "),s("p",{staticClass:"text-black"},[t._v("60 anni")])])]),t._v(" "),s("div",{staticClass:"space-y-2"},[s("p",{staticClass:"font-bold text-sm text-gray-500"},[t._v("E-mail")]),t._v(" "),s("p",{staticClass:"text-black"},[t._v("alessialongobardi@email.com")])]),t._v(" "),s("div",{staticClass:"space-y-2"},[s("p",{staticClass:"font-bold text-sm text-gray-500"},[t._v("\n                  Indirizzo di domicilio (solo se diverso da residenza)\n                ")]),t._v(" "),s("p",{staticClass:"text-black"},[t._v("\n                  Via Bistolfi, 10, 20096, Cernusco sul Naviglio (MI), Italia\n                ")])])])]),t._v(" "),s("div",{staticClass:"mt-10 flex flex-row-reverse"},[s("b-button",{attrs:{variant:"primary-alt"}},[t._v("Modifica dati anagrafici")])],1)])]),t._v(" "),s("b-tab",{attrs:{name:"Data Medici"}},[s("medical-data",{attrs:{"user-id":t.userId}})],1),t._v(" "),s("b-tab",{attrs:{name:"Calendario"}},[t._v(" comming soon ")]),t._v(" "),s("b-tab",{attrs:{name:"Communicazioni"}},[s("Messages",{attrs:{"user-id":t.userId}})],1)],1)],1),t._v(" "),s("div",{staticClass:"mt-10"},[s("b-tabs",{staticClass:"bg-white",attrs:{options:{useUrlFragment:!0}}},[s("b-tab",{attrs:{name:"Documenti inviati al paziente",suffix:t.documentAlerts?t.dotIcon:""}},[s("info-documents",{attrs:{"user-id":t.userId},on:{"update-alert":function(e){t.documentAlerts=e}}})],1),t._v(" "),s("b-tab",{attrs:{name:"questionari inviati al paziente",suffix:t.surveySuffix}},[s("surveys",{attrs:{"user-id":t.userId},on:{"update-alert":function(e){t.surveyAlerts=e},"update-haswarning":function(e){t.surveyWarning=e}}})],1),t._v(" "),s("b-tab",{attrs:{name:"Documenti del paziente"}},[s("patient-documents",{attrs:{"user-id":t.userId}})],1)],1)],1)],1)}),[],!1,null,null,null).exports;const sa=(0,a.aZ)({name:"SurveyDetailPage",setup:function(t,e){var s=e.root,r=Fs(),n=r.loading,i=r.survey,l=r.getSurvey,c=r.saveNote,u=(0,a.iH)(!1);return l(s.$route.params.patientId,s.$route.params.surveyId).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)})),{loading:n,survey:i,savingNote:u,save:function(){u.value=!0,c(s.$route.params.patientId,s.$route.params.surveyId,{note:i.note}).then((function(t){var e=t.data;i.reviewed_at=e.data.reviewed_at,o.default.toasted.success("Note saved successfully")})).finally((function(){u.value=!1})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))}}}});const aa=(0,k.Z)(sa,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-page-header",{attrs:{title:"Dettagilo questionario"}}),t._v(" "),t.loading?s("p",[t._v("Loading detail...")]):[s("div",[s("h2",{staticClass:"capitalize text-2xl font-bold"},[t._v(t._s(t.survey.title))]),t._v(" "),s("div",{staticClass:"mt-2 grid grid-cols-2"},[s("table",{staticClass:"border-separate",staticStyle:{"border-spacing":"10px","margin-left":"-10px"}},[s("tr",[s("td",[t._v("Inviato il:")]),t._v(" "),s("td",{staticClass:"font-semibold"},[t._v(t._s(t._f("date")(t.survey.sent_at)))])]),t._v(" "),s("tr",[s("td",[t._v("Sato:")]),t._v(" "),s("td",{staticClass:"font-semibold"},[t.survey.completed_at?s("p",{staticClass:"text-green-500"},[t._v("Compilato")]):s("p",{staticClass:"text-gray-500"},[t._v("Non Compilato")])])]),t._v(" "),s("tr",[s("td",[t._v("Compilator il:")]),t._v(" "),s("td",{staticClass:"font-semibold"},[t.survey.completed_at?s("p",[t._v(t._s(t._f("date")(t.survey.completed_at)))]):s("p",[t._v("---")])])]),t._v(" "),t.survey.completed_at?s("tr",[s("td",[t._v("Reviewed il:")]),t._v(" "),s("td",{staticClass:"font-semibold"},[t.survey.reviewed_at?s("p",[t._v(t._s(t._f("date")(t.survey.reviewed_at)))]):s("p",[t._v("---")])])]):t._e()]),t._v(" "),s("div",[s("p",{staticClass:"font-semibold"},[t._v("Description:")]),t._v(" "),s("p",{staticClass:"mt-1",domProps:{innerHTML:t._s(t.survey.description)}})])])]),t._v(" "),s("b-block",{staticClass:"mt-10 py-5"},[s("table",{staticClass:"table-auto w-full"},[s("thead",{staticClass:"uppercase text-white bg-ternary"},[s("tr",{staticClass:"font-semibold text-left"},[s("td",{staticClass:"p-2"},[t._v("#")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("Titolo")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("Domanda")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("Riposta")]),t._v(" "),s("td",{staticClass:"p-2"},[t._v("Alert")])])]),t._v(" "),s("tbody",{staticClass:"text-sm"},[t.survey.answers.length?t._l(t.survey.answers,(function(e,a){return s("tr",{key:e.id,class:a%2==0?"bg-gray-100":""},[s("td",{staticClass:"px-2 py-3 font-semibold"},[t._v(t._s(a+1)+".")]),t._v(" "),s("td",{staticClass:"px-2 py-3 font-semibold",staticStyle:{"max-width":"100px"}},[t._v(t._s(e.question.title))]),t._v(" "),s("td",{staticClass:"px-2 py-3",staticStyle:{"max-width":"150px"}},[t._v(t._s(e.question.description))]),t._v(" "),s("td",{staticClass:"px-2 py-3",staticStyle:{"max-width":"100px"}},[t._v(t._s(e.body))]),t._v(" "),s("td",{staticClass:"px-2 py-3"},[t.survey.warning_answers.includes(e.id)?s("svg",{staticClass:"h-6 w-6 fill-current text-yellow-500",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"}})]):t._e()])])})):s("tr",[s("td",{staticClass:"py-3",attrs:{colspan:"10"}},[s("p",{staticClass:"text-center text-sm text-gray-500"},[t._v("No answers found")])])])],2)])]),t._v(" "),t.survey.completed_at?s("div",{staticClass:"mt-5"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[s("label",{staticClass:"block font-semibold",attrs:{for:"note"}},[t._v("Note:")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.survey.note,expression:"survey.note"}],staticClass:"block mt-1 p-2 border-2",attrs:{cols:"60",rows:"5"},domProps:{value:t.survey.note},on:{input:function(e){e.target.composing||t.$set(t.survey,"note",e.target.value)}}}),t._v(" "),s("b-button",{staticClass:"mt-3",attrs:{type:"submit",disabled:t.savingNote||t.loading}},[t._v(t._s(t.survey.reviewed_at?"Update":"Save and Mark as reviewed"))])],1)]):t._e()]],2)}),[],!1,null,null,null).exports;function ra(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function na(){var t=(0,a.iH)([]),e=(0,a.qj)({question:"",answer:""}),s=(0,a.iH)(!1),r=g({});function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ra(e),s.value=!0,f.get("/backend/faq",{params:{}}).then((function(e){t.value=e.data.data})).finally((function(){return s.value=!1}))}return{faq:t,loading:s,qa:e,errors:r.errors,getFaq:n,saveQa:function(t){return s.value=!0,f.post("/backend/faq",t).then((function(t){return t.data})).catch((function(t){var e;throw 422===(null==t||null===(e=t.response)||void 0===e?void 0:e.status)&&r.adaptErr(t),t})).finally((function(){return s.value=!1}))},getQa:function(t){return s.value=!0,f.get("/backend/faq/".concat(t),{params:{}}).then((function(t){var s=t.data;e.question=s.data.question,e.answer=s.data.answer})).finally((function(){return s.value=!1}))},updateQa:function(t,e){return s.value=!0,f.put("/backend/faq/".concat(t),e).catch((function(t){var e;throw 422===(null==t||null===(e=t.response)||void 0===e?void 0:e.status)&&r.adaptErr(t),t})).finally((function(){return s.value=!1}))},deleteQa:function(t){return f.delete("/backend/faq/".concat(t))},saveSort:function(t){return f.post("/backend/faq/sort",{ids:t}).catch((function(t){var e;if(422===(null==t||null===(e=t.response)||void 0===e?void 0:e.status))throw n(),new Error("Some items seems to be deleted, please sort again");throw t}))}}}var oa=s(9980),ia=s.n(oa);const la=(0,a.aZ)({name:"FaqIndexPage",components:{draggable:ia()},setup:function(){var t=na(),e=t.loading,s=t.faq,r=t.getFaq,n=t.deleteQa,i=t.saveSort,l=(0,a.qj)({loading:!1,can:!1,shouldSave:!1});function c(){r().catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))}return(0,a.bv)(c),{sort:l,loading:e,faq:s,deleteItem:function(t,e){var s=t.target.closest("tr");confirm("Are you sure ?")&&(s.style.opacity=".6",s.style.pointerEvents="none",n(e).then((function(){o.default.toasted.success("Success"),c()})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)})))},toggleSort:function(){var t;l.can=!l.can,l.can?o.default.toasted.info("Drag and drop row to sort"):l.shouldSave&&(t=s.value.map((function(t){return t.id})),l.loading=!0,i(t).then((function(){l.shouldSave=!1,o.default.toasted.success("Sort saved successfully")})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)})).finally((function(){l.loading=!1})))}}}}),ca=la;const ua=(0,k.Z)(ca,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-page-header",{attrs:{title:"FAQ"}}),t._v(" "),s("div",{staticClass:"flex justify-between"},[s("b-button",{staticClass:"py-2",attrs:{disabled:t.loading||t.sort.loading||t.sort.can&&!t.sort.shouldSave},on:{click:t.toggleSort}},[t._v(t._s(t.sort.can?"Save Position":"Enable Sort"))]),t._v(" "),s("router-link",{attrs:{to:"/faq/create"}},[s("b-button",{staticClass:"py-2"},[t._v("create")])],1)],1),t._v(" "),s("div",{staticClass:"mt-5 bg-white p-3 rounded-md"},[s("table",{staticClass:"w-full"},[t._m(0),t._v(" "),t.loading?s("tr",{staticClass:"border-t border-b"},[t._m(1)]):t.faq.length?s("draggable",{attrs:{tag:"tbody","ghost-class":"sort-ghost",sort:t.sort.can},on:{update:function(e){t.sort.shouldSave=!0}},model:{value:t.faq,callback:function(e){t.faq=e},expression:"faq"}},t._l(t.faq,(function(e){return s("tr",{key:e.id,staticClass:"bg-white border-t border-b"},[s("td",{staticClass:"py-4 px-3"},[s("p",{staticStyle:{"max-width":"300px"}},[t._v(t._s(t._f("strlimit")(e.question,200)))])]),t._v(" "),s("td",{staticClass:"py-4 px-3"},[s("p",{staticStyle:{"max-width":"300px"}},[t._v(t._s(t._f("strlimit")(e.answer,200)))])]),t._v(" "),s("td",{staticClass:"py-4 px-3 flex items-center space-x-3"},[s("router-link",{staticClass:"inline-block bg-primary border-2 border-primary rounded-sm p-1 text-center",attrs:{to:{name:"faq.edit",params:{id:e.id}}}},[s("svg",{staticClass:"h-5 w-5 text-white",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"}})])]),t._v(" "),s("button",{staticClass:"p-1 text-primary hover:text-white border-2 border-primary rounded hover:bg-primary",on:{click:function(s){return t.deleteItem(s,e.id)}}},[s("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}})])])],1)])})),0):s("tr",{staticClass:"border-t border-b"},[t._m(2)])],1)])],1)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"p-3 text-left"},[t._v("Question")]),t._v(" "),s("th",{staticClass:"p-3 text-left"},[t._v("Answer")]),t._v(" "),s("th")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"py-4 px-3",attrs:{colspan:"3"}},[s("p",{staticClass:"text-gray-600 text-sm text-center"},[t._v("loading faq...")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"py-4 px-3",attrs:{colspan:"3"}},[s("p",{staticClass:"text-gray-600 text-sm text-center"},[t._v("No faq available")])])}],!1,null,null,null).exports;const da=(0,a.aZ)({name:"FaqFormPage",setup:function(t,e){var s=e.root,r=na(),n=r.errors,i=r.loading,l=r.qa,c=r.getQa,u=r.saveQa,d=r.updateQa,p=(0,a.Fl)((function(){return"faq.create"===s.$route.name}));return function(){if(p.value)return;c(s.$route.params.id).catch((function(t){var e,s,a;404===(null===(e=t.response)||void 0===e?void 0:e.status)&&La.back(),o.default.toasted.error((null==t||null===(s=t.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||t.message)}))}(),{errors:n,form:l,loading:i,save:function(){p.value?u(l).then((function(t){o.default.toasted.success("saved successfully"),La.push({name:"faq.edit",params:{id:t.data.id}})})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)})):d(s.$route.params.id,l).then((function(){o.default.toasted.success("updated successfully")})).catch((function(t){var e,s,a;404===(null===(e=t.response)||void 0===e?void 0:e.status)&&La.back(),o.default.toasted.error((null==t||null===(s=t.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||t.message)}))}}}}),pa=da;const va=(0,k.Z)(pa,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-5"},[s("b-page-header",{attrs:{title:"FAQ"}}),t._v(" "),s("form",{staticClass:"bg-white p-4 rounded-md w-full",on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[s("div",[s("label",{staticClass:"font-semibold",attrs:{for:"question"}},[t._v("Question")]),t._v(" "),s("div",{staticClass:"mt-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.question,expression:"form.question"}],staticClass:"w-full border border-primary px-2 py-1 focus-within:outline-none",attrs:{type:"text",id:"question"},domProps:{value:t.form.question},on:{input:function(e){e.target.composing||t.$set(t.form,"question",e.target.value)}}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.question}})],1)]),t._v(" "),s("div",{staticClass:"mt-3"},[s("label",{staticClass:"font-semibold",attrs:{for:"answer"}},[t._v("Answer")]),t._v(" "),s("div",{staticClass:"mt-1"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.answer,expression:"form.answer"}],staticClass:"w-full border border-primary px-2 py-1 focus-within:outline-none",attrs:{id:"answer",rows:"5"},domProps:{value:t.form.answer},on:{input:function(e){e.target.composing||t.$set(t.form,"answer",e.target.value)}}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.answer}})],1)]),t._v(" "),s("b-button",{staticClass:"mt-3",attrs:{disabled:t.loading}},[t._v("Save")])],1)],1)}),[],!1,null,null,null).exports;const ma=(0,a.aZ)({name:"CreditFormPage",components:{quillEditor:rt.quillEditor},setup:function(){var t=function(){var t=(0,a.iH)(""),e=(0,a.iH)(!1),s=g();return{loading:e,content:t,errors:s.errors,getCredit:function(){return e.value=!0,f.get("/backend/credit").then((function(e){var s=e.data;t.value=s.data.content})).finally((function(){return e.value=!1}))},updateCredit:function(t){return e.value=!0,f.post("/backend/credit",{content:t}).catch((function(t){var e;throw 422===(null==t||null===(e=t.response)||void 0===e?void 0:e.status)&&s.adaptErr(t),t})).finally((function(){return e.value=!1}))}}}(),e=t.loading,s=t.content,r=t.errors,n=t.getCredit,i=t.updateCredit;return(0,a.bv)((function(){n().catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))})),{loading:e,errors:r,content:s,editorOptions:it,update:function(){i(s.value).then((function(){o.default.toasted.success("Updated successfully")})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))}}}}),fa=ma;const ga=(0,k.Z)(fa,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"mt-3",on:{submit:function(e){return e.preventDefault(),t.update.apply(null,arguments)}}},[s("b-page-header",{attrs:{title:"Credit"}}),t._v(" "),s("b-block",[s("div",[s("quill-editor",{attrs:{options:t.editorOptions},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.content}})],1),t._v(" "),s("b-button",{staticClass:"mt-5 py-2 w-full",attrs:{disabled:t.loading,type:"submit"}},[t._v("Update")])],1)],1)}),[],!1,null,null,null).exports;const _a=(0,a.aZ)({name:"ProfilePage",setup:function(t,e){e.root;var s=A(),r=s.updateProfile,n=s.errors,i=h(),l=(0,a.iH)(i.user),c=(0,a.qj)({email:l.value.email,name:l.value.name,password:null,password_confirmation:null,current_password:""});return console.log(c),{form:c,errors:n,submit:function(){r(c).then((function(t){o.default.toasted.success(t.message),La.push({name:"login"})})).catch((function(t){var e,s;o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))}}}}),ha=_a;const ba=(0,k.Z)(ha,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-page-header",{attrs:{title:"Crea un nuovo user"}}),t._v(" "),s("b-block",{staticClass:"mt-3"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[s("div",[s("label",{staticClass:"font-semibold",attrs:{for:"name"}},[t._v("Name")]),t._v(" "),s("div",{staticClass:"mt-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"\n              w-full\n              border border-primary\n              px-2\n              py-1\n              focus-within:outline-none\n            ",attrs:{id:"name",type:"text",disabled:""},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.name}})],1)]),t._v(" "),s("div",{staticClass:"mt-3"},[s("label",{staticClass:"font-semibold",attrs:{for:"email"}},[t._v("Email")]),t._v(" "),s("div",{staticClass:"mt-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"\n              w-full\n              border border-primary\n              px-2\n              py-1\n              focus-within:outline-none\n            ",attrs:{id:"email",type:"text",disabled:""},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.email}})],1)]),t._v(" "),[s("div",{staticClass:"mt-3"},[s("label",{staticClass:"font-semibold",attrs:{for:"current_password"}},[t._v("Current Password")]),t._v(" "),s("div",{staticClass:"mt-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.current_password,expression:"form.current_password"}],staticClass:"\n                w-full\n                border border-primary\n                px-2\n                py-1\n                focus-within:outline-none\n              ",attrs:{id:"current_password",type:"password",autocomplete:"false"},domProps:{value:t.form.current_password},on:{input:function(e){e.target.composing||t.$set(t.form,"current_password",e.target.value)}}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.current_password}})],1)]),t._v(" "),s("div",{staticClass:"mt-3"},[s("label",{staticClass:"font-semibold",attrs:{for:"password"}},[t._v("New Password")]),t._v(" "),s("div",{staticClass:"mt-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"\n                w-full\n                border border-primary\n                px-2\n                py-1\n                focus-within:outline-none\n              ",attrs:{id:"password",type:"password"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.password}})],1)]),t._v(" "),s("div",{staticClass:"mt-3"},[s("label",{staticClass:"font-semibold",attrs:{for:"password_confirmation"}},[t._v("Password Confirmation")]),t._v(" "),s("div",{staticClass:"mt-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password_confirmation,expression:"form.password_confirmation"}],staticClass:"\n                w-full\n                border border-primary\n                px-2\n                py-1\n                focus-within:outline-none\n              ",attrs:{id:"password_confirmation",type:"password"},domProps:{value:t.form.password_confirmation},on:{input:function(e){e.target.composing||t.$set(t.form,"password_confirmation",e.target.value)}}}),t._v(" "),s("err-msg",{attrs:{message:t.errors.password_confirmation}})],1)])],t._v(" "),s("b-button",{staticClass:"mt-5",attrs:{type:"submit"}},[t._v("Change Password")])],2)])],1)}),[],!1,null,null,null).exports;const ya=(0,a.aZ)({name:"PasswordResetPage",setup:function(t,e){e.root;var s=x(),r=s.errors,n=s.isLoading,i=s.forgetPassword,l=(0,a.iH)(""),c=(0,a.qj)({email:"",loading:!1});return{form:c,isLoading:n,errors:r,submit:function(){c.loading=!0,l.value="",i(c).then((function(t){l.value=t.message,c.loading=!1})).catch((function(t){var e,s;c.loading=!1,o.default.toasted.error((null==t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message)}))},successMessage:l}}}),xa=ya;var wa={login:j,logout:E,reset:z,forgetpassword:(0,k.Z)(xa,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"px-2 mx-auto max-w-sm shadow-md"},[s("div",{staticClass:"\n      text-center\n      font-bold\n      text-3xl\n      py-4\n      bg-secondary\n      text-white\n      rounded-t-md\n    "},[t._v("\n    R-Kare\n  ")]),t._v(" "),s("main",{staticClass:"px-6 py-7 bg-white rounded-b-md"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[s("p",{staticStyle:{color:"#303233"}},[t._v("\n        Please enter your email to search for your account.\n      ")]),t._v(" "),s("div",{staticClass:"mt-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"input w-full focus:outline-none",attrs:{type:"email",placeholder:"Email"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),t._v(" "),t.form.loading?s("small",{staticClass:"block text-yellow-600"},[t._v("Loading......")]):t._e(),t._v(" "),t.errors.email?s("small",{staticClass:"block text-red-600"},[t._v(t._s(t.errors.email))]):t._e(),t._v(" "),t.successMessage?s("small",{staticClass:"block text-blue-600"},[t._v(t._s(t.successMessage))]):t._e()]),t._v(" "),s("div",{staticClass:"mt-6"},[s("button",{staticClass:"\n            w-full\n            py-3\n            bg-primary\n            text-white\n            font-bold font-sm\n            rounded-md\n          ",attrs:{type:"submit",disabled:t.isLoading}},[t._v("\n          Submit\n        ")])])])])])}),[],!1,null,null,null).exports},Ca={index:Q,form:X,profile:ba},ka={index:xs,show:ea,surveyShow:aa},ja={index:Pt,form:xt},Pa={index:ft,form:ut},Sa={index:Wt,form:Ht},Oa={index:re,form:pe},qa={index:At,form:Et},Da={index:{main:he,inboundList:Ee,readList:He,requireCallList:Ue,archivedList:Je,outboundList:Ie},show:xe,form:qe},Ma={index:ua,form:va},Ea={notFound:ts},$a=new i.Z({mode:"hash",linkActiveClass:"active--nav",routes:[{path:"/",component:vs,meta:{guest:!0},redirect:"login",children:[{path:"login",name:"login",component:wa.login},{path:"reset-password",name:"reset.password",component:wa.reset},{path:"forget/password",name:"forget.password",component:wa.forgetpassword}]},{path:"/",component:ds,meta:{auth:!0},children:[{path:"dashboard",name:"dashboard",component:D},{path:"users",name:"users.index",component:Ca.index},{path:"users/create",name:"users.create",component:Ca.form},{path:"change/profile",name:"user.profile",component:Ca.profile},{path:"users/:id/edit",name:"users.edit",component:Ca.form},{path:"patients",name:"patients.index",component:ka.index},{path:"patients/:id",name:"patients.show",component:ka.show},{path:"patients/:patientId/surveys/:surveyId",name:"patients.surveys.show",component:ka.surveyShow},{path:"pathologies",name:"pathologies.index",component:ja.index},{path:"pathologies/create",name:"pathologies.create",component:ja.form},{path:"pathologies/:id/edit",name:"pathologies.edit",component:ja.form},{path:"documents",name:"documents.index",component:Pa.index},{path:"documents/create",name:"documents.create",component:Pa.form},{path:"documents/:id/edit",name:"documents.edit",component:Pa.form},{path:"questions",name:"questions.index",component:Sa.index},{path:"questions/create",name:"questions.create",component:Sa.form},{path:"surveys",name:"surveys.index",component:Oa.index},{path:"surveys/create",name:"surveys.create",component:Oa.form},{path:"surveys/:id",name:"surveys.edit",component:Oa.form},{path:"message-topics",name:"messageTopics.index",component:qa.index},{path:"message-topics/create",name:"messageTopics.create",component:qa.form},{path:"message-topics/:id/edit",name:"messageTopics.edit",component:qa.form},{path:"messages",name:"messages.index",component:Da.index.main,redirect:{name:"messages.index.inbound"},children:[{path:"inbound",name:"messages.index.inbound",component:Da.index.inboundList},{path:"read",name:"messages.index.read",component:Da.index.readList},{path:"require-call",name:"messages.index.requireCall",component:Da.index.requireCallList},{path:"archived",name:"messages.index.archived",component:Da.index.archivedList},{path:"outbound",name:"messages.index.outbound",component:Da.index.outboundList}]},{path:"messages/create",name:"messages.create",component:Da.form},{path:"messages/:id",name:"messages.show",component:Da.show},{path:"faq",name:"faq.index",component:Ma.index},{path:"faq/create",name:"faq.create",component:Ma.form},{path:"faq/:id/edit",name:"faq.edit",component:Ma.form},{path:"credit",name:"credit",component:ga},{path:"logout",name:"logout",component:wa.logout}]},{path:"/",component:fs,children:[{path:"*",name:"404",component:Ea.notFound}]}]});$a.beforeEach((function(t,e,s){var a=h();t.matched.some((function(t){return t.meta.auth}))?a.isAuthenticated?s():"logout"===t.name?s({name:"login"}):s({name:"login",query:{redirect:t.fullPath}}):t.matched.some((function(t){return t.meta.guest}))&&a.isAuthenticated?s({name:"dashboard"}):s()}));const La=$a,za=(0,a.aZ)({name:"App",setup:function(t,e){var s=e.root,a=x().getUser,r=es();return h().$subscribe((function(t,e){e.user&&La.push(s.$route.query.redirect||"dashboard")})),r.loading=!0,a().finally((function(){r.loading=!1})),{settingsStore:r}}});const Aa=(0,k.Z)(za,(function(){var t=this.$createElement;return(this._self._c||t)("router-view")}),[],!1,null,null,null).exports;const Ia=(0,a.aZ)({name:"BaseBlock",props:["title"]});const Za=(0,k.Z)(Ia,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"base-block bg-white p-3 overflow-scroll"},[t.title?s("p",{staticClass:"text-xl font-semibold text-primary mb-5"},[t._v(t._s(t.title))]):t._e(),t._v(" "),t._t("default")],2)}),[],!1,null,null,null).exports;const Fa=(0,a.aZ)({name:"BaseButton",props:["variant"],emits:["click"],setup:function(t){return{variantClass:(0,a.Fl)((function(){return{primary:"bg-primary border-2 border-primary","primary-alt":"border-2 border-primary text-primary hover:bg-primary hover:text-white"}[t.variant||"primary"]}))}}});const Ba=(0,k.Z)(Fa,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{staticClass:"px-5 py-1 text-center text-white text-sm font-bold rounded hover:shadow-lg",class:t.variantClass,on:{click:function(e){return t.$emit("click",e)}}},[t._t("default")],2)}),[],!1,null,null,null).exports;var Na=s(1658),Ha=s.n(Na),Ta=s(2965),Ra=s.n(Ta),Va=s(521),Qa=s.n(Va),Ua=Ha()(Ra(),Qa());const Ya=(0,a.aZ)({name:"BaseFileUploader",props:{value:[String,Array],multiple:{multiple:{type:Boolean,default:!1}},accept:String},components:{FilePond:Ua},setup:function(t,e){var s=e.emit,r=(0,a.iH)(null),n=(0,a.Fl)((function(){return t.value?Array.isArray(t.value)?(t.value||[]).map((function(t){return{source:t,options:{type:"local"}}})):[{source:t.value,options:{type:"local"}}]:[]}));return{pond:r,files:n,serverOptions:{url:"/api/v1/uploads",process:{withCredentials:!0},load:function(t,e,s){f("stream?path="+t,{responseType:"blob"}).then((function(t){e(t.data)})).catch((function(t){console.log(t),s("Failed to load image")}))}},emitFiles:function(){[3,9].includes(r.value._pond.status)||s("input",function(){var e=((arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||r.value.getFiles()).map((function(t){return t.serverId})).filter((function(t){return t}));return t.multiple?e:e[0]||null}())},openFile:function(t){"string"==typeof t.source&&window.open(t.source).focus()},getRetryIcon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon-refresh" width="26"><circle style="fill:none" cx="12" cy="12" r="10"/><path style="fill:white" d="M8.52 7.11a5.98 5.98 0 0 1 8.98 2.5 1 1 0 1 1-1.83.8 4 4 0 0 0-5.7-1.86l.74.74A1 1 0 0 1 10 11H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1.7-.7l.82.81zm5.51 8.34l-.74-.74A1 1 0 0 1 14 13h3a1 1 0 0 1 1 1v3a1 1 0 0 1-1.7.7l-.82-.81A5.98 5.98 0 0 1 6.5 14.4a1 1 0 1 1 1.83-.8 4 4 0 0 0 5.7 1.85z"/></svg>',getRemoveIcon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="26" class="icon-close-circle"><circle style="fill:none" cx="12" cy="12" r="10"/><path style="fill:white" d="M13.41 12l2.83 2.83a1 1 0 0 1-1.41 1.41L12 13.41l-2.83 2.83a1 1 0 1 1-1.41-1.41L10.59 12 7.76 9.17a1 1 0 0 1 1.41-1.41L12 10.59l2.83-2.83a1 1 0 0 1 1.41 1.41L13.41 12z"/></svg>',getPlaceholderLabel:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="35" class="icon-cloud-upload mr-3"><path class="fill-dark-gray" d="M18 14.97c0-.76-.3-1.51-.88-2.1l-3-3a3 3 0 0 0-4.24 0l-3 3A3 3 0 0 0 6 15a4 4 0 0 1-.99-7.88 5.5 5.5 0 0 1 10.86-.82A4.49 4.49 0 0 1 22 10.5a4.5 4.5 0 0 1-4 4.47z"/><path class="fill-dark-gray" d="M11 14.41V21a1 1 0 0 0 2 0v-6.59l1.3 1.3a1 1 0 0 0 1.4-1.42l-3-3a1 1 0 0 0-1.4 0l-3 3a1 1 0 0 0 1.4 1.42l1.3-1.3z"/></svg> Drop files or click here to upload'}}});const Ga=(0,k.Z)(Ya,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("file-pond",{ref:"pond",attrs:{"label-idle":"Drag & Drop your files or <u>Browse</u>","icon-remove":t.getRemoveIcon,"icon-retry":t.getRetryIcon,"allow-multiple":t.multiple,"accepted-file-types":t.accept||"",server:t.serverOptions,files:t.files,allowReorder:!0,"instant-upload":!0,"max-parallel-uploads":500,onreorderfiles:t.emitFiles},on:{processfile:t.emitFiles,removefile:t.emitFiles,activatefile:t.openFile}})],1)}),[],!1,null,null,null).exports;const Wa=(0,a.aZ)({name:"BaseModal",props:["title","size","closeOnEsc"],setup:function(t,e){var s=e.emit,r=e.slots,n=(0,a.Fl)((function(){return{md:"max-w-md",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl"}[t.size]||"max-w-xl"})),o=function(t){27===t.keyCode&&s("close")};return(0,a.bv)((function(){document.addEventListener("keyup",o),document.body.style.overflowY="hidden"})),(0,a.Ah)((function(){document.removeEventListener("keyup",o),document.body.style.overflowY="auto"})),{sizeClass:n,slots:r}}});const Ka=(0,k.Z)(Wa,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("portal",{attrs:{to:"modals"}},[s("transition",{attrs:{name:"modal"}},[s("div",{staticClass:"\n        fixed\n        z-50\n        top-0\n        left-0\n        w-full\n        h-screen\n        bg-black bg-opacity-40\n        transition-opacity\n        ease-in\n      ",on:{click:function(e){return e.target!==e.currentTarget?null:t.$emit("close")}}},[s("div",{staticClass:"h-full mx-auto pt-48",class:t.sizeClass},[s("div",{staticClass:"bg-white px-8 py-5 rounded"},[s("div",{staticClass:"flex items-center justify-between"},[s("div",[t._t("header",(function(){return[s("h1",{staticClass:"text-xl uppercase font-semibold tracking-wide"},[t._v("\n                  "+t._s(t.title)+"\n                ")])]}))],2),t._v(" "),s("button",{on:{click:function(e){return e.preventDefault(),t.$emit("close")}}},[s("svg",{staticClass:"h-7 w-7 fill-current",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"}})])])]),t._v(" "),s("div",{staticClass:"mt-5"},[t._t("default")],2),t._v(" "),t.slots.footer?s("div",{staticClass:"mt-10"},[t._t("footer")],2):t._e()])])])])],1)}),[],!1,null,null,null).exports;const Ja=(0,a.aZ)({name:"BasePageHeader",props:["title"],setup:function(t){(0,a.bv)((function(){document.title=t.title||"R-Kare"}))}});const Xa=(0,k.Z)(Ja,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("portal",{attrs:{to:"header"}},[s("div",{staticClass:"flex items-center"},[t.title?s("h1",{staticClass:"text-xl font-bold"},[t._v(t._s(t.title))]):t._e(),t._v(" "),s("div",{staticClass:"ml-5"},[t._t("default")],2)])])}),[],!1,null,null,null).exports;const tr=(0,a.aZ)({name:"BasePaginator",emits:["change"],props:["data"],setup:function(t,e){var s=e.emit;return{onFirstPage:(0,a.Fl)((function(){return 1===t.data.currentPage})),goToPage:function(e){e>=1&&e<=t.data.lastPage&&s("change",{page:e})},elements:(0,a.Fl)((function(){for(var e=[],s=1;s<=t.data.lastPage;s++)e.push(s);return e}))}}});const er=(0,k.Z)(tr,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex items-center text-sm max-w-3xl"},[s("button",{staticClass:"p-3 hover:bg-gray-200",attrs:{disabled:t.onFirstPage},on:{click:function(e){return t.goToPage(1)}}},[s("svg",{staticClass:"w-3 h-3",attrs:{viewBox:"0 0 6 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M5.3291 5.5L5.9166 4.9125L4.00827 3L5.9166 1.0875L5.3291 0.5L2.8291 3L5.3291 5.5Z",fill:"#303233"}}),t._v(" "),s("path",{attrs:{d:"M2.5835 5.5L3.171 4.9125L1.26266 3L3.171 1.0875L2.5835 0.5L0.0834964 3L2.5835 5.5Z",fill:"#303233"}})])]),t._v(" "),s("button",{staticClass:"p-3 hover:bg-gray-200 flex",attrs:{disabled:t.onFirstPage},on:{click:function(e){return t.goToPage(t.data.currentPage-1)}}},[s("svg",{staticClass:"w-3 h-3",attrs:{viewBox:"0 0 4 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M2.5835 5.5L3.171 4.9125L1.26266 3L3.171 1.0875L2.5835 0.5L0.0834964 3L2.5835 5.5Z",fill:"#303233"}})])]),t._v(" "),s("div",{staticClass:"mx-1 grid gap-y-2",class:t.elements.length>12?"grid-cols-12":"grid-flow-col"},t._l(t.elements,(function(e){return s("button",{key:e,staticClass:"py-1 px-3 border-b-2 border-transparent hover:text-primary hover:bg-primary hover:bg-opacity-20 hover:border-primary",class:{"text-primary bg-primary bg-opacity-20 border-primary":e===t.data.currentPage},attrs:{disabled:e===t.data.currentPage},on:{click:function(s){return t.goToPage(e)}}},[t._v(t._s(e))])})),0),t._v(" "),s("button",{staticClass:"p-3 hover:bg-gray-200",on:{click:function(e){return t.goToPage(t.data.currentPage+1)}}},[s("svg",{staticClass:"w-3 h-3 transform rotate-180",attrs:{viewBox:"0 0 4 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M2.5835 5.5L3.171 4.9125L1.26266 3L3.171 1.0875L2.5835 0.5L0.0834964 3L2.5835 5.5Z",fill:"#303233"}})])]),t._v(" "),s("button",{staticClass:"p-3 hover:bg-gray-200",on:{click:function(e){return t.goToPage(t.data.lastPage)}}},[s("svg",{staticClass:"w-3 h-3 transform rotate-180",attrs:{viewBox:"0 0 6 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M5.3291 5.5L5.9166 4.9125L4.00827 3L5.9166 1.0875L5.3291 0.5L2.8291 3L5.3291 5.5Z",fill:"#303233"}}),t._v(" "),s("path",{attrs:{d:"M2.5835 5.5L3.171 4.9125L1.26266 3L3.171 1.0875L2.5835 0.5L0.0834964 3L2.5835 5.5Z",fill:"#303233"}})])])])}),[],!1,null,null,null).exports;var sr=s(9938),ar=s.n(sr),rr={template:'<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 fill-current" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />\n</svg>'};const nr=(0,a.aZ)({name:"BaseSelect",emits:["input","search"],props:["value","options","placeholder","multiple","searchable","label","reduce","filterable","serverMessage","close_on_select"],components:{"v-select":ar()},setup:function(t,e){return{vSelect:(0,a.iH)(null),components:{Deselect:rr},input:function(t){return e.emit("input",t)},emitSearch:function(t,s){e.emit("search",t,s)}}}});const or=(0,k.Z)(nr,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-select",{ref:"vSelect",staticClass:"text-sm",attrs:{components:t.components,options:t.options,value:t.value,label:t.label,placeholder:t.placeholder,"close-on-select":t.close_on_select||!1,multiple:t.multiple||!1,searchable:!0,"deselect-from-dropdown":!0,reduce:t.reduce,filterable:t.filterable},on:{search:t.emitSearch,input:t.input},scopedSlots:t._u([t.serverMessage?{key:"no-options",fn:function(){return[s("p",[t._v(t._s(t.serverMessage))])]},proxy:!0}:null,{key:"open-indicator",fn:function(e){var a=e.attributes;return[s("span",t._b({},"span",a,!1),[s("svg",{staticClass:"h-5 w-5 fill-current text-primary",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"}})])])]}},{key:"option",fn:function(e){return[t._t("option",(function(){return[s("div",{staticClass:"-mx-3 flex items-center space-x-2"},[s("input",{staticStyle:{"pointer-events":"none"},attrs:{type:"checkbox"},domProps:{checked:t.label?t.vSelect.isOptionSelected(e):t.vSelect.isOptionSelected(e.label)}}),t._v(" "),s("span",[t._v(t._s(t.vSelect.getOptionLabel(e)))])])]}),{option:e,isSelected:t.label?t.vSelect.isOptionSelected(e):t.vSelect.isOptionSelected(e.label)})]}}],null,!0)})}),[],!1,null,null,null).exports;const ir=(0,a.aZ)({name:"ErrorMessage",props:["message"]});const lr=(0,k.Z)(ir,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.message?s("span",{staticClass:"text-xs text-red-500"},[t._v(t._s(t.message))]):t._e()}),[],!1,null,null,null).exports;var cr=s(381),ur=s.n(cr),dr=s(6486);console.log("loaded"),o.default.filter("datetime",(function(t){if(t)return ur()(String(t)).format("MM/DD/YYYY hh:mm")})),o.default.filter("date",(function(t){if(t)return ur()(String(t)).format("MM/DD/YYYY")})),o.default.filter("strlimit",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return(0,dr.isString)(t)&&t.length>e?t.substring(0,e)+s:t})),o.default.use(a.ZP),o.default.use(r.og),o.default.use(i.Z),o.default.use(n.ZP),o.default.use(u(),{theme:"bubble",iconPack:"fontawesome",position:"bottom-right",duration:3500}),o.default.component("b-paginator",er),o.default.component("b-button",Ba),o.default.component("b-button",Ba),o.default.component("b-modal",Ka),o.default.component("b-page-header",Xa),o.default.component("b-select",or),o.default.component("b-block",Za),o.default.component("b-file-uploader",Ga),o.default.component("b-tabs",l.Tabs),o.default.component("b-tab",l.Tab),o.default.component("err-msg",lr);const pr=o.default;function vr(t){return vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vr(t)}function mr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fr(t,e){for(var s=0;s<e.length;s++){var a=e[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function gr(t,e){if(e&&("object"===vr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _r(t){var e="function"==typeof Map?new Map:void 0;return _r=function(t){if(null===t||(s=t,-1===Function.toString.call(s).indexOf("[native code]")))return t;var s;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,a)}function a(){return hr(t,arguments,xr(this).constructor)}return a.prototype=Object.create(t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),yr(a,t)},_r(t)}function hr(t,e,s){return hr=br()?Reflect.construct:function(t,e,s){var a=[null];a.push.apply(a,e);var r=new(Function.bind.apply(t,a));return s&&yr(r,s.prototype),r},hr.apply(null,arguments)}function br(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function yr(t,e){return yr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},yr(t,e)}function xr(t){return xr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},xr(t)}var wr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yr(t,e)}(l,t);var e,s,a,n,o,i=(e=l,s=br(),function(){var t,a=xr(e);if(s){var r=xr(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return gr(this,t)});function l(){return mr(this,l),i.apply(this,arguments)}return a=l,(n=[{key:"connectedCallback",value:function(){this.mountPoint=document.createElement("span"),this.render()}},{key:"render",value:function(){new pr({el:this.appendChild(this.mountPoint),render:function(t){return t(Aa)},pinia:(0,r.WB)(),router:La})}}])&&fr(a.prototype,n),o&&fr(a,o),Object.defineProperty(a,"prototype",{writable:!1}),l}(_r(HTMLElement));customElements.get("ent-survey-widget")||customElements.define("ent-survey-widget",wr)},4220:()=>{},6700:(t,e,s)=>{var a={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":7093,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":7093,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":238,"./ru.js":238,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":9822,"./vi.js":9822,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function r(t){var e=n(t);return s(e)}function n(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=n,t.exports=r,r.id=6700}},t=>{var e=e=>t(t.s=e);t.O(0,[919,162],(()=>(e(3545),e(4220))));t.O()}]);